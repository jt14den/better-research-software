<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Building Better Research Software: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="../favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="../favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo.svg"><span class="badge text-bg-info">
          <abbr title="This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-circle" style="border-radius: 5px"></i>
              Beta
            </a>
            <span class="visually-hidden">This lesson is in the beta phase, which means that it is ready for teaching by instructors outside of the original author team.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Carpentries Incubator" src="../assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Building Better Research Software
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Building Better Research Software
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="test-suite-exercise.html">Implementing a test suite</a></li>
<li><a class="dropdown-item" href="ci-for-testing.html">Continuous Integration for automated testing</a></li>
<li><a class="dropdown-item" href="licensing.html">Software licensing</a></li>
<li><a class="dropdown-item" href="ethical-environmental-considerations.html">Ethical &amp; environmental considerations around research software</a></li>
<li><a class="dropdown-item" href="installation-instructions.html">Installation instructions</a></li>
<li><a class="dropdown-item" href="reproducible-research-discussion.html">Reproducible Research Discussion</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Building Better Research Software
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Course introduction</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-better-start-version-control.html">2. Better start with a software project</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-reproducible-dev-environment.html">3. Reproducible software environments</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-code-readability.html">4. Code readability</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-code-structure.html">5. Code structure</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-code-correctness.html">6. Code correctness</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-software-documentation.html">7. Software documentation</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-open-collaboration.html">8. Open software management &amp; collaboration</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-wrap-up.html">9. Wrap-up</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="test-suite-exercise.html">Implementing a test suite</a></li>
<li><a class="dropdown-item" href="ci-for-testing.html">Continuous Integration for automated testing</a></li>
<li><a class="dropdown-item" href="licensing.html">Software licensing</a></li>
<li><a class="dropdown-item" href="ethical-environmental-considerations.html">Ethical &amp; environmental considerations around research software</a></li>
<li><a class="dropdown-item" href="installation-instructions.html">Installation instructions</a></li>
<li><a class="dropdown-item" href="reproducible-research-discussion.html">Reproducible Research Discussion</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-introduction"><p>Content from <a href="01-introduction.html">Course introduction</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/01-introduction.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 20 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is open and reproducible research?</li>
<li>Why are these practices important, in particular in the context of
software used to support such research?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe the principles of open and reproducible research and why
they are of value in the research community</li>
<li>Explain how the concept of reproducibility translates into practices
for building better research software</li>
<li>Setup machine with software and data used to teach this course</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Software is <a href="https://www.software.ac.uk/blog/quick-and-dirty-analysis-software-being-used-research-python-matlab-and-r" class="external-link">fundamental
to modern research</a> - some of it would even be impossible without
software. From short, thrown-together temporary scripts written to help
with day-to-day research tasks, through an abundance of complex data
analysis spreadsheets, to the hundreds of software engineers and
millions of lines of code behind international efforts such as the Large
Hadron Collider, there are few areas of research where software does not
have a fundamental role.</p>
<p>This course teaches good practices and reproducible working methods
that are agnostic of a programming language (although we will use Python
code in our examples). It aims to provide researchers with the tools and
knowledge to feel confident when writing <strong>good quality and
sustainable software</strong> to support their research. Although the
discussion will often focus on software developed in the context of
research, most of the good practices introduced here are beneficial to
software development more generally.</p>
<p>The lesson is particularly focused on one aspect of good (scientific)
software development practice: improving software to enhance
reproducibility. That is, enabling others to run our code and obtain the
same results we did.</p>
<div id="why-should-i-care-about-reproducibility" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="why-should-i-care-about-reproducibility" class="callout-inner">
<h3 class="callout-title">Why should I care about reproducibility?</h3>
<div class="callout-content">
<p>Scientific transparency and rigor are key factors in research.
Scientific methodology and results need to be published openly and
replicated and confirmed by several independent parties. However,
research papers often lack the full details required for independent
reproduction or replication. Many attempts at reproducing or replicating
the results of scientific studies have failed in a variety of
disciplines ranging from psychology (<a href="https://www.science.org/doi/10.1126/science.aac4716" class="external-link">The Open
Science Collaboration (2015)</a>) to cancer sciences (<a href="https://elifesciences.org/articles/71601" class="external-link">Errington et al
(2021)</a>). These are called <a href="https://en.wikipedia.org/wiki/Replication_crisis" class="external-link"><strong>the
reproducibility and replicability crises</strong></a> - ongoing
methodological crises in which the results of many scientific studies
are difficult or impossible to repeat.</p>
<p>Reproducible research is a practice that ensures that researchers can
repeat the same analysis multiple times with the same results. It offers
many benefits to those who practice it:</p>
<ul>
<li>Reproducible research helps researchers remember how and why they
performed specific tasks and analyses; this enables easier explanation
of work to collaborators and reviewers.</li>
<li>Reproducible research enables researchers to quickly modify analyses
and figures - this is often required at all stages of research and
automating this process saves loads of time.</li>
<li>Reproducible research enables reusability of previously conducted
tasks so that new projects that require the same or similar tasks become
much easier and efficient by reusing or reconfiguring previous
work.</li>
<li>Reproducible research supports researchers’ career development by
facilitating the reuse and citation of all research outputs - including
both code and data.</li>
<li>Reproducible research is a strong indicator of rigor,
trustworthiness, and transparency in scientific research. This can
increase the quality and speed of peer review, because reviewers can
directly access the analytical process described in a manuscript. It
increases the probability that errors are caught early on - by
collaborators or during the peer-review process, helping alleviate the
reproducibility crisis.</li>
</ul>
<p>However, reproducible research often requires that researchers
implement new practices and learn new tools. This course aims to teach
some of these practices and tools pertaining to the use of software to
conduct reproducible research.</p>
<p>Review <a href="./reproducible-research-discussion.html">the
Reproducible Research Discussion</a> for a more in-depth discussion of
this topic.</p>
</div>
</div>
</div>
<section><h2 class="section-heading" id="practices-for-building-better-research-software">Practices for building better research software<a class="anchor" aria-label="anchor" href="#practices-for-building-better-research-software"></a>
</h2>
<hr class="half-width">
<p>The practices we will cover for building better research software
fall into three areas.</p>
<div class="section level3">
<h3 id="things-you-can-do-with-your-own-computing-environment-to-enhance-the-software">1. Things you can do with your own computing environment to enhance
the software<a class="anchor" aria-label="anchor" href="#things-you-can-do-with-your-own-computing-environment-to-enhance-the-software"></a>
</h3>
<ul>
<li>Using virtual development environments ensures your software can be
developed and run consistently across different systems, making it
easier for you and others to run, reuse, and extend your code.</li>
</ul>
</div>
<div class="section level3">
<h3 id="things-you-can-do-to-improve-the-source-code-of-the-software-itself">2. Things you can do to improve the source code of the software
itself<a class="anchor" aria-label="anchor" href="#things-you-can-do-to-improve-the-source-code-of-the-software-itself"></a>
</h3>
<ul>
<li>Organising and structuring your code and project directory keeps
your software clean, modular, and reusable, enhancing its readability,
extensibility, and reusability.</li>
<li>Following coding conventions and guides for your programming
language ensures that others find it easy to read your code, reuse or
extend it in their own examples and applications.</li>
<li>Testing can save time spent on debugging and ensures that your code
is correct and does what it is set out to do, giving you and others
confidence in your code and the results it produces.</li>
</ul>
</div>
<div class="section level3">
<h3 id="things-you-can-do-to-make-the-software-easier-for-other-people-to-use">3. Things you can do to make the software easier for other people to
use<a class="anchor" aria-label="anchor" href="#things-you-can-do-to-make-the-software-easier-for-other-people-to-use"></a>
</h3>
<ul>
<li>Using version control and collaboration platforms like <a href="https://github.com" class="external-link">GitHub</a>, <a href="https://gitlab.com" class="external-link">GitLab</a>, and <a href="https://codeberg.org/" class="external-link">CodeBerg</a> makes it easier to share code
and work on it together.</li>
<li>Fostering a community around your software and promoting
collaboration helps to grow a user base for your software and
contributes to its long-term sustainability.</li>
<li>Providing clear and comprehensive documentation, including code
comments, API specifications, setup guides, and usage instructions,
ensures your software is easy to understand, use, and extend (by you and
others).</li>
<li>Accompanying your software with clear information about its
licensing terms and how it should be cited ensures that others can reuse
and adapt your code with confidence and that you receive credit when
they do so.</li>
</ul>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Individually,</p>
<ul>
<li>reflect on what practices (and tools) you are already using in your
software development workflow,</li>
<li>list at least 3 new practices or tools that you would like to start
employing or using.</li>
</ul>
<p>Write your reflections in the shared collaborative document.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="our-research-software-project">Our research software project<a class="anchor" aria-label="anchor" href="#our-research-software-project"></a>
</h2>
<hr class="half-width">
<p>You are going to follow a fairly typical experience of a new
researcher (e.g. a PhD student or a postdoc) joining a research group.
You were emailed some spacewalks data and analysis code bundled in the
<code>spacewalks.zip</code> archive, written by another group member who
worked on similar things but has since left. You need to be able to
install and run this code on your machine, check you can understand it
and then adapt it to your own project.</p>
<p>As part of the <a href="./installation-instructions.html#spacewalks">setup for this
course</a>, you may have downloaded or been emailed the
<code>spacewalks.zip</code> archive. If not, you can <a href="./installation-instructions.html#spacewalks">download it</a> now.
Save the <code>spacewalks.zip</code> archive to your home directory and
extract it - you should get a directory called
<code>spacewalks</code>.</p>
<p>The first thing you may want to do is inspect the content of the code
and data you received. We will use VS Code for browsing, inspecting,
modifying files and running our code.</p>
<p>VS Code is a very handy tool for software development and is used by
many researchers worldwide. It “understands” the syntax of many
different file types - for example Python, JSON, CSV, etc. - either
natively or via extensions that can be installed. To open our directory
<code>spacewalks</code> in VS Code – go to <strong>File -&gt; Open
Folder</strong> and find <code>spacewalks</code>.</p>
<p>You may notice that the software project contains:</p>
<ol style="list-style-type: decimal">
<li>
<p>A JSON file called <code>data.json</code> - a snippet of which is
shown below - with data on extra-vehicular activities (EVAs,
i.e. spacewalks) undertaken by astronauts and cosmonauts from 1965 to
2013 (data provided by NASA via its <a href="https://data.nasa.gov/Raw-Data/Extra-vehicular-Activity-EVA-US-and-Russia/9kcy-zwvn/about_data" class="external-link">Open
Data Portal</a>).</p>
<figure><img src="../fig/astronaut-data-json-snippet.png" alt="JSON data file snippet showing EVA/spacewalk data including EVA ID, country, crew members, vehicle type, date of the spacewalk, duration, and purpose" class="figure mx-auto d-block"><div class="figcaption">JSON data file snippet showing EVA/spacewalk
data including EVA ID, country, crew members, vehicle type, date of the
spacewalk, duration, and purpose</div>
</figure>
</li>
<li>
<p>A Python script called <code>my code v2.py</code> containing some
analysis code.</p>
<figure><img src="../fig/astronaut-analysis-bad-code-screenshot.png" alt="The first few lines of a Python script used as example code for the episode" class="figure mx-auto d-block"><div class="figcaption">The first few lines of a Python script</div>
</figure><p>The code in the Python script does some common research
tasks:</p>
</li>
</ol>
<ul>
<li>Reads in the data from the JSON file</li>
<li>Changes the data from one data format to another and saves to a file
in the new format (CSV)</li>
<li>Performs some calculations to generate summary statistics about the
data</li>
<li>Makes a plot to visualise the data</li>
</ul>
<div id="read-and-understand-data-and-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="read-and-understand-data-and-code" class="callout-inner">
<h3 class="callout-title">Read and understand data and code</h3>
<div class="callout-content">
<p>Individually inspect the code and try and see if you can understand
what the code is doing and how it is organised.</p>
<p>In the shared document, write down anything that you think is not
“quite right”, not clear, is missing, or could be done better.</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Give me a hint </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<p>Below are some suggested questions to help you assess the code. These
are not the only criteria on which you could evaluate the code and you
may find other aspects to comment on.</p>
<ul>
<li>If these files were emailed to you, or sent on a chat platform, or
handed to you on a memory stick, how easy would it be to find them again
in 6 months, or 3 years?</li>
<li>Can you understand the code? Does it make sense to you?</li>
<li>Could you run the code on your platform/operating system (is there
documentation that covers installation instructions)? What programs or
libraries do you need to install to make it work (and which versions)?
Are these commonly used tools in your field?</li>
<li>Are you allowed to use the code in your own research? If you did,
would your collaborators expect credit in some form (paper authorship,
citation or acknowledgement)? Are you allowed to edit the files? Publish
them? Share them with others?</li>
<li>Is the code written in a way that allows you to easily modify or
extend it? How easy would it be to change its parameters to calculate a
different statistic, or run on a different input file?</li>
</ul>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>This is a (non-exhaustive) list of things that could be
fixed/improved with our code and data:</p>
<div class="section level4">
<h4 id="file-and-variable-naming">File and variable naming<a class="anchor" aria-label="anchor" href="#file-and-variable-naming"></a>
</h4>
<ul>
<li>data (<code>data.json</code>) and Python script
(<code>my code v2.py</code>) files could have more descriptive
names</li>
<li>Python script (<code>my code v2.py</code>) should not contain blank
spaces as it may cause problems when running the code from command
line</li>
<li>variables (e.g. <code>w</code>, <code>t</code>, <code>tt</code>,
<code>ttt</code>) should have more descriptive and meaningful names</li>
<li>version control is embedded in file name - there are better ways of
keeping track of changes to code and its different versions</li>
</ul>
</div>
<div class="section level4">
<h4 id="code-organisation-and-style">Code organisation and style<a class="anchor" aria-label="anchor" href="#code-organisation-and-style"></a>
</h4>
<ul>
<li>import statements should be grouped at the top</li>
<li>commenting and uncommenting code should not be used to direct the
flow of execution / type of analysis being done</li>
<li>the code lacks comments, documentation and explanations</li>
<li>code structure could be improved to be more modular and not one
monolithic piece of code - e.g. use functions for reusable units of
functionality</li>
<li>unused variables (e.g. <code>fieldnames</code> meant to be used when
saving data to CSV file) are polluting the code and confusing the person
reading the code</li>
<li>spaces should not be used in column names as it can lead to error
when reading the data in</li>
</ul>
</div>
<div class="section level4">
<h4 id="code-content-and-correctness">Code content and correctness<a class="anchor" aria-label="anchor" href="#code-content-and-correctness"></a>
</h4>
<ul>
<li>fixing the loop to 374 data entries is not reusable on other data
files and would likely break if the data file changed</li>
<li>running the code twice causes the program to fail as the result file
from the previous run will exist (which the code does not check for) and
the script will refuse to overwrite it</li>
<li>the code does not specify the encoding when reading the data in, and
we are also not sure what encoding the data was saved in originally</li>
<li>how can we be confident the data analysis and plot that is produced
as a result are correct?</li>
</ul>
</div>
<div class="section level4">
<h4 id="documentation">Documentation<a class="anchor" aria-label="anchor" href="#documentation"></a>
</h4>
<ul>
<li>there is no README documentation to orient the user</li>
<li>there is no licence information to say how the code can be reused
(which then means it cannot be reused at all)</li>
<li>it is not clear what software dependencies the code has</li>
<li>there are no installation instructions or instructions on how to run
the code</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>As you have seen from the previous exercise - there are quite a few
things that can be improved with this code. We will try to make this
research software project a “bit better” for future use.</p>
<p>Let’s check your setup now to make sure you are ready for the rest of
this course.</p>
<div id="check-your-setup" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="check-your-setup" class="callout-inner">
<h3 class="callout-title">Check your setup</h3>
<div class="callout-content">
<p>From a command line terminal on your operating system or within VS
Code run the following commands to check you have installed all the
tools listed in <a href="./installation-instructions.html">the Setup
page</a> and that are functioning correctly.</p>
<p>Checking the command line terminal:</p>
<ol style="list-style-type: decimal">
<li><code>$ date</code></li>
<li><code>$ echo $SHELL</code></li>
<li><code>$ pwd</code></li>
<li><code>$ whoami</code></li>
</ol>
<p>Checking Python:</p>
<ol start="5" style="list-style-type: decimal">
<li><code>$ python --version</code></li>
<li><code>$ python3 --version</code></li>
<li><code>$ which python</code></li>
<li><code>$ which python3</code></li>
</ol>
<p>Checking Git and GitHub:</p>
<ol start="9" style="list-style-type: decimal">
<li><code>$ git --help</code></li>
<li><code>$ git config --list</code></li>
<li><code>$ ssh -T git@github.com</code></li>
</ol>
<p>Checking VS Code:</p>
<ol start="12" style="list-style-type: decimal">
<li><code>$ code</code></li>
<li><code>$ code --list-extensions</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The expected out put of each command is:</p>
<ol style="list-style-type: decimal">
<li>Today’s date</li>
<li>
<code>bash</code> or <code>zsh</code> - this tells you what shell
language you are using. In this course we show examples in Bash.</li>
<li>Your “present working directory” or the folder where your shell is
running</li>
<li>Your username</li>
<li>In this course we are using Python 3. If
<code>python --version</code> gives you Python 2.x you may have two
versions of Python installed on your computer and need to be careful
which one you are using.</li>
<li>Use this command to be certain you are using Python version 3, not
2, if you have both installed.</li>
<li>The file path to where the Python version you are calling is
installed.</li>
<li>If you have more than one version these should be different paths,
if both 5. and 6. gave the same result then 7. and 8. should match as
well.</li>
<li>The help message explaining how to use the <code>git</code>
command.</li>
<li>You should have <code>user.name</code>, <code>user.email</code> and
<code>core.editor</code> set in your Git configuration. Check that the
editor listed is one you know how to use.</li>
<li>This checks if you have set up your connection to GitHub correctly.
If is says <code>permission denied</code> you may need to look at the
instructions for setting up SSH keys again on the Setup page.</li>
<li>This should open VS Code in your current working directory. macOS
users may need to first open VS Code and <a href="https://code.visualstudio.com/docs/setup/mac#_launching-from-the-command-line" class="external-link">add
it to the PATH</a>.</li>
<li>You should have the extensions GitLens, Git Graph, Python, JSON and
Excel Viewer installed to use in this course.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
reproducible research:</p>
<ul>
<li>
<a href="https://carpentries-incubator.github.io/reproducible-research-through-reusable-code-in-1-day" class="external-link">Reproducible
research through reusable code</a> is a one day course by the <a href="https://www.esciencecenter.nl" class="external-link">Netherlands eScience Center</a>
which discusses similar themes to this course, but in a shorter
format.</li>
<li><a href="https://book.the-turing-way.org/reproducible-research/reproducible-research" class="external-link">The
Turing Way’s “Guide for Reproducible Research”</a></li>
<li>
<a href="https://esajournals.onlinelibrary.wiley.com/doi/10.1002/bes2.1801" class="external-link">A
Beginner’s Guide to Conducting Reproducible Research</a>, Jesse M.
Alston, Jessica A. Rick, Bulletin of The Ecological Society of America
102 (2) (2021), <a href="https://doi.org/10.1002/bes2.1801" class="external-link uri">https://doi.org/10.1002/bes2.1801</a>
</li>
<li><a href="https://guereslib.github.io/ten-reproducible-research-things/" class="external-link">“Ten
reproducible research things” tutorial</a></li>
<li><a href="https://force11.org/groups/fair-4-research-software-fair4rs-working-group/" class="external-link">FORCE11’s
FAIR 4 Research Software (FAIR4RS) Working Group</a></li>
<li><a href="https://carpentries-lab.github.io/good-enough-practices/index.html" class="external-link">“Good
Enough Practices in Scientific Computing” course</a></li>
<li>
<a href="https://www.repro4everyone.org/" class="external-link">Reproducibility for
Everyone’s (R4E) resources</a>, community-led education initiative to
increase adoption of open research practices at scale</li>
<li>
<a href="https://intersect-training.org/training-links/" class="external-link">Training
materials on different aspects of research software engineering</a>
(including open source, reproducibility, research software testing,
engineering, design, continuous integration, collaboration, version
control, packaging, etc.), compiled by the <a href="https://intersect-training.org/" class="external-link">INTERSECT project</a>
</li>
<li>
<a href="https://forrt.org/resources/" class="external-link">Curated resources</a> by the
<a href="https://forrt.org/" class="external-link">Framework for Open and Reproducible
Research Training</a> (FORRT)</li>
</ul></section><section><h2 class="section-heading" id="acknowledgements-and-references">Acknowledgements and references<a class="anchor" aria-label="anchor" href="#acknowledgements-and-references"></a>
</h2>
<hr class="half-width">
<p>The content of this course borrows from or references <a href="reference.html#litref">various work</a>.</p>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-better-start-version-control"><p>Content from <a href="02-better-start-version-control.html">Better start with a software project</a></p>
<hr>
<p>Last updated on 2025-08-27 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/02-better-start-version-control.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 60 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a version control system?</li>
<li>Why is version control essential to building good software</li>
<li>What does a standard version control workflow look like?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Set up version control for our software project to track changes to
it</li>
<li>Create self-contained commits using Git to incrementally save
work</li>
<li>Push new work from a local machine to a remote server on GitHub</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode, we will set up our new research software project
using some good practices from the start. This will lay the foundation
for long-term sustainability of our code, collaboration, and
reproducibility.</p>
<p>This starts with following naming conventions for files, employing
version control, and (in the next episode) setting up a virtual
development environment with software dependencies to ensure the project
can be more easily and reliably run, shared and maintained. Next (over
the rest of the course) - adding tests, setting up automation
(e.g. continuous integration), documenting software and including
metadata such as licensing, authorship and citation will ensure the
results our software produces can be trusted and others can build upon
it with confidence.</p>
<p>Let’s begin by creating a new software project from our existing
code, and start tracking changes to it with version control.</p>
<section><h2 class="section-heading" id="from-script-to-software-project">From script to software project<a class="anchor" aria-label="anchor" href="#from-script-to-software-project"></a>
</h2>
<hr class="half-width">
<p>In the previous episode you have unzipped <code>spacewalks.zip</code>
into a directory <code>spacewalks</code> in your home directory. If you
have not opened the software directory in VS Code already – go to
<strong>File -&gt; Open Folder</strong> and find
<code>spacewalks</code>.</p>
<p>We also need access to a command line terminal to type various
commands. In VS Code start a new terminal via <strong>Terminal -&gt; New
Terminal</strong> (Windows users need to make sure the new terminal is
“GitBash”; not “PowerShell” or “cmd”). Alternatively, you can work with
a shell terminal directly (and not within VS Code), if you so
prefer.</p>
<p>If you are not already inside this directory, from your command line
terminal you can navigate to it and list its contents with:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="bu">cd</span> ~/spacewalks</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-la</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">total</span> 272</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="ex">drwx------@</span>   5 mbassan2  staff     160 26 Jun 11:35 .</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="ex">drwx------@</span> 489 mbassan2  staff   15648 26 Jun 11:41 ..</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="ex">drwxrwxr-x@</span>   4 mbassan2  staff     128  4 Apr 10:48 astronaut-data-analysis-old</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="ex">-rw-rw-r--@</span>   1 mbassan2  staff  132981  4 Apr 10:48 data.json</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="ex">-rw-rw-r--@</span>   1 mbassan2  staff    1518  4 Apr 10:48 my code v2.py</span></code></pre>
</div>
<p>Over the rest of the course, we will transform a collection of these
files into a well-structured software project that follows established
good practices in research software engineering.</p>
<p>The first thing you may notice that our software project contains
folder <code>astronout-data-analysis-old</code> which presumably tries
to keep track of older versions of the code. There is a better way to do
that using version control tool, such as Git, and we can delete this
folder so it does not cause confusion:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">rm</span> <span class="at">-r</span> astronaut-data-analysis-old</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="version-control">Version control<a class="anchor" aria-label="anchor" href="#version-control"></a>
</h2>
<hr class="half-width">
<p>Before we do any further changes to our software, we want to make
sure we can keep a history of what changes we have done since we
inherited the code from our colleague.</p>
<p>We can track changes with version control. Later on, we will store
those changes on a remote server too – both for safe-keeping and to make
them easier to share with others. In later episodes, we will also see
how version control makes it easier for multiple collaborators to work
together on the same project at the same time and combine their
contributions.</p>
<div id="version-control-refresher" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="version-control-refresher" class="callout-inner">
<h3 class="callout-title">Version control refresher</h3>
<div class="callout-content">
<div class="section level4">
<h4 id="what-is-a-version-control-system">What is a version control system?<a class="anchor" aria-label="anchor" href="#what-is-a-version-control-system"></a>
</h4>
<p>Version control systems are tools that let you track changes in files
over time in a special database that allows users to “travel through
time”, and compare earlier versions of the files with the current state.
Think of a version control system like turning on ‘Track Changes’ on
Microsoft Word/Google Docs, but for <em>any</em> files you want, and a
lot more powerful and flexible.</p>
</div>
<div class="section level4">
<h4 id="why-use-a-version-control-system">Why use a version control system?<a class="anchor" aria-label="anchor" href="#why-use-a-version-control-system"></a>
</h4>
<p>As scientists, our main motivation for using version control is
<strong>reproducibility</strong>. By tracking and storing every change
we make, we can restore our project to the state it was at any point in
time. This is incredibly useful for reproducing results from a specific
version of the code, or tracking down which changes we (or others) made
introduced bugs or changed our results.</p>
<p>The other benefit of version control is it provides us with a
<strong>history</strong> of our development. As we make each change, we
record what it was, and why we made it. This helps make our development
process transparent and auditable – which is a good scientific
practice.</p>
<p>It also makes our project more <strong>sustainable</strong> - as our
data, software and methods (knowledge) remain usable and accessible over
time (especially if made available in shared version controlled code
repositories), even after the original funding ends or team members move
on.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="git-version-control-system">Git version control system<a class="anchor" aria-label="anchor" href="#git-version-control-system"></a>
</h3>
<p><strong>Git</strong> is the most popular version control system used
by researchers worldwide, and the one we’ll be using. Git is used mostly
for managing code when developing software, but it can track
<em>any</em> files – and is particularly effective with text-based files
(e.g. source code like <code>.py</code>, <code>.c</code>,
<code>.r</code>, but also <code>.csv</code>, <code>.tex</code> and
more).</p>
<p>Git helps multiple people work on the same project (even the same
file) at the same time. Initially, we will use Git to start tracking
changes to files on our local machines; later on we will start sharing
our work on GitHub allowing other people to see and contribute to our
work.</p>
<div id="git-refresher" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="git-refresher" class="callout-inner">
<h3 class="callout-title">Git refresher</h3>
<div class="callout-content">
<p>Git stores files in <strong>repositories</strong> - directories where
changes to the files can be tracked. The diagram below shows the
different parts of a Git repository, and the most common commands used
to work with one.</p>
<figure><img src="../fig/ep02_fig05-git-lifecycle.svg" alt="Software development lifecycle with Git diagram showing Git commands and flow of data between components of a Git system, including working directory, staging area, local and remote repository" class="figure mx-auto d-block"><div class="figcaption">Software development lifecycle with Git</div>
</figure><ul>
<li>
<strong>Working directory</strong> - a local directory (including
any subdirectories) where your project files live, and where you are
currently working. It is also known as the “untracked” area of Git. Any
changes to files will be marked by Git in the working directory. Git
will only <em>save</em> changes that you explicitly tell it to. Using
<code>git add FILENAME</code> command, can you tell Git to start
tracking changes to file <code>FILENAME</code> in your working
directory.</li>
<li>
<strong>Staging area (index)</strong> - once you tell Git to start
tracking changes to files (with <code>git add FILENAME</code> command),
Git saves those changes in the staging area on your local machine. Each
subsequent change to the same file needs to be followed by another
<code>git add FILENAME</code> command to tell Git to update it in the
staging area. To see what is in your working directory and staging area
at any moment (i.e. what changes is Git tracking), you can run the
command <code>git status</code>. The staging area lets you bundle
together groups of changes to save to your repository.</li>
<li>
<strong>Local repository</strong> - stored within the
<code>.git</code> directory of your project locally, this is where Git
wraps together all your changes from the staging area and puts them
using the <code>git commit</code> command. Each commit is a new,
permanent snapshot (checkpoint, record) of your project in time, which
you can share or revert to.</li>
<li>
<strong>Remote repository</strong> - this is a version of your
project that is hosted somewhere on the Internet (e.g., on GitHub,
GitLab or somewhere else). While your project is nicely
version-controlled in your local repository, and you have snapshots of
its versions from the past, if your machine crashes you still may lose
all your work. Plus, sharing or collaborating on local work with others
requires lots of emailing back and forth. Working with a remote
repository involves ‘pushing’ your local changes to it (using
<code>git push</code>), and pulling other people’s changes back to your
local copy (using <code>git fetch</code> or <code>git pull</code>). This
keeps the two in sync in order to collaborate, with a bonus that your
work also gets backed up to another machine. Best practice when
collaborating with others on a shared repository is to always do a
<code>git pull</code> before a <code>git push</code>, to ensure you have
any latest changes before you push your own.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="start-tracking-changes-with-git">Start tracking changes with Git<a class="anchor" aria-label="anchor" href="#start-tracking-changes-with-git"></a>
</h3>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>Open up VS Code, and launch a <strong>Git Bash</strong> terminal.
Call out how your prompt looks, and make sure that Windows users are not
accidentally using PowerShell. <a href="https://carpentries-incubator.github.io/better-research-software/instructor/installation-instructions.html#visual-studio-code" class="external-link">Refer
back to the setup section on configuring VS Code if anyone needs
help.</a></p>
</div>
</div>
</div>
</div>
<p>Before we start, if you forgot to do it during setup, tell Git to use
<code>main</code> as the default branch. More modern versions of Git use
<code>main</code>, but older ones still use <code>master</code> as their
main branch. They work the same, but we want to keep things consistent
for clarity.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> init.defaultBranch main</span></code></pre>
</div>
<p>At this point, we should be located in our <code>spacewalks</code>
directory. We want to tell Git to make <code>spacewalks</code> a
repository – a directory where Git can track changes to our files. We do
that with:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> git init</span></code></pre>
</div>
<p>We can check everything is set up correctly by asking Git to tell us
the status of our project:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

Untracked files:
  (use "git add &lt;file&gt;..." to include in what will be committed)
	data.json
	my code v2.py

nothing added to commit but untracked files present (use "git add" to track)</code></pre>
</div>
<p>This tells us that Git has noticed two files in our directory, but
unlike Dropbox or OneDrive, it does not <em>automatically</em> track
them. We need to tell Git explicitly which files we want it to track.
This is not a handicap, but rather helpful, since scientific code can
have vast inputs or outputs we might not want Git to track and store
(GBs ot TBs of space telescope data) or require sensitive information we
cannot share (for example, medical records).</p>
<p>Before we commit this inital version, we should try to run it. This
is often the first thing you might do upon recieving someone’s code.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> python3 my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py</span></code></pre>
</div>
<p>You will get an error that looks something like the following:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Traceback (most recent call last):
  File "/Users/USERNAME/Downloads/spacewalks/my code v2.py", line 2, in &lt;module&gt;
    data_f = open('/home/sarah/Projects/astronaut-analysis/data.json', 'r')
FileNotFoundError: [Errno 2] No such file or directory: '/home/sarah/Projects/astronaut-analysis/data.json'</code></pre>
</div>
<p>We get this error because the paths to the data files have been hard
coded as absoulte paths for the original developer’s machine.
Hard-coding paths is not very reproducible, as it means the paths need
to be changed whenever the code is run on a new computer. Instead, we
will soon change the code to use the relative paths within the project
structure and eventually we will change the code to take in arguments
from the command line when it is run. When we commit the files, we will
note that the code is broken in our commit message. This is a best
practice if you decide to commit broken code.</p>
</div>
<div class="section level3">
<h3 id="add-files-into-repository">Add files into repository<a class="anchor" aria-label="anchor" href="#add-files-into-repository"></a>
</h3>
<p>We can tell Git to track a file using <code>git add</code>:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">$</span> git add my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">$</span> git add data.json</span></code></pre>
</div>
<p>and then check the right thing happened:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main

No commits yet

Changes to be committed:
  (use "git rm --cached &lt;file&gt;..." to unstage)
	new file:   data.json
	new file:   my code v2.py</code></pre>
</div>
<p>Git now knows that should track the changes to
<code>my code v2.py</code> and <code>data.json</code>, but it has not
‘committed’ those changes to the record yet. A commit is a snapshot of
how your tracked files have changed at a stage in time. To create a
commit that records we added two new files, we need to run one more
command:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add the initial spacewalks data and code</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="st">BREAKING CHANGE: Path to data is hard coded and needs to be fixed"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[main (root-commit) bf55eb7] Add the initial spacewalks data and code
 2 files changed, 437 insertions(+)
 create mode 100644 data.json
 create mode 100644 my code v2.py</code></pre>
</div>
<p>At this point, Git has taken everything we have told it to save with
the <code>git add</code> command and stored a copy (snapshot) of the
files in a special, hidden <code>.git</code> directory. This is called a
commit (or revision).</p>
<p>The <code>-m</code> option means message, and records a short,
descriptive, and specific comment that will help us remember later on
what we did and why. If we run <code>git commit</code> <em>without</em>
<code>-m</code> , Git will still expect a message – and will launch a
text editor so that we can write a longer one.</p>
<p>Remember, good commit messages start with a brief (&lt;50 characters)
statement about the changes made in the commit. Generally, the message
should complete the sentence “If applied, this commit will…”. If you
want to go into more detail, add a blank line between the summary line
and your additional notes. Use this additional space to explain why you
made changes and/or what their impact will be.</p>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Choose how you teach version control steps from here </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" aria-labelledby="headingInstructor2" data-bs-parent="#accordionInstructor2">
<div class="accordion-body">
<p>At this point in the lesson, you may choose to demonstrate how the
same steps of staging and committing changes can also be achieved with
the VS Code graphical interface.</p>
<figure><img src="../fig/vscode-source-control.png" alt="Screenshot of VS Code with the SOURCE CONTROL interface open in the left hand pane of the window. The interface shows one modified file staged for commit, an empty text input box where a commit meesage can be entered, and a green button labeled 'Commit &amp; Push'" class="figure mx-auto d-block"><div class="figcaption">The Source Control interface to Git in VS
Code</div>
</figure><p>Depending on your relative levels of comfort working with that
graphical interface and the command line interface to Git, you can
choose how you want to demonstrate the remaining steps in this episode
and when we use Git again elsewhere. The lesson will continue to present
version control steps with the command line interface only.</p>
</div>
</div>
</div>
</div>
<p>If we run <code>git status</code> now, we see:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
nothing to commit, working tree clean</code></pre>
</div>
<p>This tells us that everything is up to date.</p>
<div id="where-are-my-changes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="where-are-my-changes" class="callout-inner">
<h3 class="callout-title">Where are my changes?</h3>
<div class="callout-content">
<p>If we run <code>ls</code> at this point, we’ll still only see two
files – our script, and our dataset. Git saves information about our
files’ history in the special <code>.git</code> directory mentioned
earlier. This both stops our folders being cluttered with old versions,
and <em>also</em> stops us accidentally deleting them!</p>
<p>You can see the hidden Git directory using the <code>-a</code> flag
to show all files and folders:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span></span>
<span><span class="va">..</span></span>
<span><span class="va">.git</span></span></code></pre>
</div>
<p>If you delete it, your directory will stop being a repository, and it
will lose your history of changes. You never need to look into
<code>.git</code> yourself – Git adds useful commands to do that, which
are covered later on.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="make-a-change">Make a change<a class="anchor" aria-label="anchor" href="#make-a-change"></a>
</h3>
<p>You may have noticed that the script we received contain blank spaces
in filename. This meant that, when we were typing the script’s name into
the terminal, we had to add a slash before the space like this:
<code>my\ code\ v2.py</code>. Using a backslash in this way is called
“escaping”. It lets the terminal know to treat the space as part of the
filename, and not a separate argument. It is a bit inconvenient and can
cause problems if you forget, so best practise is to avoid spaces in
filenames. The simplest fix is to replace the spaces with underscores
<code>_</code> instead.</p>
<p>To rename the files using git you can use the <code>git mv</code>
command:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">$</span> git mv my<span class="dt">\ </span>code<span class="dt">\ </span>v2.py my_code_v2.py</span></code></pre>
</div>
<p>If you run <code>git status</code> again, you’ll see Git has noticed
the change in the filename. Note, <code>git mv</code> handles the name
change directly, instead of seeing a deleted file and a new file as
would be the case if we’d used <code>mv</code> and then
<code>git add</code>. It also stages the changes to be committed.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">$</span> git status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    my code v2.py -&gt; my_code_v2.py</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"removed spaces from filename"</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="rename-our-data-and-output-files">Rename our data and output files<a class="anchor" aria-label="anchor" href="#rename-our-data-and-output-files"></a>
</h3>
<p>Now that we know how to rename files in Git, we can use it to make
our files and code a bit easier to understand.</p>
<p>We may want to:</p>
<ol style="list-style-type: decimal">
<li>Give our script and input data file more meaningful names, e.g
<code>eva_data_analysis.py</code> and <code>eva-data.json</code>. This
change also uses removes version tracking from the script name as we are
using Git for version control any more as Git will keep track of that
for us.</li>
<li>Choose informative file names for our output data file
(e.g. <code>eva-data.csv</code>) and plot
(<code>cumulative_eva_graph.png</code>).</li>
<li>Use relative paths (e.g. <code>./eva-data.json</code>) instead of
absolute paths
(e.g. <code>home/sarah/Projects/astronaut-analysis/data.csv</code>) to
the files (which were hardcoded to the path on our colleagues machine
and would not work on ours).</li>
<li>Update the Python script with these changes.</li>
</ol>
<div id="update-the-filenames-in-the-repo" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="update-the-filenames-in-the-repo" class="callout-inner">
<h3 class="callout-title">Update the filenames in the repo</h3>
<div class="callout-content">
<p>Try to make these changes yourself.</p>
<ol style="list-style-type: decimal">
<li>Give our Python script and input data file informative names -
<code>eva_data_analysis.py</code> and <code>eva-data.json</code>,
respectively.</li>
<li>Update other file names and paths used in the script - output CSV
data (<code>eva-data.csv</code> to match the new input data name) and
plot(<code>cumulative_eva_graph.png</code>).</li>
<li>Stage and commit these changes in the Git repository.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Firstly, let’s update the file names in our Python script from VS
Code:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>data_f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>data_t <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>,<span class="st">'w'</span>)</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span></code></pre>
</div>
<p>Next, we need to rename the files on the file system using Git:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">git</span> mv data.json eva-data.json</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="fu">git</span> mv my_code_v2.py eva_data_analysis.py</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="fu">git</span> add eva_data_analysis.py</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="fu">git</span> status</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>On branch main
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    data.json -&gt; eva-data.json
	renamed:    my_code_v2.py -&gt; eva_data_analysis.py</code></pre>
</div>
<p>Finally, we can commit our changes:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Implement informative file names"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="interacting-with-a-remote-git-server">Interacting with a remote Git server<a class="anchor" aria-label="anchor" href="#interacting-with-a-remote-git-server"></a>
</h2>
<hr class="half-width">
<p>Git is distributed version control system and lets us synchronise
work between multiple copies of the same repository - which may not be
on your machine (called <strong>remote repositories</strong>). So far,
we have used a <strong>local repository</strong> on our machine and,
even though we have been incrementally saving our work in a way that is
recoverable, if we lost our machine then we would lose all our code
along with it,</p>
<p>Fortunately, we can easily upload our <strong>local
repository</strong>, with all our code and the history of our
development, to a remote server so that it can be backed-up and
recovered in future.</p>
<figure><img src="../fig/git-distributed.png" alt="Two developers can use Git in combination with a remote repository, usually accessed via the internet. By pushing and pulling changes to and from the remote repository, they are each able to synchronise their local copy of the project with the changes the other developer has committed." class="figure mx-auto d-block"><div class="figcaption">Git - distributed version control system, image
from W3Docs (freely available)</div>
</figure><p><a href="https://github.com/" class="external-link">GitHub</a> is an online software
development platform that can act as a central remote server. It uses
Git, and provides facilities for storing, tracking, and collaborating on
software projects. Other Git hosting services are available, such as <a href="https://gitlab.com" class="external-link">GitLab</a> and <a href="https://bitbucket.org" class="external-link">Bitbucket</a>.</p>
<p>Putting our projects on GitHub helps protect them against deletion,
and also makes it easy to collaborate and share them. Our collaborators
can access the project, download their own copy, and even contribute
work back to us.</p>
<p>Let’s push our <strong>local repository</strong> to <a href="https://github.com" class="external-link">GitHub</a> and share it publicly.</p>
<ol style="list-style-type: decimal">
<li><p>In your browser, navigate to <a href="https://github.com" class="external-link uri">https://github.com</a> and sign into your account.</p></li>
<li>
<p>In the top right hand corner of the screen, there is a menu
labelled “+” with a dropdown. Click the dropdown and select “New
repository” from the options:</p>
<figure><img src="../fig/ep02_fig01-create_new_repo.png" class="image-with-shadow figure mx-auto d-block" alt="Selecting the 'New repository' option from GitHub's dropdown menu labelled '+'"><div class="figcaption"><em>Creating a new GitHub repository</em></div>
</figure>
</li>
<li>
<p>You will be presented with some options to fill in or select
while creating your repository. In the “Repository Name” field, type
“spacewalks”. This is the name of your project and matches the name of
your local folder.</p>
<figure><img src="../fig/ep02_fig02-repository_name.png" class="image-with-shadow figure mx-auto d-block" alt="Setting the name of the repository on GitHub through the 'Repository Name' text field"><div class="figcaption"><em>Naming the GitHub repository</em></div>
</figure><p>Ensure the visibility of the repository is “Public” and leave all
other options blank. Since this repository will be connected to a local
repository, it needs to be empty which is why we chose not to initialise
with a README or add a license or <code>.gitignore</code> file. Click
“Create repository” at the bottom of the page:</p>
<figure><img src="../fig/ep02_fig03-create_repository.png" class="image-with-shadow figure mx-auto d-block" alt="Completing the creation of the GitHub repository by clicking on the 'Create repository' button"><div class="figcaption"><em>Complete GitHub repository
creation</em></div>
</figure>
</li>
<li>
<p>Now we have a <strong>remote repository</strong> on GitHub’s
servers, you need to send it the files and history from your
<strong>local repository</strong>. GitHub provides some instructions on
how to do that for different scenarios. Change the toggle on the right
side from “HTTPS” to “SSH”, then look at the heading “…or push an
existing repository from the command line”. You should see instructions
that look like this:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">git</span> remote add origin git@github.com/<span class="op">&lt;</span>YOUR_GITHUB_HANDLE<span class="op">&gt;</span>/spacewalks.git</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre>
</div>
<p><strong>It is very important you make sure you switch from “HTTPS” to
“SSH”.</strong> In the setup, we configured our GitHub account and our
local machine for SSH. If you select HTTPS, you will not be able to
upload your files.</p>
<p>You can copy these commands using the button that looks like two
overlapping squares to the right-hand side of the commands. Paste them
into your terminal and run them.</p>
</li>
</ol>
<figure><img src="../fig/ep02_fig04-copy_commands.png" class="image-with-shadow figure mx-auto d-block" alt="Copying the commands to sync the local and remote repositories from the remote repository's home page on GitHub"><div class="figcaption"><em>Copy the commands to sync the local and
remote repositories</em></div>
</figure><ol start="5" style="list-style-type: decimal">
<li>If you refresh your browser window, you should now see the two files
<code>eva_data_analysis.py</code> and <code>eva-data.json</code> visible
in the GitHub repository, matching what you have locally on your
machine.</li>
</ol>
<p>If you were wondering about what those commands did, here is the
explanation.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">git</span> remote add origin git@github.com/<span class="op">&lt;</span>YOUR_GITHUB_HANDLE<span class="op">&gt;</span>/spacewalks.git</span></code></pre>
</div>
<p>This command tells Git to create a <code>remote</code> called
“origin” and link it to the URL of your GitHub repository. A
<code>remote</code> is a version control concept where two (or more)
repositories are connected to each other, in such a way that they can be
kept in sync by exchanging commits. “origin” is a name used to refer to
the remote repository. It could be called anything, but “origin” is a
common convention for Git since it shows which is considered the “source
of truth”. This is particularly useful when many people are
collaborating on the same repository.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span></code></pre>
</div>
<p><code>git branch</code> is a command used to manage branches. We’ll
discuss branches later on in the course. We saw this command during
setup and earlier in this episode - it ensures the branch we are working
on is called “main”. This will be the default branch of the project for
everyone working on it.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code></pre>
</div>
<p>The <code>git push</code> command is used to update a remote
repository with changes from your local repository. This command tells
Git to update the “main” branch on the “origin” remote. The
<code>-u</code> flag (short for <code>--set-upstream</code>) sets the
‘tracking reference’ for the current branch, so that in future
<code>git push</code> will default to sending to
<code>origin main</code>.</p>
</section><section><h2 class="section-heading" id="software-project-in-github">Software project in GitHub<a class="anchor" aria-label="anchor" href="#software-project-in-github"></a>
</h2>
<hr class="half-width">
<p>We now have our software project in GitHub and have linked it to our
local working copy. We are ready to start more work on software
development and publishing and backing up that work on GitHub. Let’s
briefly explore the GitHub interface to our project.</p>
<figure><img src="../fig/github-project-main-tabs.png" class="image-with-shadow figure mx-auto d-block" alt="Home page of a GitHub repository showing all the top-level tabs, including Code, Issues, Pull requests, Actions, projects, Wiki, Insights and Settings"><div class="figcaption"><em>GitHub repository interface</em></div>
</figure><p>In a GitHub software project, the tabs you see at the top of a
repository page help organise different aspects of the project. Here’s a
brief explanation of them:</p>
<ul>
<li>
<strong>Code</strong> - shows the source code, folders, and files in
the repository. This is where the main development work is done.</li>
<li>
<strong>Issues</strong> - used to track bugs, tasks, feature
requests, or any work that needs to be done.</li>
<li>
<strong>Pull requests</strong> - where contributors submit changes
to the code. These are reviewed and discussed before being merged.</li>
<li>
<strong>Actions</strong> - automated workflows (like tests or
deployments) that run on the project using GitHub Actions.</li>
<li>
<strong>Projects</strong> - offers a Kanban-style board to manage
tasks and plan work (e.g., using cards and columns).</li>
<li>
<strong>Wiki</strong> – lets you create structured documentation for
your project.</li>
<li>
<strong>Security</strong> – helps identify, manage, and fix
vulnerabilities in your code and dependencies.</li>
<li>
<strong>Insights</strong> – provides analytics on project activity,
contributions, and community health.</li>
<li>
<strong>Settings</strong> - where you configure how the repository
behaves and how others can interact with it.</li>
</ul>
<p>These tabs help manage collaboration, development, and maintenance of
the project. We will cover some of them in more detail as part of this
course. You may not see all of these tabs depending on your access level
to the repository and the configuration settings.</p>
<div class="section level3">
<h3 id="keeping-track-of-issues-and-planned-work-in-github">Keeping track of issues and planned work in GitHub<a class="anchor" aria-label="anchor" href="#keeping-track-of-issues-and-planned-work-in-github"></a>
</h3>
<p>The one tab that we want to start using early on is
<strong>Issues</strong>. This is where you report issues and bugs, track
tasks, feature requests and what needs to be done and what problems
exist, and capture general discussions related to the project.</p>
<p>Each issue acts like a conversation thread, where contributors can
describe a problem or idea, discuss it, attach code snippets or images,
and reference commits or pull requests or mention other team members. It
allows contributors to discuss and refine ideas before making changes,
and helps prioritise work and organise releases. The Issues tab serves
as the project’s task board and communication hub, making development
more organised, transparent and inclusive.</p>
<p>It is important to start listing things that need doing on the
project early on so you do not forget about them. The Issues tab is a
good place to create that list and keep it together with the code.</p>
<p>In one of the the previous exercises, we have identified a number of
things that could be improved with our software. Let’s add one of them
as an issue now (we will continue to do this throughout the course -
this is good practice).</p>
<p>For example, we identified that variables (e.g. <code>w</code>,
<code>t</code>, <code>tt</code>, <code>ttt</code>) should have more
descriptive and meaningful names. To add this as an issue in GitHub, go
to the <strong>Issues</strong> tab in your project’s GitHub page, and
click the “New issue” green button. In the form that appears, we add a
descriptive title for this new issue (e.g. “improve variable names”) and
write more details about the issue (e.g. “rename variables
<code>w</code>, <code>t</code>, <code>tt</code>, and <code>ttt</code> to
be more descriptive”).</p>
<figure><img src="../fig/github-add-issue.png" class="image-with-shadow figure mx-auto d-block" alt="Form for adding an issue on a GitHub repository showing issue title and issue description fields"><div class="figcaption"><em>Adding an issue in GitHub</em></div>
</figure><p>Later on in the course, we will learn how to comment, reference, add
more details and close issues.</p>
</div>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>We have created a new software project and used version control
system Git to track changes to it. We can now look back at our work,
compare different code versions, and even recover past states. We have
also published our software to a remote repository located on GitHub,
where it is both secure and shareable.</p>
<p>These skills are critical to reproducible and sustainable science.
Software <em>is</em> science, and being able to share the specific
version of code used in a paper is required for reproducibility. But we,
as researchers, also benefit from having a clear, self-documented record
of what we did, when and why. It makes it much easier to track down and
fix our bugs, return to work on projects we took a break from, and even
for other people to pick up our work.</p>
<p>Before we start making changes to the code, we have to set up a
development environment with software dependencies for our project to
ensure this metadata about our project is recorded and shared with
anyone wishing to download, run or extend our software (and this
includes ourselves on a different machine or operating system).</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/03-reproducible-dev-environment" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/03-reproducible-dev-environment</a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://swcarpentry.github.io/git-novice" class="external-link">Software
Carpentry’s Git Novice lesson</a></li>
<li><a href="https://the-turing-way.netlify.app/reproducible-research/vcs" class="external-link">The
Turing Way’s “Guide to Version Control”</a></li>
<li><a href="https://www.pluralsight.com/courses/how-git-works" class="external-link">“How Git
Works” course on Pluralsight</a></li>
<li><a href="https://cbea.ms/git-commit/" class="external-link">How to Write a Good Commit
Message</a></li>
<li><a href="https://wiki.openstack.org/wiki/GitCommitMessages" class="external-link">Git
Commit Good Practice</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Version control systems are software that tracks and manages changes
to a project over time</li>
<li>Using version control aids reproducibility since the exact state of
the software that produced an output can be recovered</li>
<li>A commit represents the smallest unit of change to a project</li>
<li>Commit messages describe what each commit contains and should be
descriptive</li>
<li>GitHub is a hosting service for sharing and collaborating on
software</li>
<li>Using version control is one of the first steps to creating a
software project from a bunch of scripts - by investing in these
practices early, researchers can create software that supports their
work more effectively and enables others to build upon it with
confidence.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-reproducible-dev-environment"><p>Content from <a href="03-reproducible-dev-environment.html">Reproducible software environments</a></p>
<hr>
<p>Last updated on 2025-08-27 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/03-reproducible-dev-environment.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 30 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are virtual environments in software development and why use
them?</li>
<li>How can we manage Python virtual coding environments and external
(third-party) libraries on our machines?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Set up a Python virtual coding environment for a software project
using <code>venv</code> and <code>pip</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>So far we have created a local Git repository to track changes in our
software project and pushed it to GitHub to enable others to see and
contribute to it. We now want to start developing the code further.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/03-reproducible-dev-environment" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/03-reproducible-dev-environment</a></p>
</div>
</div>
</div>
</div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<p>Some learners may encounter various issues when creating and managing
virtual development environments or configuring the Python interpreter
path, depending on their specific system setup.</p>
<p>To assist with troubleshooting during workshops, we have compiled a
list of common issues that instructors have observed in the past.</p>
<ul>
<li>learners sometimes forget to activate the virtual environment -
instructors should remind the learners about this at the start of each
episode and also check for this during episodes, e.g. each time a new
command line terminal window is started.</li>
<li>adding a Python installation to the beginning of the environment
variable PATH, causes it to override Python from the virtual environment
- always check for this with <code>which python3</code> and
<code>python3 --version</code>.</li>
<li>some learners have other environment variables set that can
influence the Python interpreter and modules being loaded and used -
e.g. <code>PYTHONHOME</code> (changes the location of the standard
Python libraries), <code>PYTHONPATH</code> (augments the default search
path for Python module files) or <code>PYTHONSTARTUP</code> (points to a
Python script that is run before starting Python interactive mode for
various enhancements like preloading modules, setting colors, etc.).
Make sure they are unset before activating the environment,
e.g. with:</li>
</ul>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> unset PYTHONHOME PYTHONPATH PYTHONSTARTUP</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> venv ./venv_spacewalks</span></code></pre>
</div>
<p>If you run into problems not mentioned here, please open an <a href="https://github.com/carpentries-incubator/better-research-software/issues/" class="external-link">issue
in the lesson repository</a> so we can track them and update the lesson
material accordingly.</p>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="software-dependencies">Software dependencies<a class="anchor" aria-label="anchor" href="#software-dependencies"></a>
</h2>
<hr class="half-width">
<p>If we have a look at our script, we may notice a few
<code>import</code> lines such as: <code>import json</code>,
<code>import csv</code>, <code>import datetime as dt</code> and
<code>import matplotlib.pyplot as plt</code> throughout the code. This
means that our code depends on or requires several <strong>external
libraries</strong> (also called third-party packages or
<strong>dependencies</strong>) to function - namely <code>json</code>,
<code>csv</code>, <code>datetime</code> and <code>matplotlib</code>.</p>
<p>Python applications often use external libraries that do not come as
part of the standard Python distribution. This means that you will have
to use a <strong>package manager</strong> tool to install them on your
system. Applications will also sometimes need a specific version of an
external library (e.g. because they were written to work with feature,
class, or function that may have been updated in more recent versions),
or a specific version of Python interpreter. This means that each Python
application you work with may require a different setup and a set of
dependencies so it is useful to be able to keep these configurations
separate to avoid confusion between projects. The solution for this
problem is to create a self-contained <strong>virtual
environment</strong> per project, which contains a particular version of
Python installation plus a number of additional external libraries.</p>
</section><section><h2 class="section-heading" id="what-are-virtual-software-environments">What are virtual software environments?<a class="anchor" aria-label="anchor" href="#what-are-virtual-software-environments"></a>
</h2>
<hr class="half-width">
<p>So what exactly are virtual software environments, and why use
them?</p>
<p>A Python virtual environment helps us create an <strong>isolated
working copy</strong> of a software project that uses a specific version
of Python interpreter together with specific versions of a number of
external libraries installed into that virtual environment. Python
virtual environments are implemented as directories with a particular
structure within software projects, containing links to specified
dependencies allowing isolation from other software projects on your
machine that may require different versions of Python or external
libraries.</p>
<p>It is recommended to create a separate virtual environment for each
project. Then you do not have to worry about changes to the environment
of the current project you are working on affecting other projects - you
can use different Python versions and different versions of the same
third party dependency by different projects on your machine
independently from one another.</p>
<p>We can visualise the use of virtual environments for different Python
projects on the same machine as follows:</p>
<figure><img src="../fig/virtual-env.png" alt="A single system might contain multiple virtual environments, each containing a different version of Python and the set of third-party libraries it needs (dependencies) e.g. NumPy, Pandas or Matplotlib. Each environment contains its own complete copy of the required version of each dependency." class="figure mx-auto d-block"><div class="figcaption">Diagram to depict different Python environments
containing different packages on the same machine</div>
</figure><p>Another big motivator for using virtual environments is that they
make sharing your code with others much easier - as we will see shortly
you can record your virtual environment in a special file and share it
with your collaborators who can then recreate the same development
environment on their machines.</p>
<p>You do not have to worry too much about specific versions of external
libraries that your project depends on most of the time. Virtual
environments also enable you to always use the latest available version
without specifying it explicitly. They also enable you to use a specific
older version of a package for your project, should you need to.</p>
<div id="truly-reproducible-environments-are-difficult-to-attain" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="truly-reproducible-environments-are-difficult-to-attain" class="callout-inner">
<h3 class="callout-title">Truly reproducible environments are difficult
to attain</h3>
<div class="callout-content">
<p>Creating and managing isolated environments for each of your software
projects and sharing descriptions of those environments alongside the
relevant code is a great way to make your software and analyses much
more reproducible. However, “true” computational reproducibility is very
difficult to achieve. For example, the tools we will use in this lesson
only track the dependencies of our software, remaining unanware of other
aspects of the software’s environment such as the operating system and
hardware of the system it is running on. These properties of the
environment can influence the running of the software and the results it
produces and should be accounted for if a workflow is to be truly
reproducible.</p>
<p>Although there is more that we can do to maximise the reproducibility
of our software/workflows, the steps described in this episode are an
excellent place to start. We should not let the difficulty of attaining
“perfect” reproducibility prevent us from implementing “good enough”
practices that make our lives easier and are <em>much</em> better than
doing nothing.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="managing-virtual-environments">Managing virtual environments<a class="anchor" aria-label="anchor" href="#managing-virtual-environments"></a>
</h2>
<hr class="half-width">
<p>There are several command line tools used for managing Python virtual
environments - we will use <code>venv</code>, available by default from
the standard <code>Python</code> distribution since
<code>Python 3.3</code>.</p>
<p>Part of managing your (virtual) working environment involves
installing, updating and removing external packages on your system. The
Python package manager tool <code>pip</code> is most commonly used for
this - it interacts and obtains the packages from the central repository
called <a href="https://pypi.org/" class="external-link">Python Package Index (PyPI)</a>.</p>
<p>So, we will use <code>venv</code> and <code>pip</code> in combination
to help us create and share our virtual development environments.</p>
<div class="section level3">
<h3 id="creating-virtual-environments">Creating virtual environments<a class="anchor" aria-label="anchor" href="#creating-virtual-environments"></a>
</h3>
<p>Creating a virtual environment with <code>venv</code> is done by
executing the following command:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> venv /path/to/new/virtual/environment</span></code></pre>
</div>
<p>where <code>/path/to/new/virtual/environment</code> is a path to a
directory where you want to place it - conventionally within your
software project so they are co-located. This will create the target
directory for the virtual environment.</p>
<p>For our project let’s create a virtual environment called
“venv_spacewalks” from our project’s root directory.</p>
<p>Firstly, ensure you are located within the project’s root
directory:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">$</span> cd /path/to/spacewalks</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> venv venv_spacewalks</span></code></pre>
</div>
<p>If you list the contents of the newly created directory
“venv_spacewalks”, on a Mac or Linux system (slightly different on
Windows as explained below) you should see something like:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-l</span> venv_spacewalks</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>total 8
drwxr-xr-x  12 alex  staff  384  5 Oct 11:47 bin
drwxr-xr-x   2 alex  staff   64  5 Oct 11:47 include
drwxr-xr-x   3 alex  staff   96  5 Oct 11:47 lib
-rw-r--r--   1 alex  staff   90  5 Oct 11:47 pyvenv.cfg</code></pre>
</div>
<p>So, running the <code>python3 -m venv venv_spacewalks</code> command
created the target directory called “venv_spacewalks” containing:</p>
<ul>
<li>
<code>pyvenv.cfg</code> configuration file with a home key pointing
to the Python installation from which the command was run,</li>
<li>
<code>bin</code> subdirectory (called <code>Scripts</code> on
Windows) containing a symlink of the Python interpreter binary used to
create the environment and the standard Python library,</li>
<li>
<code>lib/pythonX.Y/site-packages</code> subdirectory (called
<code>Lib\site-packages</code> on Windows) to contain its own
independent set of installed Python packages isolated from other
projects, and</li>
<li>various other configuration and supporting files and
subdirectories.</li>
</ul>
<p>Once you’ve created a virtual environment, you will need to activate
it.</p>
<p>On Mac or Linux, it is done as:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
<p>On Windows, recall that we have <code>Scripts</code> directory
instead of <code>bin</code> and activating a virtual environment is done
as:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
<p>Activating the virtual environment will change your command line’s
prompt to show what virtual environment you are currently using
(indicated by its name in round brackets at the start of the prompt),
and modify the environment so that running Python will get you the
particular version of Python configured in your virtual environment.</p>
<p>You can verify you are using your virtual environment’s version of
Python by checking the path using the command <code>which</code>:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> which python3</span></code></pre>
</div>
<div id="environment-variables" class="callout caution">
<div class="callout-square">
<i class="callout-icon" data-feather="alert-triangle"></i>
</div>
<span class="callout-header">Caution</span>
<div id="environment-variables" class="callout-inner">
<h3 class="callout-title">Environment Variables</h3>
<div class="callout-content">
<p>Some learners encounter problems at this stage, where system-level
packages are still used by Python instead of the versions installed into
the virtual environment. Previous participants solved the problem by
unsetting the <code>PYTHONHOME</code>, <code>PYTHONPATH</code> and
<code>PYTHONSTARTUP</code> environment variables before creating the
virtual environment for the project:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">$</span> unset PYTHONHOME PYTHONPATH PYTHONSTARTUP</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">$</span> python3 <span class="at">-m</span> venv ./venv_spacewalks</span></code></pre>
</div>
</div>
</div>
</div>
<p>When you’re done working on your project, you can exit the
environment with:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> deactivate</span></code></pre>
</div>
<p>If you’ve just done the <code>deactivate</code>, ensure you
reactivate the environment ready for the next part:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
<p>Note that, since our software project is being tracked by Git, the
newly created virtual environment will show up in version control - we
will see how to handle it using Git in one of the subsequent
episodes.</p>
</div>
<div class="section level3">
<h3 id="installing-external-packages">Installing external packages<a class="anchor" aria-label="anchor" href="#installing-external-packages"></a>
</h3>
<p>We noticed earlier that our code depends on four <strong>external
packages/libraries</strong> - <code>json</code>, <code>csv</code>,
<code>datetime</code> and <code>matplotlib</code>. As of Python 3.5,
Python comes with in-built JSON and CSV libraries - this means there is
no need to install these additional packages (if you are using a fairly
recent version of Python), but you still need to import them in any
script that uses them. However, we still need to install packages
<code>datetime</code> and <code>matplotlib</code> as they do not come as
standard with Python distribution.</p>
<p>To install the latest version of packages <code>datetime</code> and
<code>matplotlib</code> with <code>pip</code> you use pip’s
<code>install</code> command and specify the package’s name, e.g.:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install datetime</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install matplotlib</span></code></pre>
</div>
<p>or like this to install multiple packages at once for short:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install datetime matplotlib</span></code></pre>
</div>
<p>The above commands have installed packages <code>datetime</code> and
<code>matplotlib</code> in our currently active
<code>venv_spacewalks</code> environment and will not affect any other
Python projects we may have on our machines.</p>
<p>If you run the <code>python3 -m pip install</code> command on a
package that is already installed, <code>pip</code> will notice this and
do nothing.</p>
<p>To install a specific version of a Python package give the package
name followed by <code>==</code> and the version number,
e.g. <code>python3 -m pip install matplotlib==3.5.3</code>.</p>
<p>To specify a minimum version of a Python package, you can do
<code>python3 -m pip install matplotlib&gt;=3.5.1</code>.</p>
<p>To upgrade a package to the latest version,
e.g. <code>python3 -m pip install --upgrade matplotlib</code>.</p>
<p>To display information about a particular installed package do:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip show matplotlib</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Name: matplotlib
Version: 3.9.0
Summary: Python plotting package
Home-page:
Author: John D. Hunter, Michael Droettboom
Author-email: Unknown &lt;matplotlib-users@python.org&gt;
License: License agreement for matplotlib versions 1.3.0 and later
=========================================================
...
Location: /opt/homebrew/lib/python3.11/site-packages
Requires: contourpy, cycler, fonttools, kiwisolver, numpy, packaging, pillow, pyparsing, python-dateutil
Required-by:</code></pre>
</div>
<p>To list all packages installed with <code>pip</code> (in your current
virtual environment):</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Package         Version
--------------- -----------
contourpy       1.2.1
cycler          0.12.1
DateTime        5.5
fonttools       4.53.1
kiwisolver      1.4.5
matplotlib      3.9.2
numpy           2.0.1
packaging       24.1
pillow          10.4.0
pip             23.3.1
pyparsing       3.1.2
python-dateutil 2.9.0.post0
pytz            2024.1
setuptools      69.0.2
six             1.16.0
zope.interface  7.0.1</code></pre>
</div>
<p>To uninstall a package installed in the virtual environment do:
<code>python3 -m pip uninstall &lt;package-name&gt;</code>. You can also
supply a list of packages to uninstall at the same time.</p>
</div>
<div class="section level3">
<h3 id="sharing-virtual-environments">Sharing virtual environments<a class="anchor" aria-label="anchor" href="#sharing-virtual-environments"></a>
</h3>
<p>You are collaborating on a project with a team so, naturally, you
will want to share your environment with your collaborators so they can
easily ‘clone’ your software project with all of its dependencies and
everyone can replicate equivalent virtual environments on their
machines. <code>pip</code> has a handy way of exporting, saving and
sharing virtual environments.</p>
<p>To export your active environment - use
<code>python3 -m pip freeze</code> command to produce a list of packages
installed in the virtual environment. A common convention is to put this
list in a <code>requirements.txt</code> file in your project’s root
directory:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> cat requirements.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>contourpy==1.2.1
cycler==0.12.1
DateTime==5.5
fonttools==4.53.1
kiwisolver==1.4.5
matplotlib==3.9.2
numpy==2.0.1
packaging==24.1
pillow==10.4.0
pyparsing==3.1.2
python-dateutil==2.9.0.post0
pytz==2024.1
six==1.16.0
zope.interface==7.0.1</code></pre>
</div>
<p>The first of the above commands will create a
<code>requirements.txt</code> file in your current directory. Yours may
look a little different, depending on the version of the packages you
have installed, as well as any differences in the packages that they
themselves use.</p>
<p>The <code>requirements.txt</code> file can then be committed to a
version control system (we will see how to do this using Git in a
moment) and get shipped as part of your software and shared with
collaborators and/or users.</p>
<p>Note that you only need to share the small
<code>requirements.txt</code> file with your collaborators - and not the
entire <code>venv_spacewalks</code> directory with packages contained in
your virtual environment. We need to tell Git to ignore that directory,
so it is not tracked and shared - we do this by creating a file
<code>.gitignore</code> in the root directory of our project and adding
a line <code>venv_spacewalks</code> to it.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> echo <span class="st">"venv_spacewalks/"</span> <span class="op">&gt;&gt;</span> .gitignore</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add .gitignore</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"ignoring venv folder"</span></span></code></pre>
</div>
<p>Let’s now put <code>requirements.txt</code> under version control and
share it along with our code.</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Initial commit of requirements.txt."</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
<p>Your collaborators or users of your software can now download your
software’s source code and replicate the same virtual software
environment for running your code on their machines using
<code>requirements.txt</code> to install all the necessary depending
packages.</p>
<p>To recreate a virtual environment from <code>requirements.txt</code>,
from the project root one can do the following:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install <span class="at">-r</span> requirements.txt</span></code></pre>
</div>
<div id="another-challenge-in-long-term-reproducibility" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="another-challenge-in-long-term-reproducibility" class="callout-inner">
<h3 class="callout-title">Another challenge in (long-term)
reproducibility</h3>
<div class="callout-content">
<p>For people (including your future self) to be able to reproduce
software environments described in this way, the listed dependencies
need to remain available to download and possible to install on the
user’s system. These are reasonably safe assumptions for widely-used,
actively maintained tools on commonly-used operating systems in the
short- to medium-term. However, it becomes less likely that we will be
able to recreate such environments as system architectures evolve over
time and maintainers stop supporting older versions of software. To
achieve this kind of long-term reproducibility, you will need to explore
options to provide the actual environment – with dependencies already
included – alongside your software e.g. via a <a href="https://carpentries-incubator.github.io/docker-introduction/" class="external-link">containerised
environment</a>.</p>
</div>
</div>
</div>
<p>As your project grows - you may need to update your environment for a
variety of reasons, e.g.:</p>
<ul>
<li>one of your project’s dependencies has just released a new version
(dependency version number update),</li>
<li>you need an additional package for data analysis (adding a new
dependency), or</li>
<li>you have found a better package and no longer need the older package
(adding a new and removing an old dependency).</li>
</ul>
<p>What you need to do in this case (apart from installing the new and
removing the packages that are no longer needed from your virtual
environment) is update the contents of the <code>requirements.txt</code>
file accordingly by re-issuing <code>pip freeze</code> command and
propagate the updated <code>requirements.txt</code> file to your
collaborators via your code sharing platform.</p>
<div id="environment-management-can-be-troublesome" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="environment-management-can-be-troublesome" class="callout-inner">
<h3 class="callout-title">Environment management can be troublesome</h3>
<div class="callout-content">
<p>Software environment management is a difficult thing to get right,
which is one reason why <a href="https://xkcd.com/1987" class="external-link">the Python
community has come up with so many different ways of doing it over the
years</a>. (That webcomic is several years old at the time of writing
and the Python environment management ecosystem has only become
<em>more</em> complicated since.) Unfortunately, even if you try to
follow good practices and keep your environments isolated it is possible
– perhaps even likely – that you will face difficulties with installing
and updating dependencies on your projects in the coming years. Such
issues are particularly likely to appear when you upgrade your computer
hardware, operating system, and/or interpreter/compiler. As before, this
is not a reason to avoid managing your software environments altogether
– or to avoid upgrading your hardware, operating system, etc! If you
have descriptions of your environments it will always be easier to
reproduce them and keep working with your software than if you need to
start from scratch. Furthermore, your expertise will develop as you get
more practice with managing your software environments, which will equip
you well to troubleshoot problems if and when they arise.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="running-the-code-and-reproducing-results">Running the code and reproducing results<a class="anchor" aria-label="anchor" href="#running-the-code-and-reproducing-results"></a>
</h2>
<hr class="half-width">
<p>We are now setup to run our code from the newly created virtual
environment:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py</span></code></pre>
</div>
<p>You should get a pop up window with a graph. However, some (but not
all) Windows users will not. You might instead see an error like:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="ex">Traceback</span> <span class="er">(</span><span class="ex">most</span> recent call last<span class="kw">)</span><span class="bu">:</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"C:\Users\Toaster\Desktop\spacewalks\eva_data_analysis.py"</span>, line 30, in <span class="op">&lt;</span>module<span class="op">&gt;</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>    <span class="ex">w.writerow</span><span class="er">(</span><span class="va">data</span><span class="op">[</span>j<span class="op">]</span><span class="fu">.values()</span><span class="kw">)</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>  <span class="ex">File</span> <span class="st">"C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\Lib\encodings\cp1252.py"</span>, line 19, in encode</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>    <span class="cf">return</span> <span class="ex">codecs.charmap_encode</span><span class="er">(</span><span class="ex">input,self.errors,encoding_table</span><span class="kw">)</span><span class="ex">[0]</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>           <span class="ex">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="ex">UnicodeEncodeError:</span> <span class="st">'charmap'</span> codec can<span class="st">'t encode character '</span><span class="dt">\x</span>92<span class="st">' in position 101: character maps to &lt;undefined&gt;</span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="st">(spacewalks) (spacewalks)</span></span></code></pre>
</div>
<p>This is not what we were expecting! The problem is <em>character
encoding</em>. ‘Standard’ Latin characters are encoded using ASCII, but
the expanded Unicode character set covers many more. In this case, the
data contains Unicode characters that are represented in the ASCII input
file with shortcuts (<code>Â</code> as <code>\u00c2</code> and
<code>’</code> as <code>\u0092</code>).</p>
<p>When we read the file, Python converts those into the Unicode
characters. Then by default Windows tries to write out
<code>eva-data.csv</code> using UTF-7. This saves space compared to the
standard UTF-8, but it doesn’t include all of the characters. It
automatically converts <code>\u0092</code> into the shorter
<code>\x92</code>, then discovers that doesn’t exist in UTF-7.</p>
<p>The fact that different systems have different defaults, which can
change or even break your code’s behaviour, shows why it is so important
to make our code’s requirements explicit!</p>
<p>We can fix this by explicitly telling Python what encoding to use
when reading and writing our files (and you should do this even if you
have not had the encoding error when running the code - it is good
practice and otherwise it may catch you the next time you run the code
on a different platform):</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>...</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>data_f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'ascii'</span>)</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>data_t <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>,<span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>...</span></code></pre>
</div>
<p>Remember to commit these latest changes.</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Specify data encoding"</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
<p>Do not forget to commit any files that have been changed.</p>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>We have our code running in its own virtual environment.</p>
<p>Virtual development environments provide significant benefits for
software development by allowing developers to isolate project
dependencies and configurations, preventing conflicts between projects.
They support reproducibility, making it much easier to recreate the same
setup across different machines or for other team members, which helps
with collaboration and consistency. They allow us to share or deploy our
environment setup easily, often as a single configuration file. They
promote a “cleaner” way of working and avoid polluting the global system
environment with project-specific tools and packages.</p>
<p>In the next episode we will inspect our software in more detail and
see how we can improve it further.</p>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/04-code-readability" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/04-code-readability</a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://docs.python.org/3/tutorial/venv.html" class="external-link">Official
Python Documentation: Virtual Environments and Packages</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Virtual environments keep Python versions and dependencies required
by different projects separate.</li>
<li>A Python virtual environment is itself a directory structure.</li>
<li>You can use <code>venv</code> to create and manage Python virtual
environments, and <code>pip</code> to install and manage external
dependencies your code relies on.</li>
<li>By convention, you can save and export your Python virtual
environment in <code>requirements.txt</code> file in your project’s root
directory, which can then be shared with collaborators/users and used to
replicate your virtual environment elsewhere.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-code-readability"><p>Content from <a href="04-code-readability.html">Code readability</a></p>
<hr>
<p>Last updated on 2025-08-27 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/04-code-readability.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why does code readability matter?</li>
<li>How can I organise my code to be more readable?</li>
<li>What types of documentation can I include to improve the readability
of my code?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Organise code into reusable functions that achieve a singular
purpose</li>
<li>Choose function and variable names that help explain the purpose of
the function or variable</li>
<li>Write informative comments and docstrings to provide more detail
about what the code is doing</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In this episode, we will introduce the concept of readable code and
consider how it can help create reusable scientific software and empower
collaboration between researchers.</p>
<p>While all developers hope their code will be stable long term,
software often has to change due to changes in the real world. As
requirements change, so must the relevant code. When code needs to be
changed, the developer that created it or more likely a different
developer needs to understand that code before they can implement the
new requirements. Readable code facilitates the reading and
understanding of the abstraction phases and, as a result, facilitates
the evolution of the codebase. Readable code saves future developers’
time and effort.</p>
<p>In order to develop readable code, we should ask ourselves: “If I
re-read this piece of code in fifteen days or one year, will I be able
to understand what I have done and why?” Or even better: “If a new
person who just joined the project reads my software, will they be able
to understand what I have written here?”</p>
<p>In this episode, we will learn a few specific software best practices
we can follow to help create more readable code.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/04-code-readability" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/04-code-readability</a></p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Activate your virtual environment </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="place-import-statements-at-the-top">Place <code>import</code> statements at the top<a class="anchor" aria-label="anchor" href="#place-import-statements-at-the-top"></a>
</h2>
<hr class="half-width">
<p>Let’s have a look our code again - the first thing we may notice is
that our script currently places import statements throughout the code.
Conventionally, all import statements are placed at the top of the
script so that dependent libraries are clearly visible and not buried
inside the code (there are also standard ways of describing dependencies
- e.g. using a <code>requirements.txt</code> file). This will help
readability (accessibility) and reusability of our code.</p>
<p>Our code after the modification should look like the following.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>data_f <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'ascii'</span>)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>data_t <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>,<span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>g_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span> </span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>fieldnames <span class="op">=</span> (<span class="st">"EVA #"</span>, <span class="st">"Country"</span>, <span class="st">"Crew    "</span>, <span class="st">"Vehicle"</span>, <span class="st">"Date"</span>, <span class="st">"Duration"</span>, <span class="st">"Purpose"</span>)</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>data<span class="op">=</span>[]</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">374</span>):</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>    line<span class="op">=</span>data_f.readline()</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>    data.append(json.loads(line[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="co">#data.pop(0)</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">## Comment out this bit if you don't want the spreadsheet</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>w<span class="op">=</span>csv.writer(data_t)</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>date <span class="op">=</span>[]</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>j<span class="op">=</span><span class="dv">0</span></span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a>    <span class="bu">print</span>(data[j])</span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a>    <span class="co"># and this bit</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a>    w.writerow(data[j].values())</span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'duration'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a>        tt<span class="op">=</span>data[j][<span class="st">'duration'</span>]</span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a>        <span class="cf">if</span> tt <span class="op">==</span> <span class="st">''</span>:</span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a>            t<span class="op">=</span>dt.datetime.strptime(tt,<span class="st">'%H:%M'</span>)</span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a>            ttt <span class="op">=</span> dt.timedelta(hours<span class="op">=</span>t.hour, minutes<span class="op">=</span>t.minute, seconds<span class="op">=</span>t.second).total_seconds()<span class="op">/</span>(<span class="dv">60</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a>            <span class="bu">print</span>(t,ttt)</span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a>            time.append(ttt)</span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'date'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a>                date.append(dt.datetime.strptime(data[j][<span class="st">'date'</span>][<span class="dv">0</span>:<span class="dv">10</span>], <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a>                <span class="co">#date.append(data[j]['date'][0:10])</span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a>                time.pop(<span class="dv">0</span>)</span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a>    j<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a></span>
<span id="cb2-50"><a href="#cb2-50" tabindex="-1"></a>t<span class="op">=</span>[<span class="dv">0</span>]</span>
<span id="cb2-51"><a href="#cb2-51" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> time:</span>
<span id="cb2-52"><a href="#cb2-52" tabindex="-1"></a>    t.append(t[<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>i)</span>
<span id="cb2-53"><a href="#cb2-53" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" tabindex="-1"></a>date,time <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span><span class="bu">sorted</span>(<span class="bu">zip</span>(date, time)))</span>
<span id="cb2-55"><a href="#cb2-55" tabindex="-1"></a></span>
<span id="cb2-56"><a href="#cb2-56" tabindex="-1"></a>plt.plot(date,t[<span class="dv">1</span>:], <span class="st">'ko-'</span>)</span>
<span id="cb2-57"><a href="#cb2-57" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb2-58"><a href="#cb2-58" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb2-59"><a href="#cb2-59" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb2-60"><a href="#cb2-60" tabindex="-1"></a>plt.savefig(g_file)</span>
<span id="cb2-61"><a href="#cb2-61" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>Let’s make sure we commit our changes.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Move import statements to the top of the script"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="use-meaningful-variable-names">Use meaningful variable names<a class="anchor" aria-label="anchor" href="#use-meaningful-variable-names"></a>
</h2>
<hr class="half-width">
<p>Variables are the most common thing you will assign when coding, and
it’s really important that it is clear what each variable means in order
to understand what the code is doing. If you return to your code after a
long time doing something else, or share your code with a colleague, it
should be easy enough to understand what variables are involved in your
code from their names. Therefore we need to give them clear names, but
we also want to keep them concise so the code stays readable. There are
no “hard and fast rules” here, and it’s often a case of using your best
judgment.</p>
<p>Some useful tips for naming variables are:</p>
<ul>
<li>Short words are better than single character names. For example, if
we were creating a variable to store the speed to read a file,
<code>s</code> (for ‘speed’) is not descriptive enough but
<code>MBReadPerSecondAverageAfterLastFlushToLog</code> is too long to
read and prone to misspellings. <code>ReadSpeed</code> (or
<code>read_speed</code>) would suffice.</li>
<li>If you are finding it difficult to come up with a variable name that
is both short and descriptive, go with the short version and use an
inline comment to describe it further (more on those in the next
section). This guidance does not necessarily apply if your variable is a
well-known constant in your domain - for example, <em>c</em> represents
the speed of light in physics.</li>
<li>Try to be descriptive where possible and avoid meaningless or funny
names like <code>foo</code>, <code>bar</code>, <code>var</code>,
<code>thing</code>, etc.</li>
</ul>
<p>There are also some restrictions to consider when naming variables in
Python:</p>
<ul>
<li>Only alphanumeric characters and underscores are permitted in
variable names.</li>
<li>You cannot begin your variable names with a numerical character as
this will raise a syntax error. Numerical characters can be included in
a variable name, just not as the first character. For example,
<code>read_speed1</code> is a valid variable name, but
<code>1read_speed</code> isn’t. (This behaviour may be different for
other programming languages.)</li>
<li>Variable names are case sensitive. So <code>speed_of_light</code>
and <code>Speed_Of_Light</code> are not the same.</li>
<li>Programming languages often have global pre-built functions, such as
<code>input</code>, which you may accidentally overwrite if you assign a
variable with the same name and no longer be able to access the original
<code>input</code> function. In this case, opting for something like
<code>input_data</code> would be preferable. Note that this behaviour
may be explicitly disallowed in other programming languages but is not
in Python.</li>
</ul>
<div id="give-a-descriptive-name-to-a-variable" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="give-a-descriptive-name-to-a-variable" class="callout-inner">
<h3 class="callout-title">Give a descriptive name to a variable</h3>
<div class="callout-content">
<p>Below we have a variable called <code>var</code> being set the value
of 9.81. <code>var</code> is not a very descriptive name here as it
doesn’t tell us what 9.81 means, yet it is a very common constant in
physics! Go online and find out which constant 9.81 relates to and
suggest a new name for this variable.</p>
<p>Hint: the units are <em>metres per second squared</em>!</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>var <span class="op">=</span> <span class="fl">9.81</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p><span class="math display">\[ 9.81 m/s^2 \]</span> is the <a href="https://en.wikipedia.org/wiki/Gravity_of_Earth" class="external-link">gravitational
force exerted by the Earth</a>. It is often referred to as “little g” to
distinguish it from “big G” which is the <a href="https://en.wikipedia.org/wiki/Gravitational_constant" class="external-link">Gravitational
Constant</a>. A more descriptive name for this variable therefore might
be:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>g_earth <span class="op">=</span> <span class="fl">9.81</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="rename-our-variables-to-be-more-descriptive" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="rename-our-variables-to-be-more-descriptive" class="callout-inner">
<h3 class="callout-title">Rename our variables to be more
descriptive</h3>
<div class="callout-content">
<p>Let’s apply this to <code>eva_data_analysis.py</code>.</p>
<ol style="list-style-type: lower-alpha">
<li>
<p>Edit the code as follows to use descriptive (and consistent)
variable names:</p>
<ul>
<li>Change <code>data_f</code> to <code>input_file</code>
</li>
<li>Change <code>data_t</code> to <code>output_file</code>
</li>
<li>Change <code>g_file</code> to <code>graph_file</code>
</li>
</ul>
<p><em>Be sure to change all the occurrences of each variable
name.</em></p>
</li>
<li><p>What other variable names in our code would benefit from
renaming?</p></li>
<li><p>Commit your changes to your repository. Remember to use an
informative commit message.</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<ol style="list-style-type: lower-alpha">
<li>
<p>Updated code:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'ascii'</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>fieldnames <span class="op">=</span> (<span class="st">"EVA #"</span>, <span class="st">"Country"</span>, <span class="st">"Crew    "</span>, <span class="st">"Vehicle"</span>, <span class="st">"Date"</span>, <span class="st">"Duration"</span>, <span class="st">"Purpose"</span>)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>data<span class="op">=</span>[]</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">374</span>):</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>    line<span class="op">=</span>input_file.readline()</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>    data.append(json.loads(line[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#data.pop(0)</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">## Comment out this bit if you don't want the spreadsheet</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>w<span class="op">=</span>csv.writer(output_file)</span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a>date <span class="op">=</span>[]</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a>j<span class="op">=</span><span class="dv">0</span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a>    <span class="bu">print</span>(data[j])</span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a>    <span class="co"># and this bit</span></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>    w.writerow(data[j].values())</span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'duration'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a>        tt<span class="op">=</span>data[j][<span class="st">'duration'</span>]</span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a>        <span class="cf">if</span> tt <span class="op">==</span> <span class="st">''</span>:</span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a>            t<span class="op">=</span>dt.datetime.strptime(tt,<span class="st">'%H:%M'</span>)</span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a>            ttt <span class="op">=</span> dt.timedelta(hours<span class="op">=</span>t.hour, minutes<span class="op">=</span>t.minute, seconds<span class="op">=</span>t.second).total_seconds()<span class="op">/</span>(<span class="dv">60</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a>            <span class="bu">print</span>(t,ttt)</span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a>            time.append(ttt)</span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'date'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a>                date.append(dt.datetime.strptime(data[j][<span class="st">'date'</span>][<span class="dv">0</span>:<span class="dv">10</span>], <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a>                <span class="co">#date.append(data[j]['date'][0:10])</span></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a></span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a>                time.pop(<span class="dv">0</span>)</span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a>    j<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a></span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a>t<span class="op">=</span>[<span class="dv">0</span>]</span>
<span id="cb6-51"><a href="#cb6-51" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> time:</span>
<span id="cb6-52"><a href="#cb6-52" tabindex="-1"></a>    t.append(t[<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>i)</span>
<span id="cb6-53"><a href="#cb6-53" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" tabindex="-1"></a>date,time <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span><span class="bu">sorted</span>(<span class="bu">zip</span>(date, time)))</span>
<span id="cb6-55"><a href="#cb6-55" tabindex="-1"></a></span>
<span id="cb6-56"><a href="#cb6-56" tabindex="-1"></a>plt.plot(date,t[<span class="dv">1</span>:], <span class="st">'ko-'</span>)</span>
<span id="cb6-57"><a href="#cb6-57" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb6-58"><a href="#cb6-58" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb6-59"><a href="#cb6-59" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb6-60"><a href="#cb6-60" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb6-61"><a href="#cb6-61" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
</li>
<li><p>Variables <code>w</code>, <code>t</code>, <code>ttt</code> could
also be renamed to be more descriptive. Though, we won’t do so
now.</p></li>
<li>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Use descriptive variable names"</span></span></code></pre>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<p>Imagine that we’ve now updated all the variable names to be more
descriptive, we can now go and close the issue on GitHub we created
earlier. To do so, we open our repository in GitHub, switch to the
Issues tab, find the issue to “improve variable names” we created
earlier. There are more automated ways to close issues based on a
commit/pull request that we will learn later, for now we will click the
“Close issue” button at the bottom of the discussion.</p>
</section><section><h2 class="section-heading" id="remove-unused-variables-and-imports">Remove unused variables and imports<a class="anchor" aria-label="anchor" href="#remove-unused-variables-and-imports"></a>
</h2>
<hr class="half-width">
<p>Unused variables or import statements can cause confusion about what
the code is doing, making it harder to read and easier to introduce
mistakes. Such things may seem harmless as they do not cause immediate
syntax errors - but they can potentially lead to subtle program logic
errors, unexpected behavior, wrong results and issues later on - making
them especially tricky to detect and fix. Over time, this makes the
codebase more fragile and harder to maintain and extend.</p>
<div id="remove-an-unused-variable" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="remove-an-unused-variable" class="callout-inner">
<h3 class="callout-title">Remove an unused variable</h3>
<div class="callout-content">
<p>Find and remove an unused variable in our code. Then, commit the
updated code to the git repo.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Variable <code>fieldnames</code> (containing column names for CSV
data file) is defined but never used in the code - it should be
deleted.</p>
<p>Updated code:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="im">import</span> datetime <span class="im">as</span> dt</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'ascii'</span>)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>data<span class="op">=</span>[]</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">374</span>):</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>    line<span class="op">=</span>input_file.readline()</span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>    <span class="bu">print</span>(line)</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a>    data.append(json.loads(line[<span class="dv">1</span>:<span class="op">-</span><span class="dv">1</span>]))</span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="co">#data.pop(0)</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="co">## Comment out this bit if you don't want the spreadsheet</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>w<span class="op">=</span>csv.writer(output_file)</span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a>time <span class="op">=</span> []</span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a>date <span class="op">=</span>[]</span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a></span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a>j<span class="op">=</span><span class="dv">0</span></span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> data:</span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a>    <span class="bu">print</span>(data[j])</span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a>    <span class="co"># and this bit</span></span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a>    w.writerow(data[j].values())</span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a>    <span class="cf">if</span> <span class="st">'duration'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb8-32"><a href="#cb8-32" tabindex="-1"></a>        tt<span class="op">=</span>data[j][<span class="st">'duration'</span>]</span>
<span id="cb8-33"><a href="#cb8-33" tabindex="-1"></a>        <span class="cf">if</span> tt <span class="op">==</span> <span class="st">''</span>:</span>
<span id="cb8-34"><a href="#cb8-34" tabindex="-1"></a>            <span class="cf">pass</span></span>
<span id="cb8-35"><a href="#cb8-35" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb8-36"><a href="#cb8-36" tabindex="-1"></a>            t<span class="op">=</span>dt.datetime.strptime(tt,<span class="st">'%H:%M'</span>)</span>
<span id="cb8-37"><a href="#cb8-37" tabindex="-1"></a>            ttt <span class="op">=</span> dt.timedelta(hours<span class="op">=</span>t.hour, minutes<span class="op">=</span>t.minute, seconds<span class="op">=</span>t.second).total_seconds()<span class="op">/</span>(<span class="dv">60</span><span class="op">*</span><span class="dv">60</span>)</span>
<span id="cb8-38"><a href="#cb8-38" tabindex="-1"></a>            <span class="bu">print</span>(t,ttt)</span>
<span id="cb8-39"><a href="#cb8-39" tabindex="-1"></a>            time.append(ttt)</span>
<span id="cb8-40"><a href="#cb8-40" tabindex="-1"></a>            <span class="cf">if</span> <span class="st">'date'</span> <span class="kw">in</span> data[j].keys():</span>
<span id="cb8-41"><a href="#cb8-41" tabindex="-1"></a>                date.append(dt.datetime.strptime(data[j][<span class="st">'date'</span>][<span class="dv">0</span>:<span class="dv">10</span>], <span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb8-42"><a href="#cb8-42" tabindex="-1"></a>                <span class="co">#date.append(data[j]['date'][0:10])</span></span>
<span id="cb8-43"><a href="#cb8-43" tabindex="-1"></a></span>
<span id="cb8-44"><a href="#cb8-44" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb8-45"><a href="#cb8-45" tabindex="-1"></a>                time.pop(<span class="dv">0</span>)</span>
<span id="cb8-46"><a href="#cb8-46" tabindex="-1"></a>    j<span class="op">+=</span><span class="dv">1</span></span>
<span id="cb8-47"><a href="#cb8-47" tabindex="-1"></a></span>
<span id="cb8-48"><a href="#cb8-48" tabindex="-1"></a>t<span class="op">=</span>[<span class="dv">0</span>]</span>
<span id="cb8-49"><a href="#cb8-49" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> time:</span>
<span id="cb8-50"><a href="#cb8-50" tabindex="-1"></a>    t.append(t[<span class="op">-</span><span class="dv">1</span>]<span class="op">+</span>i)</span>
<span id="cb8-51"><a href="#cb8-51" tabindex="-1"></a></span>
<span id="cb8-52"><a href="#cb8-52" tabindex="-1"></a>date,time <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span><span class="bu">sorted</span>(<span class="bu">zip</span>(date, time)))</span>
<span id="cb8-53"><a href="#cb8-53" tabindex="-1"></a></span>
<span id="cb8-54"><a href="#cb8-54" tabindex="-1"></a>plt.plot(date,t[<span class="dv">1</span>:], <span class="st">'ko-'</span>)</span>
<span id="cb8-55"><a href="#cb8-55" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb8-56"><a href="#cb8-56" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb8-57"><a href="#cb8-57" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb8-58"><a href="#cb8-58" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb8-59"><a href="#cb8-59" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Remove unused variable fieldname"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="use-third-party-libraries-where-possible">Use third-party libraries where possible<a class="anchor" aria-label="anchor" href="#use-third-party-libraries-where-possible"></a>
</h2>
<hr class="half-width">
<p>Our script currently reads the data line-by-line from the JSON data
file and uses custom code to manipulate the data. Variables of interest
are stored in lists but there are more suitable data structures
(e.g. data frames) to store data in our case. By choosing custom code
over popular and well-tested libraries, we are making our code less
readable and understandable and more error-prone.</p>
<p>The main functionality of our code can be rewritten as follows using
the <code>pandas</code> library to load and manipulate the data in data
frames.</p>
<p>First, we need to install this dependency into our virtual
environment (which should be active at this point).</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install pandas</span></code></pre>
</div>
<p>Then we will edit the code to use pandas. For the sake of time in the
workshop, we will give you the updated code. The code should now look
like:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># Data source: https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'ascii'</span>)</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a>eva_df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a>eva_df[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_df[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a>eva_df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a>plt.plot(eva_df[<span class="st">'date'</span>], eva_df[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a>plt.show()</span></code></pre>
</div>
<p>Once we have replaced the code in our Python script
<code>eva_data_analysis.py</code> with the above code, we need to commit
the changes. Remember to use an informative commit message.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Refactor code to use standard libraries"</span></span></code></pre>
</div>
<p>Make sure to capture the changes to your virtual development
environment too.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Added Pandas library."</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
<p>Note, in practice we may have wanted to commit the code and the
environment changes together since they are related.</p>
</section><section><h2 class="section-heading" id="use-comments-to-explain-functionality">Use comments to explain functionality<a class="anchor" aria-label="anchor" href="#use-comments-to-explain-functionality"></a>
</h2>
<hr class="half-width">
<p>Commenting is a very useful practice to help convey the context of
the code. It can be helpful as a reminder for your future self or your
collaborators as to why code is written in a certain way, how it is
achieving a specific task, or the real-world implications of your
code.</p>
<p>There are several ways to add comments to code:</p>
<ul>
<li>An <strong>inline comment</strong> is a comment on the same line as
a code statement. Typically, it comes after the code statement and
finishes when the line ends and is useful when you want to explain the
code line in short. Inline comments in Python should be separated by at
least two spaces from the statement; they start with a # followed by a
single space, and have no end delimiter.</li>
<li>A <strong>single-line comment</strong> or <strong>prologue
comment</strong> is a comment that comes the line before a block of code
to explain it.</li>
<li>A <strong>multi-line</strong> or <strong>block comment</strong> can
span multiple lines and has a start and end sequence. To comment out a
block of code in Python, you can either add a # at the beginning of each
line of the block or surround the entire block with three single
(<code>'''</code>) or double quotes (<code>"""</code>).</li>
</ul>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>x <span class="op">=</span> <span class="dv">5</span>  <span class="co"># In Python, inline comments begin with the `#` symbol and a single space.</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co"># this is a single-line comment</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>y <span class="op">=</span> x <span class="op">+</span> <span class="dv">10</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>z <span class="op">=</span> y<span class="op">*</span><span class="dv">2</span> <span class="op">+</span> x</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">'''</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co">This is a multiline</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">comment</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a><span class="co">in Python.</span></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="co">'''</span></span></code></pre>
</div>
<p>Here are a few things to keep in mind when commenting your code:</p>
<ul>
<li>Focus on the <strong>why</strong> and the <strong>how</strong> of
your code - avoid using comments to explain <strong>what</strong> your
code does. If your code is too complex for other programmers to
understand, consider rewriting it for clarity rather than adding
comments to explain it.</li>
<li>Make sure you are not reiterating something that your code already
conveys on its own. Comments should not echo your code.</li>
<li>Keep comments short and concise. Large blocks of text quickly become
unreadable and difficult to maintain.</li>
<li>Comments that contradict the code are worse than no comments. Always
make a priority of keeping comments up-to-date when code changes.</li>
</ul>
<div class="section level3">
<h3 id="examples-of-unhelpful-comments">Examples of unhelpful comments<a class="anchor" aria-label="anchor" href="#examples-of-unhelpful-comments"></a>
</h3>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>statetax <span class="op">=</span> <span class="fl">1.0625</span>  <span class="co"># Assigns the float 1.0625 to the variable 'statetax'</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>citytax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Assigns the float 1.01 to the variable 'citytax'</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>specialtax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Assigns the float 1.01 to the variable 'specialtax'</span></span></code></pre>
</div>
<p>The comments in this code simply tell us what the code does, which is
easy enough to figure out without the inline comments.</p>
</div>
<div class="section level3">
<h3 id="examples-of-helpful-comments">Examples of helpful comments<a class="anchor" aria-label="anchor" href="#examples-of-helpful-comments"></a>
</h3>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>statetax <span class="op">=</span> <span class="fl">1.0625</span>  <span class="co"># State sales tax rate is 6.25% through Jan. 1</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>citytax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># City sales tax rate is 1% through Jan. 1</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>specialtax <span class="op">=</span> <span class="fl">1.01</span>  <span class="co"># Special sales tax rate is 1% through Jan. 1</span></span></code></pre>
</div>
<p>In this case, it might not be immediately obvious what each variable
represents, so the comments offer helpful, real-world context. The date
in the comment also indicates when the code might need to be
updated.</p>
<div id="add-comments-to-our-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="add-comments-to-our-code" class="callout-inner">
<h3 class="callout-title">Add comments to our code</h3>
<div class="callout-content">
<ol style="list-style-type: lower-alpha">
<li>Examine <code>eva_data_analysis.py</code>. Add as many comments as
you think is required to help yourself and others understand what that
code is doing.</li>
<li>Commit your changes to your repository. Remember to use an
informative commit message.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Some good comments may look like the example below.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'ascii'</span>)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a>eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a><span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb17-16"><a href="#cb17-16" tabindex="-1"></a>eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-17"><a href="#cb17-17" tabindex="-1"></a>eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb17-18"><a href="#cb17-18" tabindex="-1"></a></span>
<span id="cb17-19"><a href="#cb17-19" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-20"><a href="#cb17-20" tabindex="-1"></a><span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb17-21"><a href="#cb17-21" tabindex="-1"></a>eva_df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb17-22"><a href="#cb17-22" tabindex="-1"></a></span>
<span id="cb17-23"><a href="#cb17-23" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb17-24"><a href="#cb17-24" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb17-25"><a href="#cb17-25" tabindex="-1"></a>eva_df[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_df[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb17-26"><a href="#cb17-26" tabindex="-1"></a>eva_df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb17-27"><a href="#cb17-27" tabindex="-1"></a>plt.plot(eva_df[<span class="st">'date'</span>], eva_df[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb17-28"><a href="#cb17-28" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb17-29"><a href="#cb17-29" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb17-30"><a href="#cb17-30" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb17-31"><a href="#cb17-31" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb17-32"><a href="#cb17-32" tabindex="-1"></a>plt.show()</span>
<span id="cb17-33"><a href="#cb17-33" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Commit changes:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add inline comments to the code"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="separate-units-of-functionality">Separate units of functionality<a class="anchor" aria-label="anchor" href="#separate-units-of-functionality"></a>
</h2>
<hr class="half-width">
<p>Functions are a fundamental concept in writing software and are one
of the core ways you can organise your code to improve its readability.
A function is an isolated section of code that performs a single,
<em>specific</em> task that can be simple or complex. It can then be
called multiple times with different inputs throughout a codebase, but
its definition only needs to appear once.</p>
<p>Breaking up code into functions in this manner benefits readability
since the smaller sections are easier to read and understand. Since
functions can be reused, codebases naturally begin to follow the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" class="external-link">Don’t
Repeat Yourself principle</a> which prevents software from becoming
overly long and confusing. The software also becomes easier to maintain
because, if the code encapsulated in a function needs to change, it only
needs updating in one place instead of many. As we will learn in a
future episode, testing code also becomes simpler when code is written
in functions. Each function can be individually checked to ensure it is
doing what is intended, which improves confidence in the software as a
whole.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Decomposing code into functions helps with reusability of blocks of
code and eliminating repetition, but, equally importantly, it helps with
code readability and testing.</p>
</div>
</div>
</div>
<p>Looking at our code, you may notice it contains different pieces of
functionality:</p>
<ol style="list-style-type: decimal">
<li>reading the data from a JSON file</li>
<li>converting and saving the data in the CSV format</li>
<li>processing/cleaning the data and preparing it for analysis</li>
<li>data analysis and visualising the results</li>
</ol>
<p>Let’s refactor our code so that reading the data in JSON format into
a dataframe (step 1.) and converting it and saving to the CSV format
(step 2.) are extracted into separate functions. Let’s name those
functions <code>read_json_to_dataframe</code> and
<code>write_dataframe_to_csv</code> respectively. The main part of the
script should then be simplified to invoke these new functions, while
the functions themselves contain the complexity of each of these two
steps. We will continue to work on steps 3. and 4. above later on.</p>
<p>After the initial refactoring, our code may look something like the
following.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a><span class="co"># Main code</span></span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a></span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'ascii'</span>)</span>
<span id="cb19-26"><a href="#cb19-26" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
<span id="cb19-27"><a href="#cb19-27" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb19-28"><a href="#cb19-28" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" tabindex="-1"></a><span class="co"># Read the data from JSON file</span></span>
<span id="cb19-30"><a href="#cb19-30" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb19-31"><a href="#cb19-31" tabindex="-1"></a></span>
<span id="cb19-32"><a href="#cb19-32" tabindex="-1"></a><span class="co"># Convert and export data to CSV file</span></span>
<span id="cb19-33"><a href="#cb19-33" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb19-34"><a href="#cb19-34" tabindex="-1"></a></span>
<span id="cb19-35"><a href="#cb19-35" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb19-36"><a href="#cb19-36" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb19-37"><a href="#cb19-37" tabindex="-1"></a>eva_data[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_data[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb19-38"><a href="#cb19-38" tabindex="-1"></a>eva_data[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_data[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb19-39"><a href="#cb19-39" tabindex="-1"></a>plt.plot(eva_data[<span class="st">'date'</span>], eva_data[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb19-40"><a href="#cb19-40" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb19-41"><a href="#cb19-41" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb19-42"><a href="#cb19-42" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb19-43"><a href="#cb19-43" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb19-44"><a href="#cb19-44" tabindex="-1"></a>plt.show()</span>
<span id="cb19-45"><a href="#cb19-45" tabindex="-1"></a></span>
<span id="cb19-46"><a href="#cb19-46" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>We have chosen to create functions for reading in and writing out
data files since this is a very common task within research software.
While these functions do not contain that many lines of code due to
using the <code>pandas</code> in-built methods that do all the complex
data reading, converting and writing operations, it can be useful to
package these steps together into reusable functions if you need to read
in or write out a lot of similarly structured files and process them in
the same way.</p>
</section><section><h2 class="section-heading" id="use-docstrings-to-document-functions">Use docstrings to document functions<a class="anchor" aria-label="anchor" href="#use-docstrings-to-document-functions"></a>
</h2>
<hr class="half-width">
<p>Now that we have written some functions, it is time to document them
so that we can quickly recall (and others looking at our code in the
future can understand) what the functions do without having to read the
code.</p>
<p><em>Docstrings</em> are a specific type of documentation that are
provided within functions and <a href="https://docs.python.org/3/tutorial/classes.html" class="external-link">Python
classes</a>. A function docstring should explain what that particular
code is doing, what parameters the function needs (inputs) and what form
they should take, what the function outputs (you may see words like
‘returns’ or ‘yields’ here), and errors (if any) that might be
raised.</p>
<p>Providing these docstrings helps improve code readability since it
makes the function code more transparent and aids understanding.
Particularly, docstrings that provide information on the input and
output of functions makes it easier to reuse them in other parts of the
code, without having to read the full function to understand what needs
to be provided and what will be returned.</p>
<p>Python docstrings are defined by enclosing the text with 3 double
quotes (<code>"""</code>). This text is also indented to the same level
as the code defined beneath it, which is 4 whitespaces by
convention.</p>
<div class="section level3">
<h3 id="example-of-a-single-line-docstring">Example of a single-line docstring<a class="anchor" aria-label="anchor" href="#example-of-a-single-line-docstring"></a>
</h3>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">def</span> add(x, y):</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>    <span class="co">"""Add two numbers together"""</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">+</span> y</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="example-of-a-multi-line-docstring">Example of a multi-line docstring<a class="anchor" aria-label="anchor" href="#example-of-a-multi-line-docstring"></a>
</h3>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">def</span> divide(x, y):</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="co">    Divide number x by number y.</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co">        x: A number to be divided.</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co">        y: A number to divide by.</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a><span class="co">        float: The division of x by y.</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a><span class="co">    Raises:</span></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="co">        ZeroDivisionError: Cannot divide by zero.</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">/</span> y</span></code></pre>
</div>
<p>Some projects may have their own guidelines on how to write
docstrings, such as <a href="https://numpydoc.readthedocs.io/en/latest/format.html#docstring-standard" class="external-link">numpy</a>.
If you are contributing code to a wider project or community, try to
follow the guidelines and standards they provide for code style.</p>
<p>As your code grows and becomes more complex, the docstrings can form
the content of a reference guide allowing developers to quickly look up
how to use the APIs, functions, and classes defined in your codebase.
Hence, it is common to find tools that will automatically extract
docstrings from your code and generate a website where people can learn
about your code without downloading/installing and reading the code
files - such as <a href="https://www.mkdocs.org/" class="external-link">MkDocs</a>.</p>
<p>Let’s write a docstring for the function
<code>read_json_to_dataframe</code> we introduced in the previous
exercise using the <a href="https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html" class="external-link">Google
Style Python Docstrings Convention</a>. Remember, questions we want to
answer when writing the docstring include:</p>
<ul>
<li>What the function does?</li>
<li>What kind of inputs does the function take? Are they required or
optional? Do they have default values?</li>
<li>What output will the function produce?</li>
<li>What exceptions/errors, if any, it can produce?</li>
</ul>
<p>Our <code>read_json_to_dataframe</code> function fully described by a
docstring may look like:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="co">        input_file (str): The path to the JSON file.</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span></code></pre>
</div>
<div id="writing-docstrings" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="writing-docstrings" class="callout-inner">
<h3 class="callout-title">Writing docstrings</h3>
<div class="callout-content">
<p>Write a docstring for the function
<code>write_dataframe_to_csv</code> we introduced earlier.</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>Our <code>write_dataframe_to_csv</code> function fully described by a
docstring may look like:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Finally, our code may look something like the following:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a><span class="co">        input_file (str): The path to the JSON file.</span></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a></span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a>    <span class="co"># Read the data from a JSON file into a Pandas dataframe</span></span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a>    <span class="co"># Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-22"><a href="#cb24-22" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-23"><a href="#cb24-23" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb24-24"><a href="#cb24-24" tabindex="-1"></a></span>
<span id="cb24-25"><a href="#cb24-25" tabindex="-1"></a></span>
<span id="cb24-26"><a href="#cb24-26" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb24-27"><a href="#cb24-27" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb24-28"><a href="#cb24-28" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb24-29"><a href="#cb24-29" tabindex="-1"></a></span>
<span id="cb24-30"><a href="#cb24-30" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb24-31"><a href="#cb24-31" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb24-32"><a href="#cb24-32" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb24-33"><a href="#cb24-33" tabindex="-1"></a></span>
<span id="cb24-34"><a href="#cb24-34" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb24-35"><a href="#cb24-35" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb24-36"><a href="#cb24-36" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb24-37"><a href="#cb24-37" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb24-38"><a href="#cb24-38" tabindex="-1"></a>    <span class="co"># Save dataframe to CSV file for later analysis</span></span>
<span id="cb24-39"><a href="#cb24-39" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb24-40"><a href="#cb24-40" tabindex="-1"></a></span>
<span id="cb24-41"><a href="#cb24-41" tabindex="-1"></a></span>
<span id="cb24-42"><a href="#cb24-42" tabindex="-1"></a><span class="co"># Main code</span></span>
<span id="cb24-43"><a href="#cb24-43" tabindex="-1"></a></span>
<span id="cb24-44"><a href="#cb24-44" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb24-45"><a href="#cb24-45" tabindex="-1"></a></span>
<span id="cb24-46"><a href="#cb24-46" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>, encoding<span class="op">=</span><span class="st">'ascii'</span>)</span>
<span id="cb24-47"><a href="#cb24-47" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>, encoding<span class="op">=</span><span class="st">'utf-8'</span>)</span>
<span id="cb24-48"><a href="#cb24-48" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb24-49"><a href="#cb24-49" tabindex="-1"></a></span>
<span id="cb24-50"><a href="#cb24-50" tabindex="-1"></a><span class="co"># Read the data from JSON file</span></span>
<span id="cb24-51"><a href="#cb24-51" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb24-52"><a href="#cb24-52" tabindex="-1"></a></span>
<span id="cb24-53"><a href="#cb24-53" tabindex="-1"></a><span class="co"># Convert and export data to CSV file</span></span>
<span id="cb24-54"><a href="#cb24-54" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb24-55"><a href="#cb24-55" tabindex="-1"></a></span>
<span id="cb24-56"><a href="#cb24-56" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb24-57"><a href="#cb24-57" tabindex="-1"></a><span class="co"># Plot cumulative time spent in space over years</span></span>
<span id="cb24-58"><a href="#cb24-58" tabindex="-1"></a>eva_data[<span class="st">'duration_hours'</span>] <span class="op">=</span> eva_data[<span class="st">'duration'</span>].<span class="bu">str</span>.split(<span class="st">":"</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: <span class="bu">int</span>(x[<span class="dv">0</span>]) <span class="op">+</span> <span class="bu">int</span>(x[<span class="dv">1</span>])<span class="op">/</span><span class="dv">60</span>)</span>
<span id="cb24-59"><a href="#cb24-59" tabindex="-1"></a>eva_data[<span class="st">'cumulative_time'</span>] <span class="op">=</span> eva_data[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb24-60"><a href="#cb24-60" tabindex="-1"></a>plt.plot(eva_data[<span class="st">'date'</span>], eva_data[<span class="st">'cumulative_time'</span>], <span class="st">'ko-'</span>)</span>
<span id="cb24-61"><a href="#cb24-61" tabindex="-1"></a>plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb24-62"><a href="#cb24-62" tabindex="-1"></a>plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb24-63"><a href="#cb24-63" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb24-64"><a href="#cb24-64" tabindex="-1"></a>plt.savefig(graph_file)</span>
<span id="cb24-65"><a href="#cb24-65" tabindex="-1"></a>plt.show()</span>
<span id="cb24-66"><a href="#cb24-66" tabindex="-1"></a></span>
<span id="cb24-67"><a href="#cb24-67" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>Do not forget to commit any uncommitted changes you may have and then
push your work to GitHub.</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add <span class="op">&lt;</span>your_changed_files<span class="op">&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Your commit message"</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>Good code readability brings many benefits to software development.
It makes code easier to understand, maintain, and debug. This benefits
collaborators and future developers as well as the original author.
Readable code reduces the risk of errors, speeds up onboarding of new
team members, and simplifies code reviews. It also supports long-term
sustainability, as clear code is more adaptable and easier to extend or
refactor over time.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/05-code-structure" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/05-code-structure</a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li><a href="https://www.index.dev/blog/7-tell-tale-signs-of-unreadable-code-how-to-identify-and-fix-the-problem" class="external-link">7
tell-tale signs of unreadable code</a></li>
<li><a href="https://www.theguardian.com/info/2019/jan/29/code-readability-matters" class="external-link">‘Code
Readability Matters’ from the Guardian’s engineering blog</a></li>
<li><a href="https://peps.python.org/pep-0008/#comments" class="external-link">PEP 8 Style
Guide for Python</a></li>
<li><a href="https://www.coursera.org/tutorials/python-comment#inline-commenting-in-python" class="external-link">Coursera:
Inline commenting in Python</a></li>
<li><a href="https://introtopython.org/introducing_functions.html" class="external-link">Introducing
Functions from Introduction to Python</a></li>
<li><a href="https://www.w3schools.com/python/python_functions.asp" class="external-link">W3Schools.com
Python Functions</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Readable code is easier to understand, maintain, debug and extend
(reuse) - saving time and effort.</li>
<li>Choosing descriptive variable and function names will communicate
their purpose more effectively.</li>
<li>Using comments and docstrings to describe parts of the code will
help transmit understanding and context.</li>
<li>Use libraries or packages for common functionality to avoid
duplication.</li>
<li>Creating functions from the smallest, reusable units of code will
make the code more readable and help. compartmentalise which parts of
the code are doing what actions and isolate specific code sections for
reuse.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-05-code-structure"><p>Content from <a href="05-code-structure.html">Code structure</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/05-code-structure.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we best structure code?</li>
<li>What is a common code structure (pattern) for creating software that
can read input from command line?</li>
<li>What are conventional places to store data, code, results, tests,
auxiliary information and metadata within our software or research
project?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Structure code into smaller, reusable components with a single
responsibility/functionality.</li>
<li>Use the common code pattern for creating software that can read
input from command line</li>
<li>Follow best practices for organising software/research project
directories for improved readability, accessibility and
reproducibility.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the previous episode we have seen some tools and practices that
can help up improve readability of our code - including breaking our
code into small, reusable functions that perform one specific task. We
are going to explore a bit more how using common code structures can
improve readability, accessibility and reusability of our code, and will
expand these practices on our (research or code) projects as a
whole.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler1" aria-labelledby="headingSpoiler1">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/05-code-structure" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/05-code-structure</a></p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Activate your virtual environment </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler2" aria-labelledby="headingSpoiler2">
<div class="accordion-body">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="functions-for-modular-and-reusable-code">Functions for modular and reusable code<a class="anchor" aria-label="anchor" href="#functions-for-modular-and-reusable-code"></a>
</h2>
<hr class="half-width">
<p>As we have already seen in the previous episode - functions play a
key role in creating modular and reusable code. We are going to carry on
improving our code following these principles:</p>
<ul>
<li>Each function should have a single, clear responsibility. This makes
functions easier to understand, test, and reuse.</li>
<li>Write functions that can be easily combined or reused with other
functions to build more complex functionality.</li>
<li>Functions should accept parameters to allow flexibility and
reusability in different contexts; avoid hard-coding values inside
functions/code (e.g. data files to read from/write to) and pass them as
arguments instead.</li>
</ul>
<p>Bearing in mind the above principles, we can further simplify the
main part of our code by extracting the code to process, analyse our
data and plot a graph into a separate function
<code>plot_cumulative_time_in_space</code>.</p>
<p>We can further extract the code to convert the spacewalk duration
text into a number to allow for arithmetic calculations (into a separate
function <code>text_to_duration</code>) and the code to add this
numerical data as a new column in our dataset (into a separate function
<code>add_duration_hours_variable</code>).</p>
<p>The main part of our code then becomes much simpler and more
readable, only containing the invocation of the following three
functions:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>...</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>...</span></code></pre>
</div>
<p>Remember to add docstrings and comments to the new functions to
explain their functionalities.</p>
<p>Our new code (with the three new functions
<code>plot_cumulative_time_in_space</code>,
<code>text_to_duration</code> and
<code>add_duration_hours_variable</code>) may look like the
following.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="co">        input_file (str): The path to the JSON file.</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb3-30"><a href="#cb3-30" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb3-31"><a href="#cb3-31" tabindex="-1"></a></span>
<span id="cb3-32"><a href="#cb3-32" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-33"><a href="#cb3-33" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb3-34"><a href="#cb3-34" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-35"><a href="#cb3-35" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb3-36"><a href="#cb3-36" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb3-37"><a href="#cb3-37" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb3-39"><a href="#cb3-39" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-40"><a href="#cb3-40" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb3-41"><a href="#cb3-41" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-43"><a href="#cb3-43" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb3-44"><a href="#cb3-44" tabindex="-1"></a></span>
<span id="cb3-45"><a href="#cb3-45" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-46"><a href="#cb3-46" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb3-47"><a href="#cb3-47" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-48"><a href="#cb3-48" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb3-49"><a href="#cb3-49" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span>  <span class="co"># there is an intentional bug on this line (should divide by 60 not 6)</span></span>
<span id="cb3-50"><a href="#cb3-50" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span>
<span id="cb3-51"><a href="#cb3-51" tabindex="-1"></a></span>
<span id="cb3-52"><a href="#cb3-52" tabindex="-1"></a></span>
<span id="cb3-53"><a href="#cb3-53" tabindex="-1"></a><span class="kw">def</span> add_duration_hours_variable(df):</span>
<span id="cb3-54"><a href="#cb3-54" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-55"><a href="#cb3-55" tabindex="-1"></a><span class="co">    Add duration in hours (duration_hours) variable to the dataset</span></span>
<span id="cb3-56"><a href="#cb3-56" tabindex="-1"></a></span>
<span id="cb3-57"><a href="#cb3-57" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-58"><a href="#cb3-58" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb3-59"><a href="#cb3-59" tabindex="-1"></a></span>
<span id="cb3-60"><a href="#cb3-60" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-61"><a href="#cb3-61" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new duration_hours variable added</span></span>
<span id="cb3-62"><a href="#cb3-62" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-63"><a href="#cb3-63" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb3-64"><a href="#cb3-64" tabindex="-1"></a>    df_copy[<span class="st">"duration_hours"</span>] <span class="op">=</span> df_copy[<span class="st">"duration"</span>].<span class="bu">apply</span>(</span>
<span id="cb3-65"><a href="#cb3-65" tabindex="-1"></a>        text_to_duration</span>
<span id="cb3-66"><a href="#cb3-66" tabindex="-1"></a>    )</span>
<span id="cb3-67"><a href="#cb3-67" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb3-68"><a href="#cb3-68" tabindex="-1"></a></span>
<span id="cb3-69"><a href="#cb3-69" tabindex="-1"></a></span>
<span id="cb3-70"><a href="#cb3-70" tabindex="-1"></a><span class="kw">def</span> plot_cumulative_time_in_space(df, graph_file):</span>
<span id="cb3-71"><a href="#cb3-71" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb3-72"><a href="#cb3-72" tabindex="-1"></a><span class="co">    Plot the cumulative time spent in space over years</span></span>
<span id="cb3-73"><a href="#cb3-73" tabindex="-1"></a></span>
<span id="cb3-74"><a href="#cb3-74" tabindex="-1"></a><span class="co">    Convert the duration column from strings to number of hours</span></span>
<span id="cb3-75"><a href="#cb3-75" tabindex="-1"></a><span class="co">    Calculate cumulative sum of durations</span></span>
<span id="cb3-76"><a href="#cb3-76" tabindex="-1"></a><span class="co">    Generate a plot of cumulative time spent in space over years and</span></span>
<span id="cb3-77"><a href="#cb3-77" tabindex="-1"></a><span class="co">    save it to the specified location</span></span>
<span id="cb3-78"><a href="#cb3-78" tabindex="-1"></a></span>
<span id="cb3-79"><a href="#cb3-79" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb3-80"><a href="#cb3-80" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb3-81"><a href="#cb3-81" tabindex="-1"></a><span class="co">        graph_file (str): The path to the output graph file.</span></span>
<span id="cb3-82"><a href="#cb3-82" tabindex="-1"></a></span>
<span id="cb3-83"><a href="#cb3-83" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb3-84"><a href="#cb3-84" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb3-85"><a href="#cb3-85" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb3-86"><a href="#cb3-86" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb3-87"><a href="#cb3-87" tabindex="-1"></a>    df <span class="op">=</span> add_duration_hours_variable(df)</span>
<span id="cb3-88"><a href="#cb3-88" tabindex="-1"></a>    df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb3-89"><a href="#cb3-89" tabindex="-1"></a>    plt.plot(df.date, df.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb3-90"><a href="#cb3-90" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb3-91"><a href="#cb3-91" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb3-92"><a href="#cb3-92" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb3-93"><a href="#cb3-93" tabindex="-1"></a>    plt.savefig(graph_file)</span>
<span id="cb3-94"><a href="#cb3-94" tabindex="-1"></a>    plt.show()</span>
<span id="cb3-95"><a href="#cb3-95" tabindex="-1"></a></span>
<span id="cb3-96"><a href="#cb3-96" tabindex="-1"></a></span>
<span id="cb3-97"><a href="#cb3-97" tabindex="-1"></a><span class="co"># Main code</span></span>
<span id="cb3-98"><a href="#cb3-98" tabindex="-1"></a></span>
<span id="cb3-99"><a href="#cb3-99" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb3-100"><a href="#cb3-100" tabindex="-1"></a></span>
<span id="cb3-101"><a href="#cb3-101" tabindex="-1"></a>input_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.json'</span>, <span class="st">'r'</span>)</span>
<span id="cb3-102"><a href="#cb3-102" tabindex="-1"></a>output_file <span class="op">=</span> <span class="bu">open</span>(<span class="st">'./eva-data.csv'</span>, <span class="st">'w'</span>)</span>
<span id="cb3-103"><a href="#cb3-103" tabindex="-1"></a>graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb3-104"><a href="#cb3-104" tabindex="-1"></a></span>
<span id="cb3-105"><a href="#cb3-105" tabindex="-1"></a>eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb3-106"><a href="#cb3-106" tabindex="-1"></a></span>
<span id="cb3-107"><a href="#cb3-107" tabindex="-1"></a>write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb3-108"><a href="#cb3-108" tabindex="-1"></a></span>
<span id="cb3-109"><a href="#cb3-109" tabindex="-1"></a>plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb3-110"><a href="#cb3-110" tabindex="-1"></a></span>
<span id="cb3-111"><a href="#cb3-111" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"--END--"</span>)</span></code></pre>
</div>
<p>As you may notice, the main part of our code has now been majorly
simplified and is much easier to follow.</p>
</section><section><h2 class="section-heading" id="command-line-interface-to-code">Command-line interface to code<a class="anchor" aria-label="anchor" href="#command-line-interface-to-code"></a>
</h2>
<hr class="half-width">
<p>A common way to structure code is to have a command-line interface to
allow the passing of various parameters. For example, we can pass the
input data file to be read and the output file to be written to as
parameters to our script and avoid hard-coding them. This improves
interoperability and reusability of our code as it can now be run over
any data file of the same structure, invoked from the command line
terminal and integrated into other scripts or workflows/pipelines. For
example, another script can produce our input data and can be “chained”
with our code in a more complex data analysis pipeline. Another use case
would be invoking our script in a loop to automatically analyse a number
of input data files (compare that to running the script manually over
hundreds or thousands of files - which is slow, error-prone and requires
manual intervention).</p>
<p>There is a common code structure (pattern) for writing code with a
command-line interface in Python:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># import modules</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="kw">def</span> main(args):</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>    <span class="co"># perform some actions</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>    <span class="co"># perform some actions before main()</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>    main(args)</span></code></pre>
</div>
<p>In this pattern the main actions performed by the script are
contained within the <code>main</code> function (which does not need to
be called <code>main</code>, but using this convention helps others in
understanding your code). The <code>main</code> function is then called
within the <code>if</code> statement
<code>__name__ == "__main__"</code>, after some other actions have been
performed (usually the parsing of command-line arguments, which will be
explained below). <code>__name__</code> is a special variable which is
set by the Python interpreter before the execution of any code in the
source file. What value is given by the interpreter to
<code>__name__</code> is determined by the manner in which the script is
invoked.</p>
<p>If we run the source file directly using the Python interpreter,
e.g.:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">$</span> python3 eva_data_analysis.py</span></code></pre>
</div>
<p>then the interpreter will assign the hard-coded string
<code>"__main__"</code> to the <code>__name__</code> variable:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="va">__name__</span> <span class="op">=</span> <span class="st">"__main__"</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>...</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co"># rest of your code</span></span></code></pre>
</div>
<p>However, if your script is imported by another Python script, e.g. in
order to reuse its functions, with:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">import</span> eva_data_analysis</span></code></pre>
</div>
<p>then the Python interpreter will assign the name “eva_data_analysis”
from the import statement to the <code>__name__</code> variable (note
that import statement matches our script’s name):</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="va">__name__</span> <span class="op">=</span> <span class="st">"eva_data_analysis"</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>...</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co"># rest of your code</span></span></code></pre>
</div>
<p>Because of this behaviour of the Python interpreter, we can put any
code that should only be executed when running the script directly
within the <code>if __name__ == "__main__":</code> structure, allowing
the rest of the code within the script to be safely imported by another
script if we so wish.</p>
<p>While it may not seem very useful to have your script importable by
another script, there are a number of situations in which you would want
to do this:</p>
<ul>
<li>for testing of your code, you can have your testing framework import
your script, and run special test functions which then call the
<code>main</code> function directly;</li>
<li>where you want to not only be able to run your script from the
command-line, but also provide a programmer-friendly application
programming interface (API) for advanced users.</li>
</ul>
<p>We will use the <code>sys</code> library to read the command line
arguments passed to our script and make them available in our code as a
list - remember to import this library first.</p>
<p>Our modified code will now look as follows.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="kw">def</span> main(input_file, output_file, graph_file):</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a>    write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="co">        input_file (str): The path to the JSON file.</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb9-30"><a href="#cb9-30" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-31"><a href="#cb9-31" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-32"><a href="#cb9-32" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb9-33"><a href="#cb9-33" tabindex="-1"></a></span>
<span id="cb9-34"><a href="#cb9-34" tabindex="-1"></a></span>
<span id="cb9-35"><a href="#cb9-35" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb9-36"><a href="#cb9-36" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-37"><a href="#cb9-37" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb9-38"><a href="#cb9-38" tabindex="-1"></a></span>
<span id="cb9-39"><a href="#cb9-39" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-40"><a href="#cb9-40" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb9-41"><a href="#cb9-41" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb9-42"><a href="#cb9-42" tabindex="-1"></a></span>
<span id="cb9-43"><a href="#cb9-43" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-44"><a href="#cb9-44" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb9-45"><a href="#cb9-45" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-46"><a href="#cb9-46" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb9-47"><a href="#cb9-47" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb9-48"><a href="#cb9-48" tabindex="-1"></a></span>
<span id="cb9-49"><a href="#cb9-49" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb9-50"><a href="#cb9-50" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-51"><a href="#cb9-51" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb9-52"><a href="#cb9-52" tabindex="-1"></a></span>
<span id="cb9-53"><a href="#cb9-53" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-54"><a href="#cb9-54" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb9-55"><a href="#cb9-55" tabindex="-1"></a></span>
<span id="cb9-56"><a href="#cb9-56" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-57"><a href="#cb9-57" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb9-58"><a href="#cb9-58" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-59"><a href="#cb9-59" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb9-60"><a href="#cb9-60" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span>  <span class="co"># there is an intentional bug on this line (should divide by 60 not 6)</span></span>
<span id="cb9-61"><a href="#cb9-61" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span>
<span id="cb9-62"><a href="#cb9-62" tabindex="-1"></a></span>
<span id="cb9-63"><a href="#cb9-63" tabindex="-1"></a></span>
<span id="cb9-64"><a href="#cb9-64" tabindex="-1"></a><span class="kw">def</span> add_duration_hours_variable(df):</span>
<span id="cb9-65"><a href="#cb9-65" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-66"><a href="#cb9-66" tabindex="-1"></a><span class="co">    Add duration in hours (duration_hours) variable to the dataset</span></span>
<span id="cb9-67"><a href="#cb9-67" tabindex="-1"></a></span>
<span id="cb9-68"><a href="#cb9-68" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-69"><a href="#cb9-69" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb9-70"><a href="#cb9-70" tabindex="-1"></a></span>
<span id="cb9-71"><a href="#cb9-71" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-72"><a href="#cb9-72" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new duration_hours variable added</span></span>
<span id="cb9-73"><a href="#cb9-73" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-74"><a href="#cb9-74" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb9-75"><a href="#cb9-75" tabindex="-1"></a>    df_copy[<span class="st">"duration_hours"</span>] <span class="op">=</span> df_copy[<span class="st">"duration"</span>].<span class="bu">apply</span>(</span>
<span id="cb9-76"><a href="#cb9-76" tabindex="-1"></a>        text_to_duration</span>
<span id="cb9-77"><a href="#cb9-77" tabindex="-1"></a>    )</span>
<span id="cb9-78"><a href="#cb9-78" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb9-79"><a href="#cb9-79" tabindex="-1"></a></span>
<span id="cb9-80"><a href="#cb9-80" tabindex="-1"></a></span>
<span id="cb9-81"><a href="#cb9-81" tabindex="-1"></a><span class="kw">def</span> plot_cumulative_time_in_space(df, graph_file):</span>
<span id="cb9-82"><a href="#cb9-82" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-83"><a href="#cb9-83" tabindex="-1"></a><span class="co">    Plot the cumulative time spent in space over years</span></span>
<span id="cb9-84"><a href="#cb9-84" tabindex="-1"></a></span>
<span id="cb9-85"><a href="#cb9-85" tabindex="-1"></a><span class="co">    Convert the duration column from strings to number of hours</span></span>
<span id="cb9-86"><a href="#cb9-86" tabindex="-1"></a><span class="co">    Calculate cumulative sum of durations</span></span>
<span id="cb9-87"><a href="#cb9-87" tabindex="-1"></a><span class="co">    Generate a plot of cumulative time spent in space over years and</span></span>
<span id="cb9-88"><a href="#cb9-88" tabindex="-1"></a><span class="co">    save it to the specified location</span></span>
<span id="cb9-89"><a href="#cb9-89" tabindex="-1"></a></span>
<span id="cb9-90"><a href="#cb9-90" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb9-91"><a href="#cb9-91" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb9-92"><a href="#cb9-92" tabindex="-1"></a><span class="co">        graph_file (str): The path to the output graph file.</span></span>
<span id="cb9-93"><a href="#cb9-93" tabindex="-1"></a></span>
<span id="cb9-94"><a href="#cb9-94" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-95"><a href="#cb9-95" tabindex="-1"></a><span class="co">        None</span></span>
<span id="cb9-96"><a href="#cb9-96" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-97"><a href="#cb9-97" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb9-98"><a href="#cb9-98" tabindex="-1"></a>    df <span class="op">=</span> add_duration_hours_variable(df)</span>
<span id="cb9-99"><a href="#cb9-99" tabindex="-1"></a>    df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb9-100"><a href="#cb9-100" tabindex="-1"></a>    plt.plot(df.date, df.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb9-101"><a href="#cb9-101" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb9-102"><a href="#cb9-102" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb9-103"><a href="#cb9-103" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb9-104"><a href="#cb9-104" tabindex="-1"></a>    plt.savefig(graph_file)</span>
<span id="cb9-105"><a href="#cb9-105" tabindex="-1"></a>    plt.show()</span>
<span id="cb9-106"><a href="#cb9-106" tabindex="-1"></a></span>
<span id="cb9-107"><a href="#cb9-107" tabindex="-1"></a></span>
<span id="cb9-108"><a href="#cb9-108" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb9-109"><a href="#cb9-109" tabindex="-1"></a></span>
<span id="cb9-110"><a href="#cb9-110" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb9-111"><a href="#cb9-111" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'./eva-data.json'</span></span>
<span id="cb9-112"><a href="#cb9-112" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'./eva-data.csv'</span></span>
<span id="cb9-113"><a href="#cb9-113" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb9-114"><a href="#cb9-114" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb9-115"><a href="#cb9-115" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb9-116"><a href="#cb9-116" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb9-117"><a href="#cb9-117" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb9-118"><a href="#cb9-118" tabindex="-1"></a></span>
<span id="cb9-119"><a href="#cb9-119" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'./cumulative_eva_graph.png'</span></span>
<span id="cb9-120"><a href="#cb9-120" tabindex="-1"></a>    main(input_file, output_file, graph_file)</span></code></pre>
</div>
<p>We can now run our script from the command line passing the JSON
input data file and CSV output data file as:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py eva-data.json eva-data.csv</span></code></pre>
</div>
<p>Remember to commit our changes.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git status</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add command line functionality to script"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="directory-structure-for-software-projects">Directory structure for software projects<a class="anchor" aria-label="anchor" href="#directory-structure-for-software-projects"></a>
</h2>
<hr class="half-width">
<p>Expanding on the code structure theme, following conventions on
consistent and informative directory structure for your projects will
ensure people will immediately know where to find things within your
project, especially helpful for long-term research projects or when
working in teams. The directory structure for organising your research
software project (or research projects in general) involves creating a
clear and logical layout for files and data, ensuring easy navigation,
collaboration and reproducibility.</p>
<p>Below are some good practices for setting up and maintaining a
research project directory structure.</p>
<ol style="list-style-type: decimal">
<li>
<strong>Top-level directory</strong>
<ul>
<li>Put all files related to a project into a single directory</li>
<li>Choose a meaningful name that reflects the project’s purpose or
topic.</li>
</ul>
</li>
<li>
<strong>Subdirectories</strong> - organise the project into clear,
well-labeled sub-directories based on the type of content. Common
categories include:
<ul>
<li>Data - store raw, intermediate, and processed data in separate
sub-directories to maintain clarity and avoid overwriting and losing
your raw data</li>
<li>Code/scripts/src - for storing your source code</li>
<li>Results - for storing analysis outputs, summary statistics, or any
data generated after processing.</li>
<li>Documentation - include a detailed project description and
documentation on how the project is organised, methodologies, and file
dependencies.</li>
<li>Figures/Plots - store all visualisations like charts, graphs, and
figures generated from the analysis (these can also go in the results
directory).</li>
<li>References - a folder for research papers, articles, or any other
literature cited or referenced in the project.</li>
</ul>
</li>
<li>
<strong>Naming conventions</strong>
<ul>
<li>Avoid special characters or spaces (they can cause errors when read
by computers); use underscores (_) or hyphens (-) instead</li>
<li>Name files to reflect their contents, version, or date (or use
version control to track different versions).</li>
</ul>
</li>
<li>
<strong>Use version control</strong>
<ul>
<li>Code and data should be version controlled; you can also version
control manuscripts, results, etc.</li>
<li>If data files are too large (or contain sensitive information) to
track by version control, untrack them using
<code>.gitignore</code>
</li>
<li>Use tags/releases to mark specific versions of results (a version
submitted to a journal, dissertation version, poster version, etc.) so
as to avoid using version numbers in file names and proliferation of
different files.</li>
</ul>
</li>
</ol>
<p>Below is an example diagram of a project structure that follows these
practices:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>project_name/
├── README.md             # overview of the project
├── data/                 # data files used in the project
│   ├── README.md         # describes where data came from
│   ├── raw/
│   └── processed/
├── manuscript/           # manuscript describing the results
├── results/              # results of the analysis (data, tables)
│   ├── preliminary/
│   └── final/
├── figures/              # results of the analysis (figures)
│   ├── comparison_plot.png
│   └── regression_chart.pdf
├── src/                  # contains source code for the project
│   ├── LICENSE           # license for your code
│   ├── requirements.txt  # software requirements and dependencies
│   ├── main_script.py    # main script/code entry point
│   └── ...
├── doc/                  # documentation for your project
├── index.rst             # entry point into the documentation website
└── ...</code></pre>
</div>
<div id="challenge1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div class="callout-inner">
<h3 class="callout-title">Challenge</h3>
<div class="callout-content">
<p>Refactor your software project so that input data is stored in
<code>data/</code> directory and results (the graph and CSV data files)
saved in <code>results/</code> directory off the project root.</p>
<p>Remove current result files <code>eva-data.csv</code> and
<code>cumulative_eva_graph.png</code> from the project root (if they
exist) as they will be recreated by re-running the code.</p>
<p>Remember to create the <code>results/</code> empty directory before
running the code or your code will fail.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Create <code>data/</code> folder and move the data file into it.
Create an empty <code>results</code> folder too.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">mkdir</span> data</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">mv</span> eva-data.json data/</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">mkdir</span> results</span></code></pre>
</div>
<p>Updated code:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="kw">def</span> main(input_file, output_file, graph_file):</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>    write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="kw">def</span> read_json_to_dataframe(input_file):</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="co">    Read the data from a JSON file into a Pandas dataframe.</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a><span class="co">    Clean the data by removing any incomplete rows and sort by date</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a><span class="co">        input_file (str): The path to the JSON file.</span></span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a><span class="co">         eva_df (pd.DataFrame): The cleaned and sorted data as a dataframe structure</span></span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Reading JSON file </span><span class="sc">{</span>input_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a>    eva_df <span class="op">=</span> pd.read_json(input_file, convert_dates<span class="op">=</span>[<span class="st">'date'</span>])</span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a>    eva_df[<span class="st">'eva'</span>] <span class="op">=</span> eva_df[<span class="st">'eva'</span>].astype(<span class="bu">float</span>)</span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a>    eva_df.dropna(axis<span class="op">=</span><span class="dv">0</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a>    eva_df.sort_values(<span class="st">'date'</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a>    <span class="cf">return</span> eva_df</span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a></span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a></span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a><span class="kw">def</span> write_dataframe_to_csv(df, output_file):</span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a><span class="co">    Write the dataframe to a CSV file.</span></span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a><span class="co">        output_file (str): The path to the output CSV file.</span></span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a></span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a><span class="co">        (None):</span></span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb14-48"><a href="#cb14-48" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb14-49"><a href="#cb14-49" tabindex="-1"></a>    df.to_csv(output_file, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb14-50"><a href="#cb14-50" tabindex="-1"></a></span>
<span id="cb14-51"><a href="#cb14-51" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb14-52"><a href="#cb14-52" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb14-53"><a href="#cb14-53" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb14-54"><a href="#cb14-54" tabindex="-1"></a></span>
<span id="cb14-55"><a href="#cb14-55" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb14-56"><a href="#cb14-56" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb14-57"><a href="#cb14-57" tabindex="-1"></a></span>
<span id="cb14-58"><a href="#cb14-58" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb14-59"><a href="#cb14-59" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb14-60"><a href="#cb14-60" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb14-61"><a href="#cb14-61" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb14-62"><a href="#cb14-62" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span>  <span class="co"># there is an intentional bug on this line (should divide by 60 not 6)</span></span>
<span id="cb14-63"><a href="#cb14-63" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span>
<span id="cb14-64"><a href="#cb14-64" tabindex="-1"></a></span>
<span id="cb14-65"><a href="#cb14-65" tabindex="-1"></a></span>
<span id="cb14-66"><a href="#cb14-66" tabindex="-1"></a><span class="kw">def</span> add_duration_hours_variable(df):</span>
<span id="cb14-67"><a href="#cb14-67" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb14-68"><a href="#cb14-68" tabindex="-1"></a><span class="co">    Add duration in hours (duration_hours) variable to the dataset</span></span>
<span id="cb14-69"><a href="#cb14-69" tabindex="-1"></a></span>
<span id="cb14-70"><a href="#cb14-70" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb14-71"><a href="#cb14-71" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb14-72"><a href="#cb14-72" tabindex="-1"></a></span>
<span id="cb14-73"><a href="#cb14-73" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb14-74"><a href="#cb14-74" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df_ with the new duration_hours variable added</span></span>
<span id="cb14-75"><a href="#cb14-75" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb14-76"><a href="#cb14-76" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb14-77"><a href="#cb14-77" tabindex="-1"></a>    df_copy[<span class="st">"duration_hours"</span>] <span class="op">=</span> df_copy[<span class="st">"duration"</span>].<span class="bu">apply</span>(</span>
<span id="cb14-78"><a href="#cb14-78" tabindex="-1"></a>        text_to_duration</span>
<span id="cb14-79"><a href="#cb14-79" tabindex="-1"></a>    )</span>
<span id="cb14-80"><a href="#cb14-80" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb14-81"><a href="#cb14-81" tabindex="-1"></a></span>
<span id="cb14-82"><a href="#cb14-82" tabindex="-1"></a></span>
<span id="cb14-83"><a href="#cb14-83" tabindex="-1"></a><span class="kw">def</span> plot_cumulative_time_in_space(df, graph_file):</span>
<span id="cb14-84"><a href="#cb14-84" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb14-85"><a href="#cb14-85" tabindex="-1"></a><span class="co">    Plot the cumulative time spent in space over years</span></span>
<span id="cb14-86"><a href="#cb14-86" tabindex="-1"></a></span>
<span id="cb14-87"><a href="#cb14-87" tabindex="-1"></a><span class="co">    Convert the duration column from strings to number of hours</span></span>
<span id="cb14-88"><a href="#cb14-88" tabindex="-1"></a><span class="co">    Calculate cumulative sum of durations</span></span>
<span id="cb14-89"><a href="#cb14-89" tabindex="-1"></a><span class="co">    Generate a plot of cumulative time spent in space over years and</span></span>
<span id="cb14-90"><a href="#cb14-90" tabindex="-1"></a><span class="co">    save it to the specified location</span></span>
<span id="cb14-91"><a href="#cb14-91" tabindex="-1"></a></span>
<span id="cb14-92"><a href="#cb14-92" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb14-93"><a href="#cb14-93" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe.</span></span>
<span id="cb14-94"><a href="#cb14-94" tabindex="-1"></a><span class="co">        graph_file (str): The path to the output graph file.</span></span>
<span id="cb14-95"><a href="#cb14-95" tabindex="-1"></a></span>
<span id="cb14-96"><a href="#cb14-96" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb14-97"><a href="#cb14-97" tabindex="-1"></a><span class="co">        (None):</span></span>
<span id="cb14-98"><a href="#cb14-98" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb14-99"><a href="#cb14-99" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Plotting cumulative spacewalk duration and saving to </span><span class="sc">{</span>graph_file<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb14-100"><a href="#cb14-100" tabindex="-1"></a>    df <span class="op">=</span> add_duration_hours_variable(df)</span>
<span id="cb14-101"><a href="#cb14-101" tabindex="-1"></a>    df[<span class="st">'cumulative_time'</span>] <span class="op">=</span> df[<span class="st">'duration_hours'</span>].cumsum()</span>
<span id="cb14-102"><a href="#cb14-102" tabindex="-1"></a>    plt.plot(df.date, df.cumulative_time, <span class="st">'ko-'</span>)</span>
<span id="cb14-103"><a href="#cb14-103" tabindex="-1"></a>    plt.xlabel(<span class="st">'Year'</span>)</span>
<span id="cb14-104"><a href="#cb14-104" tabindex="-1"></a>    plt.ylabel(<span class="st">'Total time spent in space to date (hours)'</span>)</span>
<span id="cb14-105"><a href="#cb14-105" tabindex="-1"></a>    plt.tight_layout()</span>
<span id="cb14-106"><a href="#cb14-106" tabindex="-1"></a>    plt.savefig(graph_file)</span>
<span id="cb14-107"><a href="#cb14-107" tabindex="-1"></a>    plt.show()</span>
<span id="cb14-108"><a href="#cb14-108" tabindex="-1"></a></span>
<span id="cb14-109"><a href="#cb14-109" tabindex="-1"></a></span>
<span id="cb14-110"><a href="#cb14-110" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb14-111"><a href="#cb14-111" tabindex="-1"></a></span>
<span id="cb14-112"><a href="#cb14-112" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(sys.argv) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb14-113"><a href="#cb14-113" tabindex="-1"></a>        input_file <span class="op">=</span> <span class="st">'data/eva-data.json'</span></span>
<span id="cb14-114"><a href="#cb14-114" tabindex="-1"></a>        output_file <span class="op">=</span> <span class="st">'results/eva-data.csv'</span></span>
<span id="cb14-115"><a href="#cb14-115" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f'Using default input and output filenames'</span>)</span>
<span id="cb14-116"><a href="#cb14-116" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb14-117"><a href="#cb14-117" tabindex="-1"></a>        input_file <span class="op">=</span> sys.argv[<span class="dv">1</span>]</span>
<span id="cb14-118"><a href="#cb14-118" tabindex="-1"></a>        output_file <span class="op">=</span> sys.argv[<span class="dv">2</span>]</span>
<span id="cb14-119"><a href="#cb14-119" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">'Using custom input and output filenames'</span>)</span>
<span id="cb14-120"><a href="#cb14-120" tabindex="-1"></a></span>
<span id="cb14-121"><a href="#cb14-121" tabindex="-1"></a>    graph_file <span class="op">=</span> <span class="st">'results/cumulative_eva_graph.png'</span></span>
<span id="cb14-122"><a href="#cb14-122" tabindex="-1"></a>    main(input_file, output_file, graph_file)</span></code></pre>
</div>
<p>You can now run the code as:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">python3</span> eva_data_analysis.py</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Remember to commit your latest changes:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git status</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py data results</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Update project's directory structure"</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>A good directory structure helps keep a project organised, making it
easier to navigate, understand, and maintain. It promotes clear
separation of concerns, so related files and components are grouped
logically, which simplifies development and reduces the chance of
errors. A well-structured project also supports collaboration, as new
contributors can more easily find what they need, and it enables
smoother scaling, testing, and deployment as the codebase grows.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" data-bs-parent="#accordionSpoiler3" aria-labelledby="headingSpoiler3">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/06-code-correcteness" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/06-code-correcteness</a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>
<a href="https://coderefinery.github.io/reproducible-research/organizing-projects/" class="external-link">Organizing
your projects</a> chapter from the <a href="https://coderefinery.github.io/reproducible-research/intro/" class="external-link">CodeRefinery’s
Reproducible Research tutorial</a>
</li>
<li><a href="https://mitcommlab.mit.edu/broad/commkit/file-structure/" class="external-link">MIT
Broad Research Communication Lab’s “File Structure” guide</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Good practices for code and project structure are essential for
creating readable, accessible and reproducibile projects.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-06-code-correctness"><p>Content from <a href="06-code-correctness.html">Code correctness</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/06-code-correctness.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we verify that our code is correct?</li>
<li>How can we automate our software tests?</li>
<li>What makes a “good” test?</li>
<li>Which parts of our code should we prioritise for testing?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Explain why code testing is important and how this improves software
quality.</li>
<li>Describe the different types of software tests (unit tests,
integration tests, regression tests).</li>
<li>Implement unit tests to verify that function behave as expected
using the Python testing framework <code>pytest</code>.</li>
<li>Interpret the output from <code>pytest</code> to identify which
functions are not behaving as expected.</li>
<li>Write tests using typical values, edge cases and invalid inputs to
ensure that the code can handle extreme values and invalid inputs
appropriately.</li>
<li>Evaluate code coverage to identify how much of the codebase is being
tested and identify areas that need further tests.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have improved the structure and readability of our code -
it is much easier to test its functionality and improve it further. The
goal of software testing is to check that the actual results produced by
a piece of code meet our expectations, i.e. are correct.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/06-code-correctness" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/06-code-correctness</a></p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Activate your virtual environment </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="why-use-software-testing">Why use software testing?<a class="anchor" aria-label="anchor" href="#why-use-software-testing"></a>
</h2>
<hr class="half-width">
<p>Including testing in our research workflow helps us to produce
<strong>better software</strong> and conduct <strong>better
research</strong>:</p>
<ul>
<li>Software testing can help us be more productive as it helps us to
identify and fix problems with our code early and quickly and allows us
to demonstrate to ourselves and others that our code does what we claim.
More importantly, we can share our tests alongside our code, allowing
others to verify our software for themselves.</li>
<li>The act of writing tests encourages to structure our code as
individual functions and often results in a more
<strong>readable</strong>, modular and maintainable codebase that is
easier to extend or repurpose.</li>
<li>Software testing improves the <strong>accessibility</strong> and
<strong>reusability</strong> of our code - well-written software tests
capture the expected behaviour of our code and can be used alongside
documentation to help other developers quickly make sense of our code.
In addition, a well tested codebase allows developers to experiment with
new features safe in the knowledge that tests will reveal if their
changes have broken any existing functionality.</li>
<li>By demonstrating that our code works as expected and produces
accurate results, software testing can give us the confidence to share
our code with others. Software testing brings peace of mind by providing
a step-by-step approach that we can apply to verify that our code is
correct.</li>
</ul></section><section><h2 class="section-heading" id="types-of-software-tests">Types of software tests<a class="anchor" aria-label="anchor" href="#types-of-software-tests"></a>
</h2>
<hr class="half-width">
<p>There are many different types of software tests, including:</p>
<ul>
<li><p><strong>Unit tests</strong> focus on testing individual functions
in isolation. They ensure that each small part of the software performs
as intended. By verifying the correctness of these individual units, we
can catch errors early in the development process.</p></li>
<li><p><strong>Integration tests</strong> check how different parts of
the code e.g. functions work together.</p></li>
<li><p><strong>Regression tests</strong> are used to ensure that new
changes or updates to the codebase do not adversely affect the existing
functionality. They involve checking whether a program or part of a
program still generates the same results after changes have been
made.</p></li>
<li><p><strong>End-to-end</strong> tests are a special type of
integration testing which checks that a program as a whole behaves as
expected.</p></li>
</ul>
<p>In this course, our primary focus will be on unit testing. However,
the concepts and techniques we cover will provide a solid foundation
applicable to other types of testing.</p>
<div id="types-of-software-tests-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="types-of-software-tests-1" class="callout-inner">
<h3 class="callout-title">Types of software tests</h3>
<div class="callout-content">
<p>Fill in the blanks in the sentences below:</p>
<ul>
<li>__________ tests compare the ______ output of a program to its
________ output to demonstrate correctness.</li>
<li>Unit tests compare the actual output of a ______ ________ to the
expected output to demonstrate correctness.</li>
<li>__________ tests check that results have not changed since the
previous test run.</li>
<li>__________ tests check that two or more parts of a program are
working together correctly.</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ul>
<li>End-to-end tests compare the actual output of a program to the
expected output to demonstrate correctness.</li>
<li>Unit tests compare the actual output of a single function to the
expected output to demonstrate correctness.</li>
<li>Regression tests check that results have not changed since the
previous test run.</li>
<li>Integration tests check that two or more parts of a program are
working together correctly.</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="informal-testing">Informal testing<a class="anchor" aria-label="anchor" href="#informal-testing"></a>
</h2>
<hr class="half-width">
<p>How should we test our code? One approach is to copy/paste the code
or a function into a Python terminal - <em>different from a command line
terminal</em> - which allows you to interact with the Python interpreter
more directly. From the Python terminal we can then run one function or
a piece of code at a time and check that they behave as expected. As
input to our code/function we are testing, we typically use some input
values for which we know what the correct return value should be.</p>
<p>Let’s do this for our <code>text_to_duration</code> function. Recall
that the <code>text_to_duration</code> function converts a spacewalk
duration stored as a string in format “HH:MM” to a duration in hours -
e.g. duration <code>01:15</code> (1 hour and 15 minutes) should return a
numerical value of <code>1.25</code>.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">    Convert a text format duration "HH:MM" to duration in hours</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">        duration (str): The text format duration</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">        duration_hours (float): The duration in hours</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>    hours, minutes <span class="op">=</span> duration.split(<span class="st">":"</span>)</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>    <span class="cf">return</span> duration_hours</span></code></pre>
</div>
<p>To start a Python terminal, you simply type <code>python3</code>
(with no other parameters) from the root directory of your project in a
command line terminal.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span><span class="ex">$</span> python3</span></code></pre>
</div>
<p>This will open an interactive Python terminal for you, which may look
like this:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>Python <span class="fl">3.11.7</span> (main, Dec  <span class="dv">4</span> <span class="dv">2023</span>, <span class="dv">18</span>:<span class="dv">10</span>:<span class="dv">11</span>) [Clang <span class="fl">15.0.0</span> (clang<span class="op">-</span><span class="fl">1500.1.0.2.5</span>)] on darwin</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>Type <span class="st">"help"</span>, <span class="st">"copyright"</span>, <span class="st">"credits"</span> <span class="kw">or</span> <span class="st">"license"</span> <span class="cf">for</span> more information.</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> </span></code></pre>
</div>
<p>Once inside the Python terminal, you can start typing Python code.
The Python terminal will interactively run your code and return and
print results. We could copy and paste the code of our
<code>text_to_duration</code> function, but it is much simpler and more
elegant to import and then invoke it.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> <span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> text_to_duration(<span class="st">"10:00"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fl">10.0</span></span></code></pre>
</div>
<p>So, we have invoked our function with the value “10:00” and it
returned the floating point value “10.0” as expected.</p>
<p>We can then further explore the behaviour of our function by
running:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="op">&gt;&gt;&gt;</span> text_to_duration(<span class="st">"00:00"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fl">0.0</span></span></code></pre>
</div>
<p>This all seems correct so far.</p>
<p>Testing code in this “informal” way in an important process to go
through as we draft our code for the first time. Another tool that can
help here is the <a href="https://jupyter.org/" class="external-link">Jupyter Notebook</a> -
like the Python terminal, the Jupyter Notebook is an interactive
environment for writing and running code. It is a GUI tool which
supports all kinds of interactive outputs, including many interactive
visualisation libraries.</p>
<p>However, there are some serious drawbacks to this approach if used as
our only form of testing.</p>
<div id="what-are-the-limitations-of-informally-testing-code-5-minutes" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="what-are-the-limitations-of-informally-testing-code-5-minutes" class="callout-inner">
<h3 class="callout-title">What are the limitations of informally testing
code? (5 minutes)</h3>
<div class="callout-content">
<p>Think about the questions below. Your instructors may ask you to
share your answers in a shared notes document and/or discuss them with
other participants.</p>
<ul>
<li>Why might we choose to test our code informally?</li>
<li>What are the limitations of relying solely on informal tests to
verify that a piece of code is behaving as expected?</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>It can be tempting to test our code informally because this
approach:</p>
<ul>
<li>is quick and easy</li>
<li>provides immediate feedback</li>
</ul>
<p>However, there are limitations to this approach:</p>
<ul>
<li>Working interactively is error prone</li>
<li>We must reload our function in Python terminal each time we change
our code</li>
<li>We must repeat our tests every time we update our code which is time
consuming</li>
<li>We must rely on memory to keep track of how we have tested our code,
e.g. what input values we tried</li>
<li>We must rely on memory to keep track of which functions have been
tested and which have not (informal testing may work well on smaller
pieces of code but it becomes unpractical for a large codebase)</li>
<li>Once we close the Python terminal, we lose all the test scenarios we
have tried</li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="formal-testing">Formal testing<a class="anchor" aria-label="anchor" href="#formal-testing"></a>
</h2>
<hr class="half-width">
<p>We can overcome some of these limitations by formalising our testing
process. A formal approach to testing our code is to write dedicated
test functions to check it. These test functions:</p>
<ul>
<li>Run the function we want to test - the target function with known
inputs</li>
<li>Compare the output to known, valid results</li>
<li>Raise an error if the function’s actual output does not match the
expected output</li>
<li>Are recorded in a test script that can be re-run on demand.</li>
</ul>
<p>Let’s explore this process by writing some formal tests for our
<code>text_to_duration</code> function.</p>
<p>In VS Code, create a new Python file <code>test_code.py</code> in the
root of our project directory to store our tests.</p>
<p>Like before in the Python terminal, we need to import
<code>text_to_duration</code> into our test script. Then, we add our
first test function:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>    input_value <span class="op">=</span> <span class="st">"10:00"</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>    test_result <span class="op">=</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"text_to_duration('10:00') == 10? </span><span class="sc">{</span>test_result<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<p>We can run this code from the command line terminal as:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span><span class="ex">$</span> python3 test_code.py </span></code></pre>
</div>
<p>This test checks that when we apply <code>text_to_duration</code> to
input value <code>10:00</code>, the output matches the expected value of
<code>10</code>.</p>
<p>In this example, we use a print statement to report whether the
actual output from <code>text_to_duration</code> meets our
expectations.</p>
<p>However, this does not meet our requirement to “Raise an error if the
function’s output does not match the expected output” and means that we
must carefully read our test function’s output to identify whether it
has failed.</p>
<p>To ensure that our code raises an error if the function’s output does
not match the expected output, we use Python’s <code>assert</code>
statement. The <code>assert statement</code> in Python checks whether a
condition is <code>True</code> or <code>False</code>. If the statement
is <code>True</code>, <code>assert</code> does not return a value and
the code continues to run. However, if the statement is
<code>False</code>, <code>assert</code> raises an
<code>AssertError</code>.</p>
<p>Let’s rewrite our test with an <code>assert</code> statement:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<p>Notice that when we run <code>test_text_to_duration_integer()</code>,
nothing happens - there is no output. That is because our function is
working correctly and returning the expected value of 10.</p>
<p>Let’s add another test to check what happens when duration is not an
integer number and if our function can handle durations with a non-zero
minute component, and rerun our test code.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:15"</span>) <span class="op">==</span> <span class="fl">10.25</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>test_text_to_duration_float()</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>(venv_spacewalks) $ python3 test_code.py
Traceback (most recent call last):
  File "/Users/user/Desktop/spacewalks/test_code.py", line 9, in &lt;module&gt;
    test_text_to_duration_float()
  File "/Users/user/Desktop/spacewalks/test_code.py", line 4, in test_text_to_duration_float
    assert text_to_duration("10:15") == 10.25
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError</code></pre>
</div>
<p>Notice that this time, our test
<code>test_text_to_duration_float</code> fails. Our assert statement has
raised an <code>AssertionError</code> - a clear signal that there is a
problem in our code that we need to fix.</p>
<p>We know that duration <code>10:15</code> should be converted to
number <code>10.25</code>. What is wrong with our code? If we look at
our <code>text_to_duration</code> function, we may identify the
following line of our code as problematic:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">def</span> text_to_duration(duration):</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>    ...</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span> </span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>    ...</span></code></pre>
</div>
<p>You may notice that we have introduced a bug in one of the earlier
episodes when we refactored the code - the minutes component should have
been divided by 60 and not 6.</p>
<p>This is quite <em>critical</em> - our code was running (seemingly) OK
(i.e. it did not fail) and was producing the graph which we could not
tell was wrong just by looking at it as this was a subtle bug. We were
only able to uncover this bug <strong>by properly testing our
code</strong>.</p>
<p>Let’s fix the problematic line and rerun out tests.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>...</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">60</span> </span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>...</span></code></pre>
</div>
<p>This time our tests run without problem.</p>
<p>Should we add more tests or the tests we have so far are enough? What
happens if our duration value is <code>10:20</code> (ten hours and 20
minutes) and our result is not a rational floating point number (like
<code>10.25</code>) but an irrational number such as
<code>10.333333333</code>? Let’s tests for this.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:20"</span>) <span class="op">==</span> <span class="fl">10.333333</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>test_text_to_duration_float()</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>(venv_spacewalks) $ python3 test_code.py
Traceback (most recent call last):
  File "/Users/user/work/SSI/lessons/astronaut-data-analysis/test_code.py", line 17, in &lt;module&gt;
    test_text_to_duration_float()
  File "/Users/user/work/SSI/lessons/astronaut-data-analysis/test_code.py", line 9, in test_text_to_duration_float
    assert text_to_duration("10:20") == 10.333333
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError</code></pre>
</div>
<p>Our test is failing again - what is wrong now?</p>
<p>On computer systems, representation of irrational numbers is
typically not exact as they do not have an exact binary representation.
For this reason, we cannot use a simple double equals sign
(<code>==</code>) to compare the equality of floating point numbers.
Instead, we check that our floating point numbers are equal within a
very small tolerance (e.g. 1e-5). Hence, our code should look like:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>...</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">abs</span>(text_to_duration(<span class="st">"10:20"</span>) <span class="op">-</span> <span class="fl">10.33333333</span>) <span class="op">&lt;</span> <span class="fl">1e-5</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>...</span></code></pre>
</div>
<p>You may have noticed that we have to repeat a lot of code to add each
individual test for each test case. You may also have noticed that our
test script stopped after the first test failure and none of the tests
after that were run. To run our remaining tests we would have to
manually comment out our failing test and re-run the test script. As our
code base grows, testing in this way becomes cumbersome and error-prone.
These limitations can be overcome by automating our tests using a
<strong>testing framework</strong>.</p>
</section><section><h2 class="section-heading" id="testing-frameworks">Testing frameworks<a class="anchor" aria-label="anchor" href="#testing-frameworks"></a>
</h2>
<hr class="half-width">
<p>Testing frameworks can automatically find all the tests in our code
base, run all of them (so we do not have to invoke them explicitly or,
even worse, forget to invoke them), and present the test results as a
readable summary.</p>
<p>We will use the Python testing framework <code>pytest</code> with its
code coverage extension <code>pytest-cov</code>. To install these
libraries into our virtual environment, from the command line terminal
do:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip install pytest pytest-cov</span></code></pre>
</div>
<p>Let’s make sure that our tests are ready to work with
<code>pytest</code>.</p>
<ul>
<li>
<p><code>pytest</code> automatically discovers tests based on
specific naming patterns. It looks for files that start with “test_” or
end with “_test.py”. Then, within these files, <code>pytest</code> looks
for functions that start with “test_”. Our test file already meets these
requirements, so there is nothing to do here. However, our script does
contain lines to run each of our test functions. These are no-longer
required as <code>pytest</code> will run our tests so we can remove
them:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># Delete these 2 lines</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>test_text_to_duration_float()</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>test_text_to_duration_integer()</span></code></pre>
</div>
</li>
<li><p>It is also conventional when working with a testing framework to
place test files in a <code>tests</code> directory at the root of our
project and to name each test file after the code file that it targets.
This helps in maintaining a clean structure and makes it easier for
others to understand where the tests are located.</p></li>
</ul>
<p>A set of tests for a given piece of code is called a test suite. Our
test suite is currently located in the root folder of our project. Let’s
move it to a dedicated test folder and rename our
<code>test_code.py</code> file to <code>test_eva_analysis.py</code>.</p>
<p>You can do it from VS Code or by typing the following commands in the
command line terminal:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdir tests</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mv test_code.py tests/test_eva_analysis.py</span></code></pre>
</div>
<p>Before we re-run our tests using <code>pytest</code>, let’s update
our second test to use <code>pytest</code>’s function
<code>approx()</code> which is specifically intended for comparing
floating point numbers within a tolerance.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:20"</span>) <span class="op">==</span> pytest.approx(<span class="fl">10.33333333</span>)</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>    <span class="cf">assert</span> text_to_duration(<span class="st">"10:00"</span>) <span class="op">==</span> <span class="dv">10</span></span></code></pre>
</div>
<p>Let’s also add some inline comments to clarify what each test is
doing and expand our syntax to highlight the logic behind our
approach:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> text_to_duration</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_float():</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a><span class="co">    for typical durations with a non-zero minute component</span></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>    actual_result <span class="op">=</span> text_to_duration(<span class="st">"10:20"</span>) </span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="fl">10.33333333</span></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> pytest.approx(expected_result)</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>    </span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="kw">def</span> test_text_to_duration_integer():</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a><span class="co">    Test that text_to_duration returns expected ground truth values</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a><span class="co">    for typical whole hour durations </span></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>    actual_result <span class="op">=</span>  text_to_duration(<span class="st">"10:00"</span>)</span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>    </span></code></pre>
</div>
<p>Writing our tests this way highlights the key idea that each test
should compare the actual results returned by our function with expected
values.</p>
<p>Similarly, writing inline comments for our tests that complete the
sentence “Test that …” helps us to understand what each test is doing
and why it is needed.</p>
<p>We can now run our tests with <code>pytest</code> from our project’s
root directory (not from the <code>tests</code> directory):</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pytest </span></code></pre>
</div>
<p>Let’s now reintroduce our old bug in function
<code>text_to_duration</code> that affects the durations with a non-zero
minute component like “10:20” but not those that are whole hours,
e.g. “10:00”:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>    ...</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>    duration_hours <span class="op">=</span> <span class="bu">int</span>(hours) <span class="op">+</span> <span class="bu">int</span>(minutes)<span class="op">/</span><span class="dv">6</span>  <span class="co"># Divide by 6 instead of 60</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>    ...</span></code></pre>
</div>
<p>Let’s re-run our tests with <code>pytest</code> from our project’s
root directory (not from the <code>tests</code> directory):</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pytest </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>========================================== test session starts ===========================================
platform darwin -- Python 3.11.7, pytest-8.3.3, pluggy-1.5.0
rootdir: /Users/user/work/SSI/lessons/astronaut-data-analysis-not-so-good
plugins: cov-5.0.0
collected 2 items

tests/test_code.py F.                                                                                                                                                                                                                                                                                           [100%]

================================================ FAILURES ================================================
________________________________________ test_text_to_duration_float _____________________________________

    def test_text_to_duration_float():
&gt;       assert text_to_duration("10:20") == pytest.approx(10.33333333)
E       assert 13.333333333333334 == 10.33333333 ± 1.0e-05
E
E         comparison failed
E         Obtained: 13.333333333333334
E         Expected: 10.33333333 ± 1.0e-05

tests/test_code.py:5: AssertionError
=========================================== short test summary info =======================================
FAILED tests/test_code.py::test_text_to_duration_float - assert 13.333333333333334 == 10.33333333 ± 1.0e-05
========================================= 1 failed, 1 passed in 0.67s =====================================
</code></pre>
</div>
<p>From the above output from <code>pytest</code>’s execution of out
tests, we notice that:</p>
<ul>
<li>If a test function finishes without triggering an assertion, the
test is considered successful and is marked with a dot
(<code>.</code>).</li>
<li>If an assertion fails or an error occurs, the test is marked as a
failure with an <code>F</code>, and the output includes details about
the error to help identify what went wrong.</li>
</ul>
<p>Let’s fix our bug once again, and rerun our tests using
<code>pytest</code>.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>========================================== test session starts ===========================================
platform darwin -- Python 3.11.7, pytest-8.3.3, pluggy-1.5.0
rootdir: /Users/user/work/SSI/lessons/astronaut-data-analysis-not-so-good
plugins: cov-5.0.0
collected 2 items

tests/test_code.py ..                                                                                                                                                                                                                                                                                           [100%]

=========================================== 2 passed in 0.63s =============================================</code></pre>
</div>
<p>This time, all out tests passed.</p>
<div id="interpreting-pytest-output" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="interpreting-pytest-output" class="callout-inner">
<h3 class="callout-title">Interpreting pytest output</h3>
<div class="callout-content">
<p>A colleague has asked you to conduct a pre-publication review of
their code which analyses time spent in space by various individual
astronauts.</p>
<p>You tested their code using <code>pytest</code>, and got the
following output. Inspect it and answer the questions below.</p>
<div class="section level4">
<h4 id="example-pytest-output">Example <code>pytest</code> output<a class="anchor" aria-label="anchor" href="#example-pytest-output"></a>
</h4>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>============================================================ test session starts
platform darwin -- Python 3.12.3, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/Desktop/AnneResearcher/projects/Spacetravel
collected 9 items

tests/test_analyse.py FF....                                              [ 66%]
tests/test_prepare.py s..                                                 [100%]

====================================================================== FAILURES
____________________________________________________________ test_total_duration

    def test_total_duration():

      durations = [10, 15, 20, 5]
      expected  = 50/60
      actual  = calculate_total_duration(durations)
&gt;     assert actual == pytest.approx(expected)
E     assert 8.333333333333334 == 0.8333333333333334 ± 8.3e-07
E
E       comparison failed
E       Obtained: 8.333333333333334
E       Expected: 0.8333333333333334 ± 8.3e-07

tests/test_analyse.py:9: AssertionError
______________________________________________________________________________ test_mean_duration

    def test_mean_duration():
       durations = [10, 15, 20, 5]

       expected = 12.5/60
&gt;      actual  = calculate_mean_duration(durations)

tests/test_analyse.py:15:
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

durations = [10, 15, 20, 5]

    def calculate_mean_duration(durations):
        """
        Calculate the mean of a list of durations.
        """
        total_duration = sum(durations)/60
&gt;       mean_duration = total_duration / length(durations)
E       NameError: name 'length' is not defined

Spacetravel.py:45: NameError
=========================================================================== short test summary info
FAILED tests/test_analyse.py::test_total_duration - assert 8.333333333333334 == 0.8333333333333334 ± 8.3e-07
FAILED tests/test_analyse.py::test_mean_duration - NameError: name 'length' is not defined
============================================================== 2 failed, 6 passed, 1 skipped in 0.02s </code></pre>
</div>
<ol style="list-style-type: lower-alpha">
<li>How many tests has our colleague included in the test suite?</li>
<li>The first test in test_prepare.py has a status of s; what does this
mean?</li>
<li>How many tests failed?</li>
<li>Why did “test_total_duration” fail?</li>
<li>Why did “test_mean_duration” fail?</li>
</ol>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: lower-alpha">
<li>9 tests were detected in the test suite</li>
<li>s - stands for “skipped”,</li>
<li>2 tests failed: the first and second tests in test file
<code>test_analyse.py</code>
</li>
<li>
<code>test_total_duration</code> failed because the calculated total
duration differs from the expected value by a factor of 10 i.e. the
assertion <code>actual == pytest.approx(expected)</code> evaluated to
<code>False</code>
</li>
<li>
<code>test_mean_duration</code> failed because there is a syntax
error in <code>calculate_mean_duration</code>. Our colleague has used
the command <code>length</code> (not a python command) instead of
<code>len</code>. As a result, running the function returns a
<code>NameError</code> rather than a calculated value and the test
assertion evaluates to <code>False</code>.</li>
</ol>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="test-suite-design">Test suite design<a class="anchor" aria-label="anchor" href="#test-suite-design"></a>
</h2>
<hr class="half-width">
<p>We now have the tools in place to automatically run tests. However,
that alone is not enough to properly test code. We will now look into
what makes a good test suite and good practices for testing code.</p>
<p>Let’s start by considering the following scenario. A collaborator on
our project has sent us the following code which adds a new column
called <code>crew_size</code> to our data containing the number of
astronauts participating in any given spacewalk. How do we know that it
works as intended and that it will not break the rest of our code? For
this, we need to write a test suite with a comprehensive coverage of the
new code.</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="im">import</span> re <span class="co"># added this line</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="co"># https://data.nasa.gov/resource/eva.json (with modifications)</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a><span class="kw">def</span> main(input_file, output_file, graph_file):</span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--START--"</span>)</span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a>    eva_data <span class="op">=</span> read_json_to_dataframe(input_file)</span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a>    eva_data <span class="op">=</span> add_crew_size_column(eva_data) <span class="co"># added this line</span></span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a>    write_dataframe_to_csv(eva_data, output_file)</span>
<span id="cb28-16"><a href="#cb28-16" tabindex="-1"></a></span>
<span id="cb28-17"><a href="#cb28-17" tabindex="-1"></a>    plot_cumulative_time_in_space(eva_data, graph_file)</span>
<span id="cb28-18"><a href="#cb28-18" tabindex="-1"></a></span>
<span id="cb28-19"><a href="#cb28-19" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"--END--"</span>)</span>
<span id="cb28-20"><a href="#cb28-20" tabindex="-1"></a></span>
<span id="cb28-21"><a href="#cb28-21" tabindex="-1"></a>... </span>
<span id="cb28-22"><a href="#cb28-22" tabindex="-1"></a></span>
<span id="cb28-23"><a href="#cb28-23" tabindex="-1"></a><span class="kw">def</span> calculate_crew_size(crew):</span>
<span id="cb28-24"><a href="#cb28-24" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb28-25"><a href="#cb28-25" tabindex="-1"></a><span class="co">    Calculate the size of the crew for a single crew entry</span></span>
<span id="cb28-26"><a href="#cb28-26" tabindex="-1"></a></span>
<span id="cb28-27"><a href="#cb28-27" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb28-28"><a href="#cb28-28" tabindex="-1"></a><span class="co">        crew (str): The text entry in the crew column containing a list of crew member names</span></span>
<span id="cb28-29"><a href="#cb28-29" tabindex="-1"></a></span>
<span id="cb28-30"><a href="#cb28-30" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb28-31"><a href="#cb28-31" tabindex="-1"></a><span class="co">        (int): The crew size</span></span>
<span id="cb28-32"><a href="#cb28-32" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb28-33"><a href="#cb28-33" tabindex="-1"></a>    <span class="cf">if</span> crew.split() <span class="op">==</span> []:</span>
<span id="cb28-34"><a href="#cb28-34" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span>
<span id="cb28-35"><a href="#cb28-35" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb28-36"><a href="#cb28-36" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">len</span>(re.split(<span class="vs">r';'</span>, crew))<span class="op">-</span><span class="dv">1</span></span>
<span id="cb28-37"><a href="#cb28-37" tabindex="-1"></a></span>
<span id="cb28-38"><a href="#cb28-38" tabindex="-1"></a><span class="kw">def</span> add_crew_size_column(df):</span>
<span id="cb28-39"><a href="#cb28-39" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb28-40"><a href="#cb28-40" tabindex="-1"></a><span class="co">    Add crew_size column to the dataset containing the value of the crew size</span></span>
<span id="cb28-41"><a href="#cb28-41" tabindex="-1"></a></span>
<span id="cb28-42"><a href="#cb28-42" tabindex="-1"></a><span class="co">    Args:</span></span>
<span id="cb28-43"><a href="#cb28-43" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input data frame.</span></span>
<span id="cb28-44"><a href="#cb28-44" tabindex="-1"></a></span>
<span id="cb28-45"><a href="#cb28-45" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb28-46"><a href="#cb28-46" tabindex="-1"></a><span class="co">        df_copy (pd.DataFrame): A copy of df with the new crew_size variable added</span></span>
<span id="cb28-47"><a href="#cb28-47" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb28-48"><a href="#cb28-48" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'Adding crew size variable (crew_size) to dataset'</span>)</span>
<span id="cb28-49"><a href="#cb28-49" tabindex="-1"></a>    df_copy <span class="op">=</span> df.copy()</span>
<span id="cb28-50"><a href="#cb28-50" tabindex="-1"></a>    df_copy[<span class="st">"crew_size"</span>] <span class="op">=</span> df_copy[<span class="st">"crew"</span>].<span class="bu">apply</span>(</span>
<span id="cb28-51"><a href="#cb28-51" tabindex="-1"></a>        calculate_crew_size</span>
<span id="cb28-52"><a href="#cb28-52" tabindex="-1"></a>    )</span>
<span id="cb28-53"><a href="#cb28-53" tabindex="-1"></a>    <span class="cf">return</span> df_copy</span>
<span id="cb28-54"><a href="#cb28-54" tabindex="-1"></a>...</span>
<span id="cb28-55"><a href="#cb28-55" tabindex="-1"></a>    </span></code></pre>
</div>
<div class="section level3">
<h3 id="writing-good-tests">Writing good tests<a class="anchor" aria-label="anchor" href="#writing-good-tests"></a>
</h3>
<p>The aim of writing good tests is to verify that each of our functions
behaves as expected with the full range of inputs that it might
encounter. It is helpful to consider each argument of a function in turn
and identify the range of typical values it can take. Once we have
identified this typical range or ranges (where a function takes more
than one argument), we should:</p>
<ul>
<li>Test all values at the edge of the range</li>
<li>Test at least one interior point</li>
<li>Test invalid values</li>
</ul>
<p>Let’s have a look at the <code>calculate_crew_size</code> function
from our colleague’s new code and write some tests for it.</p>
<div id="unit-tests-for-calculate_crew_size" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="unit-tests-for-calculate_crew_size" class="callout-inner">
<h3 class="callout-title">Unit tests for calculate_crew_size</h3>
<div class="callout-content">
<p>Implement unit tests for the <code>calculate_crew_size</code>
function. Cover typical cases and edge cases.</p>
<p>Hint - use the following template when writing tests:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="kw">def</span> test_MYFUNCTION (): <span class="co"># </span><span class="al">FIXME</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="co">    Test that ...   #FIXME</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    </span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>    <span class="co"># Typical value 1</span></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>    actual_result <span class="op">=</span>  _______________ <span class="co">#FIXME</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>    expected_result <span class="op">=</span> ______________ <span class="co">#FIXME</span></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a>    </span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a>    <span class="co"># Typical value 2</span></span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a>    actual_result <span class="op">=</span>  _______________ <span class="co">#FIXME</span></span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a>    expected_result <span class="op">=</span> ______________ <span class="co">#FIXME</span></span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a>    </span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>We can add the following test functions to out test suite.</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="im">import</span> pytest</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="im">from</span> eva_data_analysis <span class="im">import</span> (</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>    text_to_duration,</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>    calculate_crew_size</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>)</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>...</span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size():</span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a><span class="co">    for typical crew values</span></span>
<span id="cb30-13"><a href="#cb30-13" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb30-14"><a href="#cb30-14" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Valentina Tereshkova;"</span>)</span>
<span id="cb30-15"><a href="#cb30-15" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb30-16"><a href="#cb30-16" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb30-17"><a href="#cb30-17" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Judith Resnik; Sally Ride;"</span>)</span>
<span id="cb30-19"><a href="#cb30-19" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb30-20"><a href="#cb30-20" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb30-21"><a href="#cb30-21" tabindex="-1"></a></span>
<span id="cb30-22"><a href="#cb30-22" tabindex="-1"></a><span class="co"># Edge cases</span></span>
<span id="cb30-23"><a href="#cb30-23" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size_edge_cases():</span>
<span id="cb30-24"><a href="#cb30-24" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb30-25"><a href="#cb30-25" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb30-26"><a href="#cb30-26" tabindex="-1"></a><span class="co">    for edge case where crew is an empty string</span></span>
<span id="cb30-27"><a href="#cb30-27" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb30-28"><a href="#cb30-28" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">""</span>)</span>
<span id="cb30-29"><a href="#cb30-29" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="kw">is</span> <span class="va">None</span></span></code></pre>
</div>
<p>Let’s run out tests:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pytest</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="parameterising-tests">Parameterising tests<a class="anchor" aria-label="anchor" href="#parameterising-tests"></a>
</h3>
<p>Looking at out new test functions, we may notice that they do not
follow the <a href="https://en.wikipedia.org/wiki/Don%27t_repeat_yourself" class="external-link">“Don’t
Repeat Yourself (DRY) principle”</a> which prevents software - including
testing code - from becoming repetitive and too long. In our test code,
a small block of code is repeated twice with different input values:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size():</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a><span class="co">    for typical crew values</span></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Valentina Tereshkova;"</span>)</span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(<span class="st">"Judith Resnik; Sally Ride;"</span>)</span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a>    expected_result <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span></code></pre>
</div>
<p>To avoid such repetitions in our test code, we use <strong>test
parameterisation</strong>. This allows us to apply our test function to
a list of input/expected output pairs without the need for repetition.
To parameterise the <code>test_calculate_crew_size</code> function, we
can rewrite is as follows:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="at">@pytest.mark.parametrize</span>(<span class="st">"input_value, expected_result"</span>, [</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a>    (<span class="st">"Valentina Tereshkova;"</span>, <span class="dv">1</span>),</span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a>    (<span class="st">"Judith Resnik; Sally Ride;"</span>, <span class="dv">2</span>),</span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a>])</span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a><span class="kw">def</span> test_calculate_crew_size(input_value, expected_result):</span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="co">    Test that calculate_crew_size returns expected ground truth values</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a><span class="co">    for typical crew values</span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a>    actual_result <span class="op">=</span> calculate_crew_size(input_value)</span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a>    <span class="cf">assert</span> actual_result <span class="op">==</span> expected_result</span></code></pre>
</div>
<p>Notice the following key changes to our code:</p>
<ul>
<li>The unparameterised version of <code>test_calculate_crew_size</code>
function did not have any arguments and our input/expected values were
all defined in the body of our test function.</li>
<li>In the parameterised version of
<code>test_calculate_crew_size</code>, the body of our test function has
been rewritten as a parameterised block of code that uses the variables
<code>input_value</code> and <code>expected_result</code> which are now
arguments of the test function.</li>
<li>A Python decorator <code>@pytest.mark.parametrize</code> is placed
immediately before the test function and indicates that it should be run
once for each set of parameters provided.</li>
</ul>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>In Python, a decorator is a function that can modify the behaviour of
another function. <code>@pytest.mark.parametrize</code> is a decorator
provided by <code>pytest</code> that modifies the behaviour of our test
function by running it multiple times - once for each set of inputs.
This decorator takes two main arguments:</p>
<ul>
<li><p>Parameter names: a string with the names of the parameters that
the test function will accept, separated by commas – in this case
“input_value” and “expected_value”</p></li>
<li><p>Parameter values: a list of tuples, where each tuple contains the
values for the parameters specified in the first argument.</p></li>
</ul>
</div>
</div>
</div>
<p>As you can see, the parameterised version of our test function is
shorter, more readable and easier to maintain.</p>
</div>
<div class="section level3">
<h3 id="just-enough-tests">Just enough tests<a class="anchor" aria-label="anchor" href="#just-enough-tests"></a>
</h3>
<p>In this episode, so far we have (only) written tests for two
individual functions: <code>text_to_duration</code> and
<code>calculate_crew_size</code>.</p>
<p>We can quantify the proportion of our code base that is run (also
referred to as “exercised”) by a given test suite using a metric called
code coverage:</p>
<p><span class="math display">\[ \text{Line Coverage} = \left(
\frac{\text{Number of Executed Lines}}{\text{Total Number of Executable
Lines}} \right) \times 100 \]</span></p>
<p>We can calculate our test coverage using the <code>pytest-cov</code>
library as follows.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pytest <span class="at">--cov</span> </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>========================================================== test session starts
platform darwin -- Python 3.12.3, pytest-8.2.2, pluggy-1.5.0
rootdir: /Users/AnnResearcher/Desktop/Spacewalks
plugins: cov-5.0.0
collected 4 items

tests/test_eva_data_analysis.py ....                                                                                               [100%]

---------- coverage: platform darwin, python 3.12.3-final-0 ----------
Name                              Stmts   Miss  Cover
-----------------------------------------------------
eva_data_analysis.py                 56     38    32%
tests/test_eva_data_analysis.py      20      0   100%
-----------------------------------------------------
TOTAL                                76     38    50%


=========================================================== 4 passed in 1.04s</code></pre>
</div>
<p>To get an in-depth report about which parts of our code are tested
and which are not, we can add the option
<code>--cov-report=html</code>.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pytest <span class="at">--cov</span> <span class="at">--cov-report</span><span class="op">=</span>html </span></code></pre>
</div>
<p>This option generates a folder <code>htmlcov</code> in the project
root directory containing a code coverage report in HTML format. This
provides structured information about our test coverage including:</p>
<ul>
<li>a table showing the proportion of lines in each function that are
currently tested, and</li>
<li>an annotated copy of our code where untested lines are highlighted
in red.</li>
</ul>
<p>Ideally, all the lines of code in our code base should be exercised
by at least one test. However, if we lack the time and resources to test
every line of our code we should:</p>
<ul>
<li>avoid testing Python’s built-in functions or functions imported from
well-known and well-tested libraries like <code>pandas</code> or
<code>numpy</code>.</li>
<li>focus on the the parts of our code that carry the greatest
“reputational risk”, i.e. that could affect the accuracy of our reported
results.</li>
</ul>
<div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Test coverage of less than 100% indicates that more testing may be
helpful.</p>
<p>Test coverage of 100% does not mean that our code is bug-free.</p>
</div>
</div>
</div>
<div id="evaluating-code-coverage" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="evaluating-code-coverage" class="callout-inner">
<h3 class="callout-title">Evaluating code coverage</h3>
<div class="callout-content">
<p>Generate the code coverage report for your software using the
<code>python3 -m pytest --cov --cov-report=html</code> command.</p>
<p>Inspect the <code>htmlcov</code> folder created by the above command
in the root directory of your propject, then open the
<code>htmlcov/index.html</code> file in a Web browser and extract the
following information:</p>
<ol style="list-style-type: lower-alpha">
<li>What proportion of the code base is currently “not” exercised by the
test suite?</li>
<li>Which functions in our code base are currently untested?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<ol style="list-style-type: lower-alpha">
<li>You can find this information on the “Files” tab of the HTML report
saved in the <code>htmlcov/index.html</code> file. The proportion of the
code base NOT covered by our tests is 68% (100% - 32%) - this may differ
for your version of the code.</li>
<li>You can find this information on the “Functions” tab of the HTML
report. The following functions in our code base are currently untested:
<ul>
<li>read_json_to_dataframe</li>
<li>write_dataframe_to_csv</li>
<li>add_duration_hours_variable</li>
<li>plot_cumulative_time_in_space</li>
<li>add_crew_size_variable</li>
</ul>
</li>
</ol>
</div>
</div>
</div>
</div>
<p>At this point, now is a good time to commit our test suite to our
codebase and push the changes to GitHub.</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py </span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add additional analysis functions"</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add tests/</span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add test suite"</span></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt</span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Added pytest and pytest-cov libraries."</span></span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="optional-more-practice-with-a-test-suite">(Optional) More practice with a test suite<a class="anchor" aria-label="anchor" href="#optional-more-practice-with-a-test-suite"></a>
</h3>
<p>There is an <a href="test-suite-exercise.html">optional exercise</a>
to implement additional tests and practice writing tests some more.</p>
</div>
</section><section><h2 class="section-heading" id="continuous-integration-for-automated-testing">Continuous Integration for automated testing<a class="anchor" aria-label="anchor" href="#continuous-integration-for-automated-testing"></a>
</h2>
<hr class="half-width">
<p>Continuous Integration (CI) services provide the infrastructure to
automatically run every test function in the test code suite every time
changes are pushed to a remote repository. There is an <a href="ci-for-testing.html">extra episode on configuring CI for automated
tests on GitHub</a> for some additional reading.</p>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>During this episode, we have covered how to use software tests to
verify the correctness of our code. We have seen how to write a unit
test, how to manage and run our tests using the <code>pytest</code>
framework and how identify which parts of our code require additional
testing using test coverage reports.</p>
<p>These skills reduce the probability that there will be a mistake in
our code and support reproducible research by giving us the confidence
to engage in open research practices. Tests also document the intended
behaviour of our code for other developers and mean that we can
experiment with changes to our code knowing that our tests will let us
know if we break any existing functionality. In other words, software
testing supports the <a href="https://www.nature.com/articles/s41597-022-01710-x" class="external-link">FAIR software
principles</a> by making our code more <strong>accessible</strong> and
<strong>reusable</strong>.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/07-software-documentation" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/07-software-documentation</a>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>
<a href="https://swcarpentry.github.io/python-novice-inflammation/10-defensive.html" class="external-link">The
Defensive Programming episode</a> from the Software Carpentry Python
Programming lesson</li>
<li>
<a href="https://www.software.ac.uk/blog/using-python-double-check-your-work" class="external-link">Using
Python to double check your work</a> (Software Sustainability Blog Post)
by Peter Inglesby</li>
<li>
<a href="https://carpentries-incubator.github.io/python-testing/" class="external-link">The
Python Testing and Continuous Integration</a> lesson on The Carpentries
Incubator by François Michonneau</li>
<li>
<a href="https://researchcodingclub.github.io/2019-11-13-test-driven-development/" class="external-link">Test
Driven Development</a> (University of York Research Coding Club Blog
Post) by Peter Hill and Stephen Biggs-Fox</li>
<li>
<a href="https://coderefinery.github.io/testing/" class="external-link">Automated testing
- Preventing yourself and others from breaking your functioning code</a>
Coderefinery lesson</li>
<li>
<a href="https://carpentries-incubator.github.io/python-intermediate-development/21-automatically-testing-software/index.html" class="external-link">The
Automatically Testing Software episode</a> from the Intermediate
Research Software Development lesson on The Carpentries Incubator by
Aleksandra Nenadic et al.</li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Code testing supports the FAIR principles by improving the
accessibility and re-usability of research code.</li>
<li>Unit testing is crucial as it ensures each functions works
correctly.</li>
<li>Using the <code>pytest</code> framework, you can write basic unit
tests for Python functions to verify their correctness.</li>
<li>Identifying and handling edge cases in unit tests is essential to
ensure your code performs correctly under a variety of conditions.</li>
<li>Test coverage can help you to identify parts of your code that
require additional testing.</li>
</ol>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-07-software-documentation"><p>Content from <a href="07-software-documentation.html">Software documentation</a></p>
<hr>
<p>Last updated on 2025-08-22 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/07-software-documentation.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How should we document our code?</li>
<li>Why are documentation and repository metadata important?</li>
<li>What are the minimum elements of documentation needed?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Use a <code>README</code> file to provide an overview and a
<code>CITATION.cff</code> file to add citation instructions to a code
repository</li>
<li>Describe the main types of software documentation (tutorials, how to
guides, reference and explanation).</li>
<li>Apply a documentation framework to write effective documentation of
any type.</li>
<li>Describe the different formats available for delivering software
documentation (Markdown files, wikis, static webpages).</li>
<li>Implement MkDocs to generate and manage comprehensive project
documentation</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We have seen how writing inline comments and docstrings within our
code can help with improving its readability. The purpose of software
documentation is to communicate other important information about our
software (its purpose, dependencies, how to install and run it, etc.) to
the people who need it – both users and developers.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/07-software-documentation" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/07-software-documentation</a></p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Activate your virtual environment </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="why-document-our-software">Why document our software?<a class="anchor" aria-label="anchor" href="#why-document-our-software"></a>
</h2>
<hr class="half-width">
<p>Software documentation is often perceived as a thankless and
time-consuming task with few tangible benefits and is often neglected in
research projects. However, like software testing, documenting our
software can help us and others conduct <strong>better research</strong>
and produce <a href="https://www.nature.com/articles/s41597-022-01710-x" class="external-link"><strong>FAIR
software</strong></a>:</p>
<ul>
<li>Good documentation captures important methodological details ready
for when we come to publish our research</li>
<li>Good documentation can help us return to a project seamlessly after
time away</li>
<li>Documentation can facilitate collaborations by helping us onboard
new project members quickly and more easily</li>
<li>Good documentation can save us time by answering frequently asked
questions (FAQs) about our code for us</li>
<li>Software documentation supports the <a href="https://www.nature.com/articles/s41597-022-01710-x" class="external-link">FAIR research
software principles</a> by improving the re-usability of our code.
<ul>
<li>Good documentation can make our software more understandable and
reusable by others, and can bring us some citations and credit</li>
<li>How-to guides and tutorials ensure that users can install our
software independently and make use of its basic features</li>
<li>Reference guides and background information can help developers
understand our code sufficiently to modify/extend/repurpose it.</li>
</ul>
</li>
</ul></section><section><h2 class="section-heading" id="code-level-documentation">Code-level documentation<a class="anchor" aria-label="anchor" href="#code-level-documentation"></a>
</h2>
<hr class="half-width">
<p>In previous episodes we encountered several different forms of
in-code documentation aspects, including in-line comments and
docstrings. These are an excellent way to improve the readability of our
code, but by themselves are insufficient to ensure that our code is easy
to use, understand and modify - this requires additional software-level
documentation.</p>
<p>There are many different types of software-level documentation.</p>
<div class="section level3">
<h3 id="technical-documentation">Technical documentation<a class="anchor" aria-label="anchor" href="#technical-documentation"></a>
</h3>
<p>Software-level technical documentation encompasses:</p>
<ul>
<li>Tutorials - lessons that guide learners through a series of
exercises to build proficiency using the code<br>
</li>
<li>How-To Guides - step by step instructions on how to accomplish
specific goals using the code.</li>
<li>Reference - a lookup manual to help users find relevant information
about the software e.g. functions and their parameters.</li>
<li>Explanation - conceptual discussion of the code to help users
understand implementation decisions</li>
</ul>
</div>
</section><section><h2 class="section-heading" id="project-level-documentation">Project-level documentation<a class="anchor" aria-label="anchor" href="#project-level-documentation"></a>
</h2>
<hr class="half-width">
<p>Project-level documentation includes various information and metadata
about software that help to discover it, explain the legal terms of
reusing it, describe its functionality on a high level and how to
install, run and contribute to it.</p>
<div class="section level3">
<h3 id="repository-metadata-files">Repository metadata files<a class="anchor" aria-label="anchor" href="#repository-metadata-files"></a>
</h3>
<p>A common way to to provide project-level documentation is to include
various metadata files in the software repository together with code.
Many of these files can be described as “social documentation”,
i.e. they indicate how users should “behave” in relation to our software
project. Some common examples of repository metadata files and their
role are explained below:</p>
<table class="table">
<colgroup>
<col width="7%">
<col width="92%">
</colgroup>
<thead><tr class="header">
<th>File</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>README</td>
<td>Provides an overview of the project, including installation, usage
instructions, dependencies and links to other metadata files and
technical documentation (tutorial/how-to/explanation/reference)</td>
</tr>
<tr class="even">
<td>CONTRIBUTING</td>
<td>Explains to developers how to contribute code to the project
including processes and standards that should be followed</td>
</tr>
<tr class="odd">
<td>CODE_OF_CONDUCT</td>
<td>Defines expected standards of conduct when engaging in a software
project</td>
</tr>
<tr class="even">
<td>LICENSE</td>
<td>Defines the (legal) terms of using, modifying and distributing the
code</td>
</tr>
<tr class="odd">
<td>CITATION</td>
<td>Provides instructions on how to cite the code</td>
</tr>
<tr class="even">
<td>AUTHORS</td>
<td>Provides information on who authored the code (can also be included
in CITATION)</td>
</tr>
</tbody>
</table>
<div id="just-enough-documentation" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="just-enough-documentation" class="callout-inner">
<h3 class="callout-title">Just enough documentation</h3>
<div class="callout-content">
<p>For many small projects the following three pieces of project-level
documentation may be sufficient: README, LICENSE and CITATION.</p>
</div>
</div>
</div>
<p>Let’s look at each of these files in turn.</p>
</div>
<div class="section level3">
<h3 id="readme-file">README file<a class="anchor" aria-label="anchor" href="#readme-file"></a>
</h3>
<p>A README file acts as a “landing page” for your code repository on
GitHub and should provide sufficient information for users to and
developers to get started using your code.</p>
<div id="readme-and-the-fair-principles" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="readme-and-the-fair-principles" class="callout-inner">
<h3 class="callout-title">README and the FAIR principles</h3>
<div class="callout-content">
<p>Think about the question below. Your instructors may ask you to share
your answer in a shared notes document and/or discuss them with other
participants.</p>
<p>Here are some of the major sections you might find in a typical
README. Which are <strong>essential</strong> to support the FAIR <a href="https://www.nature.com/articles/s41597-022-01710-x" class="external-link">software</a>
and <a href="https://www.nature.com/articles/sdata201618" class="external-link">data</a>
principles? Which are optional?</p>
<ul>
<li>Purpose of the code</li>
<li>Audience (who the code is intended for)</li>
<li>Installation instructions</li>
<li>Contribution guide</li>
<li>How to get help</li>
<li>License</li>
<li>Software citation</li>
<li>Usage example</li>
<li>Dependencies and their versions</li>
<li>FAQs</li>
<li>Code of Conduct</li>
</ul>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>To support the FAIR principles (Findability, Accessibility,
Interoperability, and Reusability), certain sections in a README file
are more important than others. Below is a breakdown of the sections
that are <em>essential</em> or <em>optional</em> in a README to align
with these principles.</p>
<div class="section level4">
<h4 id="essential">Essential<a class="anchor" aria-label="anchor" href="#essential"></a>
</h4>
<ul>
<li>
<strong>Purpose of the code</strong> - clearly explains what the
code does; essential for findability and reusability.</li>
<li>
<strong>Installation instructions</strong> - provides step-by-step
instructions on how to install the software, ensuring
accessibility.</li>
<li>
<strong>Usage Example</strong> - provides examples of how to use the
code, helping users understand its functionality and enhancing
reusability.</li>
<li>
<strong>License</strong>- specifies the terms under which the code
can be used, which is crucial for legal clarity and reusability.</li>
<li>
<strong>Dependencies and their versions</strong> - lists the
external libraries and tools required to run the code, including their
versions; essential for reproducibility and interoperability.</li>
<li>
<strong>Software citation</strong> - provides citation information
for academic use, ensuring proper attribution and reusability.</li>
</ul>
</div>
<div class="section level4">
<h4 id="optional">Optional<a class="anchor" aria-label="anchor" href="#optional"></a>
</h4>
<ul>
<li>
<strong>Audience (who the code is intended for)</strong> - helps
users identify if the code is relevant to them, improving findability
and usability.</li>
<li>
<strong>How to get help</strong> - informs users where they can get
help, ensuring better accessibility.</li>
<li>
<strong>Contribution guide</strong> - encourages and guides
contributions from the community, enhancing the code’s development and
reusability.</li>
<li>
<strong>FAQs</strong> - provide answers to common questions, aiding
in troubleshooting and improving accessibility.</li>
<li>
<strong>Code of Conduct</strong> - sets expectations for behaviour
in the community, fostering a welcoming environment and enhancing
accessibility.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Let’s create a simple README for our repository - from VS Code or
command line terminal create file <code>README.md</code> (in Markdown
format) or <code>README.txt</code> (in plain text format).</p>
<p>We can start by adding a one-liner that explains the purpose of our
code and who it is for.</p>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>You may want to share the following README excerpts directly in chat
or the shared notes document with learners to copy-paste.</p>
</div>
</div>
</div>
</div>
<pre class="code"><code># Spacewalks

## Overview
Spacewalks is a Python analysis tool for researchers to generate visualisations
and statistical summaries of NASA's extravehicular activity datasets.</code></pre>
<p>Now let’s add a list of Spacewalks’ key features:</p>
<pre class="code"><code>## Features
Key features of Spacewalks:

- Generates a CSV table of summary statistics of extravehicular activity crew sizes
- Generates a line plot to show the cumulative duration of space walks over time</code></pre>
<p>Now let’s tell users about any pre-requisites required to run the
software:</p>
<pre class="code"><code>## Pre-requisites

Spacewalks was developed using Python version 3.12

To install and run Spacewalks you will need have Python &gt;=3.12
installed. You will also need the following libraries (minimum versions in brackets)

- [NumPy](https://www.numpy.org/) &gt;=2.0.0 - Spacewalk's test suite uses NumPy's statistical functions
- [Matplotlib](https://matplotlib.org/stable/index.html) &gt;=3.0.0  - Spacewalks uses Matplotlib to make plots
- [pytest](https://docs.pytest.org/en/8.2.x/#) &gt;=8.2.0  - Spacewalks uses pytest for testing
- [pandas](https://pandas.pydata.org/) &gt;= 2.2.0 - Spacewalks uses pandas for data frame manipulation </code></pre>
<div id="spacewalks-readme" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="spacewalks-readme" class="callout-inner">
<h3 class="callout-title">Spacewalks README</h3>
<div class="callout-content">
<p>Extend the README for Spacewalks by adding:</p>
<ol style="list-style-type: decimal">
<li>Installation instructions</li>
<li>A simple usage example</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Installation instructions:</p>
<p>NB: In the solution below the back ticks of each code block have been
escaped to avoid rendering issues (if you are copying and pasting the
text, make sure you unescape them).</p>
<pre class="text"><code>## Installation instructions

- Clone the Spacewalks repository to your local machine using Git.
If you don't have Git installed, you can download it from the official Git website.

\`\`\`
git clone https://github.com/your-repository-url/spacewalks.git
cd spacewalks
\`\`\`

- Install the necessary dependencies:
\`\`\`
python3 -m pip install pandas==2.2.2 matplotlib==3.8.4 numpy==2.0.0 pytest==7.4.2
\`\`\`

- To ensure everything is working correctly, run the tests using pytest.

\`\`\`
python3 -m pytest
\`\`\`</code></pre>
<p>Usage instructions:</p>
<pre class="text"><code>## Usage Example

To run an analysis using the eva_data_analysis.py script from the command line terminal,
launch the script using Python as follows:

\`\`\`
# Usage Examples
python3 eva_data_analysis.py eva-data.json eva-data.csv
\`\`\`

The first argument is path to the JSON data file.
The second argument is the path the CSV output file.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="license-file">LICENSE file<a class="anchor" aria-label="anchor" href="#license-file"></a>
</h3>
<p>Copyright allows a creator of work (such as written text,
photographs, films, music, software code) to state that they own the
work they have created. Copyright is automatically implied - even if the
creator does not explicitly assert it, copyright of the work exists from
the moment of creation. A licence is a legal document which sets down
the terms under which the creator is releasing what they have created
for others to use, modify, extend or exploit.</p>
<p>Because any creative work is copyrighted the moment it is created,
even without any kind of licence agreement, it is important to state the
terms under which software can be reused. The lack of a licence for your
software implies that no one can reuse the software at all - hence it is
imperative you declare it. A common way to declare your copyright of a
piece of software and the license you are distributing it under is to
include a file called LICENSE in the root directory of your code
repository.</p>
<p>There is an optional extra <a href="licensing.html">episode in this
course on different open source software licences</a> that you can
choose for your code and that we recommend for further reading.</p>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" aria-labelledby="headingInstructor2" data-bs-parent="#accordionInstructor2">
<div class="accordion-body">
<p>Make sure to mention the <a href="licensing.html">extra content on
different open source software licences</a>, briefly cover it if there
is time, then focus on the technicalities of adding a license file to a
code repository (as there is likely not going to be enough time to spend
on different license types).</p>
</div>
</div>
</div>
</div>
<div id="tools-to-help-you-choose-a-licence" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="tools-to-help-you-choose-a-licence" class="callout-inner">
<h3 class="callout-title">Tools to help you choose a licence</h3>
<div class="callout-content">
<ul>
<li>A <a href="licensing.html">short intro</a> on different open source
software licences included as extra content to this course.</li>
<li>
<a href="https://opensource.guide/legal/#which-open-source-license-is-appropriate-for-my-project" class="external-link">The
open source guide</a> on applying, changing and editing licenses.</li>
<li>
<a href="https://choosealicense.com/" class="external-link">choosealicense.com</a> online
tool has some great resources to help you choose a license that is
appropriate for your needs, and can even automate adding the LICENSE
file to your GitHub code repository.</li>
</ul>
</div>
</div>
</div>
<div id="select-a-licence" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="select-a-licence" class="callout-inner">
<h3 class="callout-title">Select a licence</h3>
<div class="callout-content">
<p>Choose a license for your code. Discuss with your neighbour or the
group your choice of license and reason for choosing it.</p>
</div>
</div>
</div>
<div id="add-a-license-to-your-code" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="add-a-license-to-your-code" class="callout-inner">
<h3 class="callout-title">Add a license to your code</h3>
<div class="callout-content">
<p>Add a LICENSE file containing the full text of your chosen license to
your code repository.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Licence can be done in either of the following two ways:
<ol style="list-style-type: lower-alpha">
<li>Create a LICENSE file in the root of your software repository on
your local machine and copy into it the text of your chosen licence (you
can find it online). Push your local changes to your GitHub
repository.</li>
<li>In your repository on GitHub, go to <code>Add file</code> option and
start typing file name “LICENSE” - GitHub will recognise that you want
to add a licence and will offer you a choice of difference licences to
choose from. Select one and commit your changes, then do
<code>git pull</code> locally to bring those changes to your
machine.</li>
</ol>
</li>
<li>Add a copyright statement, the name of the license you are using and
a mention of the LICENSE file to at least one source code file
(e.g. <code>eva_data_analysis.py</code>)</li>
<li>Link to your LICENSE file from README to make this information about
your code more prominent.</li>
</ol>
<p>After completing the above, check the “About” section of your
repository’s GitHub landing webpage and see if there is now a license
listed.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="citation-file">CITATION file<a class="anchor" aria-label="anchor" href="#citation-file"></a>
</h3>
<p>We should add a citation file to our repository to provide
instructions on how to cite our code. A citation file can be a plain
text (CITATION.txt) or a Markdown file (CITATION.md), but there are
certain benefits to using use a special file format called the <a href="https://citation-file-format.github.io/" class="external-link">Citation File Format
(CFF)</a>, which provides a way to include richer metadata about code
(or datasets) we want to cite, making it easy for both humans and
machines to use this information.</p>
<div class="section level4">
<h4 id="why-use-cff">Why use CFF?<a class="anchor" aria-label="anchor" href="#why-use-cff"></a>
</h4>
<p>For developers, using a CFF file can help to automate the process of
publishing new releases on <a href="https://zenodo.org/" class="external-link">Zenodo</a> via
GitHub. GitHub also “understands” CFF, and will display citation
information prominently on the landing page of a repository that
contains citation info in CFF.</p>
<p>For users, having a CFF file makes it easy to cite the software or
dataset with formatted citation information available for copy+paste and
direct import from GitHub into reference managers like Zotero.</p>
</div>
<div class="section level4">
<h4 id="cff-file-format">CFF file format<a class="anchor" aria-label="anchor" href="#cff-file-format"></a>
</h4>
<p>A CFF file is using the <a href="https://yaml.org/" class="external-link">YAML</a>
key-value pair format. At a minimum a CFF file must contain the title of
the software/data, the type of asset (software or data) and at least one
author:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> My Software</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Anne</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Researcher</span></span></code></pre>
</div>
<p>Additional and optional metadata includes an abstract, repository URL
and more.</p>
</div>
<div class="section level4">
<h4 id="creating-cff-file-and-making-your-software-citable">Creating CFF file and making your software citable<a class="anchor" aria-label="anchor" href="#creating-cff-file-and-making-your-software-citable"></a>
</h4>
<p>We can create (and later update) a CFF file for our software using an
online application called <a href="https://bit.ly/cffinit" class="external-link"><code>cffinit</code></a> by following
these steps:</p>
<ol style="list-style-type: decimal">
<li><p>Head to <a href="https://bit.ly/cffinit" class="external-link"><code>cffinit</code>
online tool</a>.</p></li>
<li>
<p>Then, work through the metadata input form to complete the
minimum information needed to generate a CFF.</p>
<p>We can use the following description as an “Abstract”: “A Python
script to analyse NASA extravehicular activity data”</p>
<p>Add the URL of the code repository as a “Related Resources”.</p>
<p>Add at least two key words under the “Keywords” section.</p>
</li>
<li><p>At the end of the process, download the CFF file and inspect it.
It should look like this:</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Spacewalks</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Jaffa</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="at">    </span><span class="fu">name-particle</span><span class="kw">:</span><span class="at"> Sarah</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Aleksandra</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Nenadic</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Kamilla</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Kopec-Harding</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="fu">repository-code</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a>  https://github.com/YOUR-REPOSITORY-URL/spacewalks.git</span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="fu">abstract</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>  A Python script to analyse NASA extravehicular activity</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>  data</span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="fu">keywords</span><span class="kw">:</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> NASA</span></span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Extravehicular activity</span></span></code></pre>
</div>
<p>CFF files can also be updated using the <code>cffinit</code> online
tool by pasting the previous version of CFF file and working through the
form to update various fields.</p>
</div>
<div class="section level4">
<h4 id="citing">Citing<a class="anchor" aria-label="anchor" href="#citing"></a>
</h4>
<p>To cite our software (or dataset), once a CFF file has been pushed to
our remote repository, GitHub’s “Cite this repository” button can be
used to generate a citation in various formats (APA, BibTeX).</p>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>Further information is available from the <a href="https://book.the-turing-way.org/communication/citable/citable-cff.html" class="external-link">Turing
Way’s guide to software citation</a>.</p>
</div>
</div>
</div>
<div id="spacewalks-software-citation" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="spacewalks-software-citation" class="callout-inner">
<h3 class="callout-title">Spacewalks software citation</h3>
<div class="callout-content">
<p>Add the citation file for our Spacewalks software to the root folder
of our repository on GitHub. You can either do it directly on GitHub or
creating the file locally and the committing and pushing to GitHub from
the command line.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="documentation-tools">Documentation tools<a class="anchor" aria-label="anchor" href="#documentation-tools"></a>
</h2>
<hr class="half-width">
<p>Once our project reaches a certain size or level of complexity we may
want to add additional documentation such as a standalone tutorial or
“background” explaining our methodological choices.</p>
<p>Once we move beyond using a README as our primary source of
documentation, we need to consider how we will distribute our
documentation to our users. Options include:</p>
<ul>
<li>A <code>docs/</code> folder of Markdown files</li>
<li>Adding a Wiki to our repository</li>
<li>Creating a set of web pages for our documentation using a static
site generator for our documentation such as Sphinx or MkDocs.</li>
</ul>
<p>Creating a static site is a popular solution as it has the key
benefit being able to automatically generate a reference manual from any
docstrings we have added to our code.</p>
<div class="section level3">
<h3 id="mkdocs">MkDocs<a class="anchor" aria-label="anchor" href="#mkdocs"></a>
</h3>
<p>Let’s setup the static documentation site generator tool MkDocs.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> pip install mkdocs</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> pip install <span class="st">"mkdocstrings[python]"</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="ex">python3</span> <span class="at">-m</span> pip install mkdocs-material</span></code></pre>
</div>
<p>Let’s creates a new MkDocs project in the current directory:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># In ~/Desktop/spacewalks</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">mkdocs</span> new .    </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Writing config file: ./mkdocs.yml
INFO    -  Writing initial docs: ./docs/index.md</code></pre>
</div>
<p>This command creates a new MkDocs project in the current directory
with a <code>docs</code> folder containing an <code>index.md</code> file
and a <code>mkdocs.yml</code> configuration file in the root of our
project.</p>
<p>Now, let’s fill in the <code>mkdocs.yml</code> configuration file for
our project.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">site_name</span><span class="kw">:</span><span class="at"> Spacewalks Documentation</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="fu">use_directory_urls</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"material"</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="fu">font</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="fu">nav</span><span class="kw">:</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Spacewalks Documentation</span><span class="kw">:</span><span class="at"> index.md</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Tutorials</span><span class="kw">:</span><span class="at"> tutorials.md</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">How-To Guides</span><span class="kw">:</span><span class="at"> how-to-guides.md</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Reference</span><span class="kw">:</span><span class="at"> reference.md</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Background</span><span class="kw">:</span><span class="at"> explanation.md</span></span></code></pre>
</div>
<p>Note <code>font: false</code> variable is for GDPR compliance;
<code>use_directory_url: false</code> variable tells MKDocs tools how to
handle URLs for documentation that is served as a website (we will cover
this in a moment).</p>
<p>Let’s add support for <code>mkdocstrings</code> - this will allow us
to automatically add our docstrings into our documentation using a
simple tag.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">site_name</span><span class="kw">:</span><span class="at"> Spacewalks Documentation</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">use_directory_urls</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="fu">theme</span><span class="kw">:</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="at">  </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"material"</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="fu">font</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="fu">nav</span><span class="kw">:</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Spacewalks Documentation</span><span class="kw">:</span><span class="at"> index.md</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Tutorials</span><span class="kw">:</span><span class="at"> tutorials.md</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">How-To Guides</span><span class="kw">:</span><span class="at"> how-to-guides.md</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Reference</span><span class="kw">:</span><span class="at"> reference.md</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">Background</span><span class="kw">:</span><span class="at"> explanation.md</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="fu">plugins</span><span class="kw">:</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> mkdocstrings</span></span></code></pre>
</div>
<p>Let’s populate our <code>docs/</code> folder to match our
configuration file.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> touch docs/tutorials.md</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> touch docs/how-to-guides.md</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> touch docs/reference.md</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> touch docs/explanation.md</span></code></pre>
</div>
<p>Let’s populate our reference file <code>reference.md</code> with some
preamble to include before the reference manual that will be generated
from the docstrings we created.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>This file documents the key functions in the Spacewalks tool.</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>It is provided as a reference manual.</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>::: eva_data_analysis</span></code></pre>
</div>
<p>Finally, let’s build our documentation.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdocs build</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Cleaning site directory
INFO    -  Building documentation to directory: /Users/AnnResearcher/Desktop/Spacewalks/site
WARNING -  griffe: eva_data_analysis.py:105: No type or annotation for returned value 'int'
WARNING -  griffe: eva_data_analysis.py:84: No type or annotation for returned value 1
WARNING -  griffe: eva_data_analysis.py:33: No type or annotation for returned value 1
INFO    -  Documentation built in 0.31 seconds</code></pre>
</div>
<p>Once the build step is completed, our documentation site is saved to
a <code>site</code> folder in the root of our project folder. These
files will be distributed with our code. We can either direct users to
read these files locally on their own device using their browser, or we
can choose to host our documentation as a website that our uses can
navigate to.</p>
<p>Note that we used the setting <code>use_directory_urls: false</code>
in the <code>mkdocs.yml</code> file. This setting ensures that the
documentation site is generated with URLs that are easy to navigate
locally on a user’s device.</p>
<div id="explore-your-documentation" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="explore-your-documentation" class="callout-inner">
<h3 class="callout-title">Explore your documentation</h3>
<div class="callout-content">
<p>Explore documentation in <code>site/</code> folder built with MkDocs
for your project, starting from the <code>index.html</code> file.</p>
<p>Open <code>index.html</code> file in a Web browser to see how it
renders.</p>
<p>Check <code>site/reference.html</code> to see how docstrings from
your functions are provided here as a reference manual.</p>
</div>
</div>
</div>
<p>Finally, let us commit our documentation to the main branch of our
git repository and push the changes to GitHub.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add mkdocs.yml </span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add docs/</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add site/</span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add project-level documentation"</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 <span class="at">-m</span> pip freeze <span class="op">&gt;</span> requirements.txt</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add requirements.txt </span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Added mkdocs plugin"</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
<div id="hosting-documentation" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="hosting-documentation" class="callout-inner">
<h3 class="callout-title">Hosting documentation</h3>
<div class="callout-content">
<p>We saw how MkDocs documentation can be distributed with our
repository and viewed “offline” using a browser.</p>
<p>We can also make our documentation available as a live website by
deploying our documentation to a hosting service.</p>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Some options for hosting documentation </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<div class="section level3">
<h3 id="github-pages">GitHub Pages<a class="anchor" aria-label="anchor" href="#github-pages"></a>
</h3>
<p>As our repository is hosted in GitHub, we can use GitHub Pages - a
service that allows GitHub users to host websites directly from their
GitHub repositories.</p>
<p>There are two types of GitHub Pages: project pages and
user/organization Pages. While similar, they have different deployment
workflows, and we will only discuss project pages here. For information
about deploying to user/organisational pages, see <a href="https://www.mkdocs.org/user-guide/deploying-your-docs/" class="external-link">MkDocs
Deployment pages</a>.</p>
<p>Project Pages deploy site files to a branch (by default the
<code>gh-pages</code> branch, but it can be any other branch) within the
project repository. To deploy our documentation:</p>
<blockquote>
<p><strong>Warning!</strong> Before we proceed to the next step, we MUST
ensure that there are no uncommitted changes or untracked files in our
repository.</p>
<p>If there are, the commands used in the upcoming steps will include
them in our documentation!</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>(If not done already), let us commit our documentation to the main
branch of our git repository and push the changes to GitHub.</li>
</ol>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add mkdocs.yml </span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add docs/</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add site/</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Add project-level documentation"</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Once we are on the main branch and all our changes are up to date,
run the following command from the command line terminal to deploy our
documentation to GitHub.</li>
</ol>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Important: </span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co"># - This command will push the documentation to the gh-pages branch of your repository</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co"># - It will ALSO include uncommitted changes and untracked files (read the warning above!!) &lt;- VERY IMPORTANT!!</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdocs gh-deploy</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>INFO    -  Cleaning site directory
INFO    -  Building documentation to directory: /Users/AnnResearch/Desktop/Spacewalks/site
WARNING -  griffe: eva_data_analysis.py:105: No type or annotation for returned value 'int'
WARNING -  griffe: eva_data_analysis.py:84: No type or annotation for returned value 1
WARNING -  griffe: eva_data_analysis.py:33: No type or annotation for returned value 1
INFO    -  Documentation built in 0.37 seconds
WARNING -  Version check skipped: No version specified in previous deployment.
INFO    -  Copying '/Users/AnnResearcher/Desktop/Spacewalks/site' to 'gh-pages' branch and pushing to
           GitHub.
Enumerating objects: 63, done.
Counting objects: 100% (63/63), done.
Delta compression using up to 11 threads
Compressing objects: 100% (60/60), done.
Writing objects: 100% (63/63), 578.91 KiB | 7.93 MiB/s, done.
Total 63 (delta 7), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (7/7), done.
remote:
remote: Create a pull request for 'gh-pages' on GitHub by visiting:
remote:      https://github.com/kkh451/spacewalks/pull/new/gh-pages
remote:
To https://github.com/kkh451/spacewalks-dev.git
 * [new branch]      gh-pages -&gt; gh-pages
INFO    -  Your documentation should shortly be available at: https://kkh451.github.io/spacewalks/</code></pre>
</div>
<p>This command will build our documentation with MkDocs, then commit
and push the files to the <code>gh-pages</code> branch using the GitHub
<code>ghp-import</code> tool which is installed as a dependency of
MkDocs.</p>
<p>For more options, use:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">mkdocs</span> gh-deploy <span class="at">--help</span></span></code></pre>
</div>
<p>Notice that the deploy command did not allow us to preview the site
before it was pushed to GitHub; so, it is a good idea to check changes
locally with the build commands before deploying.</p>
</div>
<div class="section level3">
<h3 id="other-options">Other options<a class="anchor" aria-label="anchor" href="#other-options"></a>
</h3>
<p>You can find out about other deployment options including free
documentation hosting service ReadTheDocs on the <a href="https://www.mkdocs.org/user-guide/deploying-your-docs/" class="external-link">MkDocs
deployment pages</a>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="documentation-guides">Documentation guides<a class="anchor" aria-label="anchor" href="#documentation-guides"></a>
</h2>
<hr class="half-width">
<p>Once we start to consider other forms of documentation beyond the
README, we can also increase reusability of our code by ensuring that
the content and style of our documentation matches its purpose.</p>
<p>Documentation guides such as <a href="https://www.writethedocs.org/" class="external-link">Write the Docs</a>, <a href="https://www.thegooddocsproject.dev/" class="external-link">The Good Docs Project</a> and
the <a href="https://diataxis.fr/" class="external-link">Diataxis framework</a> provide a
range of resources including documentation templates to help to help us
do this.</p>
<div id="spacewalks-how-to-guide" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="spacewalks-how-to-guide" class="callout-inner">
<h3 class="callout-title">Spacewalks how-to guide</h3>
<div class="callout-content">
<ol style="list-style-type: lower-alpha">
<li><p>Review the Diataxis guidance page on writing a How-to guide.
Identify three features of an effective how-to guide.</p></li>
<li><p>Following the Diataxis guidelines, add a how-to guide to the
<code>docs/how-to-guides.md</code> file in your documentation folder to
show users how to change the destination filename for the output CSV
dataset generated by the Spacewalks software.</p></li>
</ol>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Discussion hints &amp; solution </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" aria-labelledby="headingSpoiler4" data-bs-parent="#accordionSpoiler4">
<div class="accordion-body">
<p>An effective how-to guide should:</p>
<ul>
<li>be goal oriented and focus on action.</li>
<li>avoid teaching or explanation</li>
<li>use appropriate language e.g. conditional imperatives</li>
<li>have an informative title</li>
</ul>
<p>An example how-to guide for our project to the file
<code>docs/how-to-guides.md</code>:</p>
<pre><code># How to change the file path of Spacewalk's output dataset

This guide shows you how to set the file path for Spacewalk's output
data set to a location of your choice.

By default, the cleaned data set in CSV format, generated by the Spacewalk software, is saved to the `results/`
folder within the working directory with file name `eva-data.csv`.

If you would like to modify the name or location of the output dataset, set the
second command line argument to your chosen file path.
For example, if you want to save the output data set to the subfolder `data/clean/` you can
invoke the script as:

`(venv_spacewalks) $ python3 eva_data_analysis.py eva-data.json data/clean/eva-data-clean.csv`

The specified destination folder `data/clean/` must exist before running spacewalks analysis script.</code></pre>
<p>Remember to rebuild your documentation:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdocs build</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The Diataxis framework provides guidance for developing technical
documentation for different purposes. Tutorials differ in purpose and
scope to how-to guides, and as a result, differ in content and
style.</p>
<div id="spacewalks-tutorial" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="spacewalks-tutorial" class="callout-inner">
<h3 class="callout-title">Spacewalks tutorial</h3>
<div class="callout-content">
<p>Let’s adapt the how-to guide from the previous challenge into a
tutorial that explains how to change the file path for the output
dataset when running the analysis script.</p>
<div id="accordionSpoiler5" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler5" aria-expanded="false" aria-controls="collapseSpoiler5">
  <h3 class="accordion-header" id="headingSpoiler5">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Solution </h3>
</button>
<div id="collapseSpoiler5" class="accordion-collapse collapse" aria-labelledby="headingSpoiler5" data-bs-parent="#accordionSpoiler5">
<div class="accordion-body">
<p>Here is what an example tutorial may look like.</p>
<div class="section level4">
<h4 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h4>
<p>In this tutorial, we will learn how to change the file path for the
output dataset generated by the Spacewalk software. By the end of this
tutorial, you will be able to specify a custom file path for the cleaned
dataset.</p>
</div>
<div class="section level4">
<h4 id="prerequisites">Prerequisites<a class="anchor" aria-label="anchor" href="#prerequisites"></a>
</h4>
<p>Before you start, ensure you have the following:</p>
<ul>
<li>Python installed on your system</li>
<li>The Spacewalk script (<code>eva_data_analysis.py</code>)</li>
<li>An input dataset (<code>eva-data.json</code>)</li>
</ul>
</div>
<div class="section level4">
<h4 id="prepare-the-destination-directory">Prepare the destination directory<a class="anchor" aria-label="anchor" href="#prepare-the-destination-directory"></a>
</h4>
<p>First, let us decide where we want to save the cleaned dataset and
make sure the directory exists.</p>
<p>For this tutorial, we will use <code>data/clean/</code> as the
destination folder.</p>
<p>Let’s create the directory if it does not exist - e.g. from the
command line do:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdir <span class="at">-p</span> data/clean</span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="run-the-analysis-script-with-a-custom-path">Run the analysis script with a custom path<a class="anchor" aria-label="anchor" href="#run-the-analysis-script-with-a-custom-path"></a>
</h4>
<p>Next, execute the Spacewalk script and specify the custom file path
for the output dataset:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py <span class="op">&lt;</span>input-file<span class="op">&gt;</span> <span class="op">&lt;</span>output-file<span class="op">&gt;</span></span></code></pre>
</div>
<p>Replace <input-file> with your input dataset
(<code>data/eva-data.json</code>) and <output-file> with your desired
output path (<code>data/clean/eva-data-clean.csv</code>).</output-file></input-file></p>
<p>Here is the complete command:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py data/eva-data.json data/clean/eva-data-clean.csv</span></code></pre>
</div>
<p>Notice how the output to the command line clearly indicates that we
are using a custom output file path.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Using custom input and output filenames
Reading JSON file data/eva-data.json
Saving to CSV file data/clean/eva-data-clean.csv
Adding crew size variable (crew_size) to dataset
Saving to CSV file data/clean/eva-data-clean.csv
Plotting cumulative spacewalk duration and saving to results/cumulative_eva_graph.png</code></pre>
</div>
<p>After running the script, let us check the <code>data/clean</code>
directory to ensure the cleaned dataset has been saved correctly.</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> ls data/clean</span></code></pre>
</div>
<p>You should see <code>eva-data-clean.csv</code> file listed in the
<code>data/clean</code> folder.</p>
</div>
<div class="section level4">
<h4 id="exercise-custom-output-path">Exercise: custom output path<a class="anchor" aria-label="anchor" href="#exercise-custom-output-path"></a>
</h4>
<ul>
<li>Create a new directory named <code>output/data</code> in your
working directory.</li>
<li>Run the Spacewalk script to save the cleaned dataset in the newly
created <code>output/data</code> directory with the filename
<code>cleaned-eva-data.csv</code>.</li>
<li>Verify that the dataset has been saved correctly.</li>
</ul>
<div class="section level5">
<h5 id="solution-1">Solution<a class="anchor" aria-label="anchor" href="#solution-1"></a>
</h5>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="co"># Create the directory:</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> mkdir <span class="at">-p</span> output/data</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="co"># Run the script:</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py data/eva-data.json output/data/cleaned-eva-data.csv</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a><span class="co"># Verify the output:</span></span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> ls output/data</span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a><span class="co"># You should see cleaned-eva-data.csv listed</span></span></code></pre>
</div>
<p>Congratulations! You have successfully changed the file path for
Spacewalks output dataset and completed an exercise to practice the
process. You can now customize the output location and filename
according to your needs.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Now that we have seen examples of both a how-to guide and a tutorial,
let’s compare the two.</p>
<div id="tutorial-vs.-how-to-guide" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="tutorial-vs.-how-to-guide" class="callout-inner">
<h3 class="callout-title">Tutorial vs. how-to guide</h3>
<div class="callout-content">
<p>How does the content and language of our example tutorial differ from
our example how-to guide?</p>
<div id="accordionSpoiler6" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler6" aria-expanded="false" aria-controls="collapseSpoiler6">
  <h3 class="accordion-header" id="headingSpoiler6">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Discussion hints </h3>
</button>
<div id="collapseSpoiler6" class="accordion-collapse collapse" aria-labelledby="headingSpoiler6" data-bs-parent="#accordionSpoiler6">
<div class="accordion-body">
<div class="section level4">
<h4 id="content">Content<a class="anchor" aria-label="anchor" href="#content"></a>
</h4>
<ul>
<li>The tutorial clearly signposts what will be covered</li>
<li>The tutorial includes a narrative of each step and the expected
output</li>
<li>The tutorial highlights important behaviour the learner should
notice</li>
<li>The tutorial includes an exercise to practice skills</li>
</ul>
</div>
<div class="section level4">
<h4 id="language">Language<a class="anchor" aria-label="anchor" href="#language"></a>
</h4>
<ul>
<li>The tutorial uses the “we” language</li>
<li>The tutorial uses imperative to provide clear instructions,
e.g. “First do x, then do y”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Do not forget to commit any uncommitted changes you may have and then
push your work to GitHub.</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add <span class="op">&lt;</span>your_changed_files<span class="op">&gt;</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"Your commit message"</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin main</span></code></pre>
</div>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>In this episode we have highlighted the importance of software
project documentation (e.g. README, license, and citation files) in
making research code understandable, reusable, and reproducible.</p>
<p>We have also explored tools and formats for delivering tutorials,
how-to guides, and reference materials - like Markdown files, Wikis, and
static site generators (e.g. MkDocs) - and highlighted the Diátaxis
framework for structuring documentation effectively.</p>
<div id="accordionSpoiler7" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler7" aria-expanded="false" aria-controls="collapseSpoiler7">
  <h3 class="accordion-header" id="headingSpoiler7">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div> Code state </h3>
</button>
<div id="collapseSpoiler7" class="accordion-collapse collapse" aria-labelledby="headingSpoiler7" data-bs-parent="#accordionSpoiler7">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/08-open-collaboration" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/08-open-collaboration</a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>
<a href="https://github.com/hackergrrl/art-of-readme#bonus-the-readme-checklist" class="external-link">“The
Art of Readme”</a> article by Kira Oakley - a useful discussion of best
practices for writing a high-quality README</li>
<li>
<a href="https://www.software.ac.uk/blog/what-are-best-practices-research-software-documentation" class="external-link">What
are best practices for research software documentation?</a> (Software
Sustainability blog post) by Stephan Druskat et al.</li>
<li>
<a href="https://carpentries-incubator.github.io/python-intermediate-development/42-software-reuse/index.html" class="external-link">Preparing
Software for Reuse and Release episode</a> from the Intermediate
Research Software Development lesson on The Carpentries Incubator by
Aleksandra Nenadic et al.</li>
<li><a href="https://coderefinery.github.io/documentation/" class="external-link">CodeRefinery
lesson: How to document your research software</a></li>
<li><a href="https://citation-file-format.github.io/" class="external-link">CITATION.cff file
format</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Documentation allows users to run and understand software without
having to work things out for themselves directly from the source
code.</li>
<li>Software documentation supports the FAIR principles by improving the
reusability of research code.</li>
<li>A (good) README, CITATION file and LICENSE file are the minimum
documentation elements required to support FAIR research code.</li>
<li>Documentation can be provided to users in a variety of formats
including a <code>docs</code> folder of Markdown files, a repository
Wiki and static webpages.</li>
<li>A static documentation site can be created using the tool
MkDocs.</li>
<li>Documentation frameworks such as Diataxis provide content and style
guidelines that can helps us write high quality documentation.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-08-open-collaboration"><p>Content from <a href="08-open-collaboration.html">Open software management &amp; collaboration</a></p>
<hr>
<p>Last updated on 2025-08-27 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/08-open-collaboration.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I ensure my code is citable?</li>
<li>How do we track issues with code in GitHub?</li>
<li>How can we ensure that multiple developers can work on the same
files simultaneously?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Archive code to Zenodo and create a digital object identifier (DOI)
for a software project (and include that info in CITATION.cff).</li>
<li>Track issues with code in GitHub.</li>
<li>Use Git branches to work on code in parallel and merge code back
using pull requests.</li>
<li>Apply issue tracking, branching and pull requests together to fix
bugs while allowing other developers to work on the same code.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Sharing code openly promotes collaboration, transparency, and
innovation by allowing others to review, use, and improve the code. It
fosters knowledge exchange, accelerates scientific progress, and
enhances the reproducibility of research. Additionally, open sharing
encourages community contributions and can lead to better-maintained,
more reliable software.</p>
<p>Adding a <a href="licensing.html">license</a> and other metadata to
our code (covered in the previous episode) are the first steps towards
sharing the code publicly. There are several other important steps to
consider which we will cover here.</p>
<div id="accordionSpoiler1" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler1" aria-expanded="false" aria-controls="collapseSpoiler1">
  <h3 class="accordion-header" id="headingSpoiler1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Code state
  </h3>
</button>
<div id="collapseSpoiler1" class="accordion-collapse collapse" aria-labelledby="headingSpoiler1" data-bs-parent="#accordionSpoiler1">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/08-open-collaboration" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/08-open-collaboration</a></p>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler2" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler2" aria-expanded="false" aria-controls="collapseSpoiler2">
  <h3 class="accordion-header" id="headingSpoiler2">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Activate your virtual environment
  </h3>
</button>
<div id="collapseSpoiler2" class="accordion-collapse collapse" aria-labelledby="headingSpoiler2" data-bs-parent="#accordionSpoiler2">
<div class="accordion-body">
<p>If it is not already active, make sure to activate your virtual
environment from the root of the software project directory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/bin/activate <span class="co"># Mac or Linux</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">$</span> source venv_spacewalks/Scripts/activate <span class="co"># Windows</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="sharing-code-to-encourage-collaboration">Sharing code to encourage collaboration<a class="anchor" aria-label="anchor" href="#sharing-code-to-encourage-collaboration"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="making-the-code-public">Making the code public<a class="anchor" aria-label="anchor" href="#making-the-code-public"></a>
</h3>
<p>By default repositories created on GitHub are private and only their
creator can see them. Since we added an open source license to our
repository we probably want to make sure people can actually access
it.</p>
<p>To make your repository public, if it is not public already:</p>
<ol style="list-style-type: decimal">
<li>Go to your repository on GitHub and click on the
<code>Settings</code> link near the top right corner.</li>
<li>Scroll down to the bottom of the page and the “Danger Zone”
settings.</li>
<li>Click on “Change Visibility” and you should see a message saying
“Change to public”. If it says “Change to private” then the repository
is already public.</li>
<li>You will then be asked to confirm that you indeed want to make the
repository public and agree to the warning that the code will now be
publicly visible. As a security measure, you will then have to put in
your GitHub password.</li>
</ol>
</div>
<div class="section level3">
<h3 id="transferring-to-an-organisation">Transferring to an organisation<a class="anchor" aria-label="anchor" href="#transferring-to-an-organisation"></a>
</h3>
<p>Currently our repository is under the GitHub “namespace” of our
individual user. This is OK for individual projects where we are the
sole or at least the main code author, but for bigger and more complex
projects it is common to use a GitHub organisation named after our
project. If we are a member of an organisation and have the appropriate
permissions then we can transfer a repository from our personal
namespace to the organisation’s. This can be done with another option in
the “Danger Zone” settings, the “Transfer ownership” button. Pressing
this will then prompt us as to which organisation we want to transfer
the repository to.</p>
</div>
<div class="section level3">
<h3 id="archiving-code-to-zenodo-and-obtaining-a-doi">Archiving code to Zenodo and obtaining a DOI<a class="anchor" aria-label="anchor" href="#archiving-code-to-zenodo-and-obtaining-a-doi"></a>
</h3>
<p><a href="https://zenodo.org/" class="external-link">Zenodo</a> is a data archive run by
CERN. Anybody can upload datasets up to 50GB to it and receive a Digital
Object Identifier (DOI). Zenodo’s definition of a dataset is quite broad
and can include code - which gives us a way to obtain a DOI for our
software.</p>
<p>Let us now look into how we can archive a GitHub repository to
Zenodo. Note that, instead of using the real Zenodo website, we will
practice using <a href="https://sandbox.zenodo.org/" class="external-link">Zenodo
Sandbox</a>.</p>
<div id="zenodo-sandbox" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="zenodo-sandbox" class="callout-inner">
<h3 class="callout-title">Zenodo Sandbox</h3>
<div class="callout-content">
<p><a href="https://sandbox.zenodo.org/" class="external-link">Zenodo Sandbox</a> is a testing
environment for Zenodo, a repository for research outputs, allowing
users to safely experiment with its features without affecting the live
system. It is a clone of Zenodo, created for testing purposes, that
works exactly the same way as Zenodo you can use it for learning,
training, experimenting, and preparing uploads without impacting the
primary Zenodo repository until you are ready to publish and release
your code (or other research outputs) officially. It will also not
create real DOIs for a number of test repositories we use for this
course and saturate the DOI space (remember that a DOI, once created, is
meant to exist forever).</p>
</div>
</div>
</div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div>
  Optional challenge: archive our GitHub repository to Zenodo
  </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" aria-labelledby="headingInstructor1" data-bs-parent="#accordionInstructor1">
<div class="accordion-body">
<p>You can choose to do the following as an exercise or by live coding
based on what you think the learners would prefer. You can copy the
detailed instructions below to give them it as an exercise.</p>
</div>
</div>
</div>
</div>
<p>We can archive our GitHub repository to Zenodo (Sandbox) by doing the
following:</p>
<ol style="list-style-type: decimal">
<li>Go to the <a href="https://sandbox.zenodo.org/login" class="external-link">Zenodo Sandbox
login page</a> and choose to login with GitHub.</li>
<li>Authorise Zenodo Sandbox to connect to GitHub.</li>
<li>Go to the <a href="https://sandbox.zenodo.org/account/settings/github/" class="external-link">GitHub
page</a> in your Zenodo Sandbox account. This can be found in the pull
down menu with your user name in the top right corner of the
screen.</li>
<li>You will now have a list of all of your GitHub repositories. Next to
each will be an “On” button. If you have created a new repository you
might need to press the “Sync” button to update the list of repositories
Zenodo Sandbox knows about.</li>
<li>Press the “On” button for the repository you want to archive. If
this was successful you will be told to refresh the page.</li>
<li>The repository should now appear in the list of “Enabled”
repositories at the top of the screen, but it does not yet have a DOI.
To get one we have to make a “release” on GitHub. To do so, click on the
repository and then press the green button to create a release. This
will take you to GitHub’s release page for your software repository
where you will be asked to give a title and description of the release.
You will also have to create a “tag” for your release - a way of having
a friendly name for the version of some code in Git instead of using a
long hash code. Often we will create a sequential version number for
each release of the software and have the tag name match this, for
example v1.0 or just 1.0.</li>
<li>If we now refresh the Zenodo Sandbox page for this repository we
will see that it has been assigned a DOI.</li>
</ol>
<p>The DOI does not just link to GitHub, Zenodo will have taken a copy
(a snapshot) of our repository at the point where we created the
release. This means that even if we delete it from GitHub or even if
GitHub were ever to go away or remove it, there will still be a copy of
our software on Zenodo. Zenodo will allow people to download the entire
repository (more accurately, its state at the time it was tagged for
release) as a single <code>zip</code> file.</p>
<p>Zenodo will have actually created two DOIs for you. One represents
the latest version of the software and will always link to the latest
(most recent) release if you make more releases. The other is specific
to the release you made and will always point to that version. We can
see both of these by clicking on the DOI link in the Zenodo page for the
repository.</p>
<p>One of the things which is displayed on this page is a badge image
that you can copy the link for and add to the README file in your GitHub
repository so that people can find the Zenodo version of the repository.
If you click on the DOI image in the “Details” section of the Zenodo
page then you will be shown instructions for obtaining a link to the DOI
badge in various formats including Markdown. Here is the badge for this
repository and the corresponding Markdown:</p>
<p><a href="https://doi.org/10.5281/zenodo.11869450" class="external-link"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.11869450.svg" alt="styled button linking to the Zenodo entry for this lesson" class="figure"></a></p>
<pre class="text"><code>[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.11869450.svg)](https://doi.org/10.5281/zenodo.11869450)</code></pre>
<div id="accordionSpoiler3" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler3" aria-expanded="false" aria-controls="collapseSpoiler3">
  <h3 class="accordion-header" id="headingSpoiler3">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Problems with GitHub and Zenodo integration
  </h3>
</button>
<div id="collapseSpoiler3" class="accordion-collapse collapse" aria-labelledby="headingSpoiler3" data-bs-parent="#accordionSpoiler3">
<div class="accordion-body">
<p>The integration between GitHub and Zenodo does not interact well with
some browsers’ privacy features and extensions. Firefox can be
particularly problematic with this and might open new tabs to login to
GitHub and then give an error saying:
<code>Your browser did something unexpected. Please try again. If the error continues, try disabling all browser extensions.</code>
If this happens try disabling the extra privacy features/extensions or
using another browser such as Chrome.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="adding-a-doi-and-orcid-to-the-citation-file">Adding a DOI and ORCID to the citation file<a class="anchor" aria-label="anchor" href="#adding-a-doi-and-orcid-to-the-citation-file"></a>
</h3>
<p>Now that we have our DOI it is good practice to include this
information in our citation file. Earlier we created a
<code>CITATION.cff</code> file with information about how to cite our
code. There are a few fields we can add now which are related to the
DOI; one of these is the <code>version</code> file which covers the
version number of the software.</p>
<div id="accordionInstructor2" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor2" aria-expanded="false" aria-controls="collapseInstructor2">
  <h3 class="accordion-header" id="headingInstructor2">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div>
  Optional challenge: add a DOI and ORCID to the citation file
  </h3>
</button>
<div id="collapseInstructor2" class="accordion-collapse collapse" aria-labelledby="headingInstructor2" data-bs-parent="#accordionInstructor2">
<div class="accordion-body">
<p>You can choose to do the following as an exercise or by live coding
based on what you think the learners would prefer. You can copy the the
detailed instructions below to give them it as an exercise.</p>
</div>
</div>
</div>
</div>
<p>We can add a DOI to the file by creating an <code>identifiers</code>
section that includes the variables of <code>doi</code> and
<code>value</code> of the Zenodo URL as a bulleted entry. Optionally, we
can also add a <code>date-released</code> field indicating the date we
released this software as a new variable. Here is an updated version of
our <code>CITATION.cff</code> from the previous episode with a version
number, DOI and release date added.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">YAML<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode yaml" tabindex="0"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># This CITATION.cff file was generated with cffinit.</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="co"># Visit https://bit.ly/cffinit to generate yours today!</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="fu">cff-version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.0</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Spacewalks</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="fu">message</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>  If you use this software, please cite it using the</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a>  metadata from this file.</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="fu">type</span><span class="kw">:</span><span class="at"> software</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="fu">authors</span><span class="kw">:</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Jaffa</span></span>
<span id="cb3-12"><a href="#cb3-12" tabindex="-1"></a><span class="at">    </span><span class="fu">name-particle</span><span class="kw">:</span><span class="at"> Sarah</span></span>
<span id="cb3-13"><a href="#cb3-13" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Aleksandra</span></span>
<span id="cb3-14"><a href="#cb3-14" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Nenadic</span></span>
<span id="cb3-15"><a href="#cb3-15" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">given-names</span><span class="kw">:</span><span class="at"> Kamilla</span></span>
<span id="cb3-16"><a href="#cb3-16" tabindex="-1"></a><span class="at">    </span><span class="fu">family-names</span><span class="kw">:</span><span class="at"> Kopec-Harding</span></span>
<span id="cb3-17"><a href="#cb3-17" tabindex="-1"></a><span class="fu">repository-code</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb3-18"><a href="#cb3-18" tabindex="-1"></a>  https://github.com/YOUR-REPOSITORY-URL/spacewalks.git</span>
<span id="cb3-19"><a href="#cb3-19" tabindex="-1"></a><span class="fu">abstract</span><span class="kw">: </span><span class="ch">&gt;-</span></span>
<span id="cb3-20"><a href="#cb3-20" tabindex="-1"></a>  A Python script to analyse NASA extravehicular activity</span>
<span id="cb3-21"><a href="#cb3-21" tabindex="-1"></a>  data</span>
<span id="cb3-22"><a href="#cb3-22" tabindex="-1"></a><span class="fu">keywords</span><span class="kw">:</span></span>
<span id="cb3-23"><a href="#cb3-23" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> NASA</span></span>
<span id="cb3-24"><a href="#cb3-24" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> Extravehicular activity</span></span>
<span id="cb3-25"><a href="#cb3-25" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.0.1</span></span>
<span id="cb3-26"><a href="#cb3-26" tabindex="-1"></a><span class="fu">identifiers</span><span class="kw">:</span></span>
<span id="cb3-27"><a href="#cb3-27" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> doi</span></span>
<span id="cb3-28"><a href="#cb3-28" tabindex="-1"></a><span class="at">    </span><span class="fu">value</span><span class="kw">:</span><span class="at"> 10.5281/zenodo.1234</span></span>
<span id="cb3-29"><a href="#cb3-29" tabindex="-1"></a><span class="fu">date-released</span><span class="kw">:</span><span class="at"> 2024-06-01</span></span></code></pre>
</div>
<div id="going-further-with-publishing-code" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="going-further-with-publishing-code" class="callout-inner">
<h3 class="callout-title">Going further with publishing code</h3>
<div class="callout-content">
<p>We now have our code published online, licensed as open source,
archived with Zenodo, accessible via a DOI and with a citation file to
encourage people to cite it. What else might we want to do in order to
improve how findable, accessible or reusable it is? One further step we
could take is to publish the code with a peer reviewed journal. Some
traditional journals will accept software submissions, although these
are usually as a supplementary material for a paper. There also journals
which specialise in research software such as the <a href="https://openresearchsoftware.metajnl.com/" class="external-link">Journal of Open
Research Software</a>, <a href="https://joss.theoj.org/" class="external-link">The Journal of
Open Source Software</a> or <a href="https://www.sciencedirect.com/journal/softwarex" class="external-link">SoftwareX</a>.
With these venues, the submission will be the software itself and not a
paper, although a short abstract or description of the software is often
required.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="working-with-collaborators">Working with collaborators<a class="anchor" aria-label="anchor" href="#working-with-collaborators"></a>
</h2>
<hr class="half-width">
<p>The strength of online collaboration platforms such as GitHub does
not just lie in the ability to share code. They also allow us to track
problems with that code, for multiple developers to work on it
independently and bring their changes together and to review those
changes before they are accepted.</p>
<div class="section level3">
<h3 id="tracking-issues-with-code">Tracking issues with code<a class="anchor" aria-label="anchor" href="#tracking-issues-with-code"></a>
</h3>
<p>As we discussed earlier, a key feature of GitHub (as opposed to Git
itself) is the issue tracker. This provides us with a place to keep
track of any problems or bugs in the code and to discuss them with other
developers. Sometimes advanced users will also use issue trackers of
public projects to report problems they are having (and sometimes this
is understandably misused by users seeking help using documented
features of the program).</p>
<p>To practice making an issue, we will file a “feature request”, where
we describe new functionality that may improve the codebase. Let’s go
ahead and create a new issue in our GitHub repository for a feature
request to create a table of total EVA/spacewalk time for each
astronaut. We can find the issue tracker on the “Issues” tab in the top
left of the GitHub page for the repository. Click on this and then click
on the green “New Issue” button on the right hand side of the screen. We
can then enter a title and description of our issue.</p>
<p>A feature request should include a short title, the key features of
the new feature, and a more detailed description of the feature. -
Title: Add summary table of EVA time by astronaut - Description: A
summary table split by astronaut would be helpful for individual level
analysis.</p>
<!--- SCREENSHOT NEEDED: of example feature request -->
<p>After the issue is created it will be assigned a sequential ID
number.</p>
</div>
<div class="section level3">
<h3 id="discussing-an-issue">Discussing an issue<a class="anchor" aria-label="anchor" href="#discussing-an-issue"></a>
</h3>
<p>Once the issue is created, further discussion can take place with
additional comments. These can include code snippets and file
attachments such as screenshots or logfiles. We can also reference other
issues (by writing a <code>#</code> symbol and the number of the other
issue) or mention other collaborators (by writing <code>@</code>
followed by their GitHub username) to draw their attention to our
comment. This is sometimes used to identify related issues or if an
issue is a duplicate.</p>
</div>
<div class="section level3">
<h3 id="working-in-parallel-with-git-branches">Working in parallel with Git branches<a class="anchor" aria-label="anchor" href="#working-in-parallel-with-git-branches"></a>
</h3>
<p>Next, we will learn how to suggest this change back to the
repository. So far, we’ve been working on our own making changes in
main. However, when we start to have collaborators, we may need to adopt
a workflow such as <a href="https://docs.github.com/en/get-started/using-github/github-flow" class="external-link">GitHub
flow</a> that facilitates simultaneous editing on the project and
quality control on the changes made.</p>
<p>Branching is a feature of Git that allows two or more parallel
streams of work. Commits can be made to one branch without interfering
with another. Branches are commonly used as a way for one developer to
work on a new feature or a bug fix while other developers work on other
features. When those new features or bug fixes are complete, the branch
will be merged back with the <code>main</code> (sometimes called the
<code>master</code>) branch.</p>
<div class="section level4">
<h4 id="creating-a-new-branch">Creating a new branch<a class="anchor" aria-label="anchor" href="#creating-a-new-branch"></a>
</h4>
<p>New Git branches are created with the <code>git branch</code>
command. This should be followed by the name of the branch to create. It
is common practice when the bug we are fixing or feature we are adding
has a corresponding issue to name the branch after the issue number and
name. For example, we might call the branch
<code>02-sum-by-astro-feat</code> instead of something less descriptive
like <code>feature-request</code> or <code>bugfix</code>.</p>
<p>For example, the command:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git branch 02-sum-by-astro-feat</span></code></pre>
</div>
<p>will create a new branch called <code>02-sum-by-astro-feat</code>. We
can view the names of all the branches by running
<code>git branch</code> with no parameters. By default there should be
one branch called <code>main</code> (formerly <code>master</code>) and
our new <code>02-sum-by-astro-feat</code> branch. The command will put
<code>*</code> next to the currently active branch.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git branch</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  02-sum-by-astro-feat
* main</code></pre>
</div>
<p>We can see that creating a new branch has not switched our working
branch to that branch. To switch branches we can either use the
<code>git switch</code> or <code>git checkout</code> command followed by
the branch name. For example:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch 02-sum-by-astro-feat</span></code></pre>
</div>
<p>To create a branch and change to it in a single command we can use
<code>git switch</code> with the <code>-c</code> option (or
<code>git checkout</code> with the <code>-b</code> option). Note that
<code>git switch</code> command is only available in more recent
versions of Git.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch <span class="at">-c</span> 03-summarize-categorical-bug</span></code></pre>
</div>
</div>
<div class="section level4">
<h4 id="committing-to-a-branch">Committing to a branch<a class="anchor" aria-label="anchor" href="#committing-to-a-branch"></a>
</h4>
<p>Once we have switched to a branch any further commits that are made
will go to that branch. When we run a <code>git commit</code> command we
will see the name of the branch we are committing to in the output of
<code>git commit</code>. Let’s add the following function to our code to
implement the requested feature.</p>
<p>Copy and paste this function to add it to your code</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="kw">def</span> sum_duration_by_astronaut(df, output_csv):</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co">    Summarizes the duration data by each astronaut and saves resulting table to a CSV file</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="co">    Args: </span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe to be summarized</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">        output_csv (str): Path to save the output csv of the table generated</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">        sum_by_astro (pd.DataFrame): Data frame with a row for each astronaut and a summarized column </span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>    subset <span class="op">=</span> df.loc[:,[<span class="st">'crew'</span>, <span class="st">'duration'</span>]] <span class="co"># subset to work with only relevant columns</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a>    subset <span class="op">=</span> add_duration_hours_variable(subset) <span class="co"># need duration_hours for easier calcs</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a>    subset <span class="op">=</span> subset.drop(<span class="st">'duration'</span>, axis<span class="op">=</span><span class="dv">1</span>) <span class="co"># dropping extra duration file as those don't calculate correctly</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a>    subset <span class="op">=</span> subset.groupby(<span class="st">'crew'</span>).<span class="bu">sum</span>() </span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_csv<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a>    subset.to_csv(output_csv) <span class="co"># writing new table to specified location</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a>    <span class="cf">return</span> subset</span></code></pre>
</div>
<p>Then add the following to your main function, after the
<code>eva_data</code> variable is created</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>dur_by_astro <span class="op">=</span> sum_duration_by_astronaut(eva_data, dur_by_astro_csv)</span></code></pre>
</div>
<p>And we will add this line in our code to run if main, before or after
we define the <code>graph_file</code> variable.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>dur_by_astro_csv <span class="op">=</span> <span class="st">'results/duration_by_astronaut.csv'</span></span></code></pre>
</div>
<p>Now, let’s test run our script, to make sure we do not get any
errors.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> python3 eva_data_analysis.py</span></code></pre>
</div>
<p>If we do:</p>
<pre><code>venv_spacewalks) $ ls results</code></pre>
<p>we can see the new result CSV file listed.</p>
<p>Let’s add and commit the new version of the code to our
<code>02-sum-by-astro-feat</code> branch. First we will check that we
are on the right branch using either <code>git branch</code> or
<code>git status</code>.</p>
</div>
</div>
<div class="section level3">
<h3 id="closing-an-issue">Closing an issue<a class="anchor" aria-label="anchor" href="#closing-an-issue"></a>
</h3>
<p>Once an issue is solved then it can be closed. This can be done
either by pressing the “Close” button in the GitHub web interface (as we
did before) or by making a commit which includes the word “fixes”,
“fixed”, “close”, “closed” or “closes” followed by a # symbol and the
issue number in the commit message.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git branch</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git add eva_data_analysis.py</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git commit <span class="at">-m</span> <span class="st">"added duration by astronaut functionality, closes #2"</span></span></code></pre>
</div>
<p>In the output of <code>git commit -m</code> the first part of the
output line will show the name of the branch we just made the commit
to.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[02-sum-by-astro-feat 330a2b1] added duration by astronaut functionality, closes #2</code></pre>
</div>
<p>If we now switch back to the <code>main</code> branch our new commit
will no longer be there in the source file or the output of
<code>git log</code>.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch main</span></code></pre>
</div>
<p>And if we go back to the <code>02-sum-by-astro-feat</code> branch it
will re-appear.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch 02-sum-by-astro-feat</span></code></pre>
</div>
<p>If we want to push our changes to a remote such as GitHub we have to
tell the <code>git push</code> command which branch to push to. If the
branch doesn’t exist on the remote (as it currently won’t) then it will
be created.</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git push origin 02-sum-by-astro-feat</span></code></pre>
</div>
<p>If we now refresh the GitHub webpage for this repository we should
see the <code>02-sum-by-astro-feat</code> branch has appeared in the
list of branches.</p>
<div id="accordionSpoiler4" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler4" aria-expanded="false" aria-controls="collapseSpoiler4">
  <h3 class="accordion-header" id="headingSpoiler4">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  How to pull changes from a remote branch
  </h3>
</button>
<div id="collapseSpoiler4" class="accordion-collapse collapse" aria-labelledby="headingSpoiler4" data-bs-parent="#accordionSpoiler4">
<div class="accordion-body">
<p>If we needed to pull changes from a branch on a remote (for example
if we have made changes on another computer or via GitHub’s web based
editor), then we can specify a branch on a <code>git pull</code>
command.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">git</span> pull origin 02-sum-by-astro-feat</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="accordionSpoiler5" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler5" aria-expanded="false" aria-controls="collapseSpoiler5">
  <h3 class="accordion-header" id="headingSpoiler5">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Merging branches
  </h3>
</button>
<div id="collapseSpoiler5" class="accordion-collapse collapse" aria-labelledby="headingSpoiler5" data-bs-parent="#accordionSpoiler5">
<div class="accordion-body">
<p>If we are working alone, when we have completed working on a branch
(for example adding a feature or fixing a bug) then we can merge our
branch back into the main one (or any other branch). This is done with
the <code>git merge</code> command.</p>
<p>This must be run on the <em>TARGET</em> branch of the merge, so we
will have to use a <code>git switch</code> command to set this.</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git switch main</span></code></pre>
</div>
<p>Now we are back on the main branch we can go ahead and merge the
changes from the bugfix branch:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="kw">(</span><span class="ex">venv_spacewalks</span><span class="kw">)</span> <span class="ex">$</span> git merge 02-sum-by-astro-feat</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="pull-requests">Pull requests<a class="anchor" aria-label="anchor" href="#pull-requests"></a>
</h3>
<p>On larger projects, with collaborators, we might include a code
review process before changes are merged. A quality control step like
this is especially important if the main branch of the project is being
released as the public version of the software. GitHub has a process for
this that is called a <strong>Pull Request</strong>. Other Git services
such as GitLab have different names for this; GitLab calls them
<strong>merge requests</strong>. Pull requests are situations where one
developer requests that another merges code from a branch (or “pull” it
from another copy of the repository). The person receiving the request
then has the chance to review the code, write comments suggesting
changes or even change the code themselves before merging it. It is also
very common for automated checks of code to be run on a pull request to
ensure the code is of good quality and is passing automated tests.</p>
<p>As a simple example of a pull request, we can now create a pull
request for the changes we made on our <code>02-sum-by-astro-feat</code>
branch and pushed to GitHub earlier on. The GitHub webpage for our
repository will now be saying something like “02-sum-by-astro-feat had
recent pushes <code>n</code> minutes ago - Compare &amp; Pull request”.
Click on this button and create a new pull request.</p>
<p>Give the pull request a title and write a brief description of it,
then click the green “Create pull request” button. GitHub will then
check if we can merge this pull request without any problems.</p>
<p>There should be a green “Merge pull request” button, but if we click
on the down arrow inside this button there are three options on how to
handle this request:</p>
<ol style="list-style-type: decimal">
<li>Create a merge commit</li>
<li>Squash and merge</li>
<li>Rebase and merge</li>
</ol>
<p>The default is option 1, which will keep all of the commits made on
our branch intact. This can be useful for seeing the whole history of
our work, but if we’ve done a lot of minor edits or attempts at creating
the feature it can be excessive to have all of this history saved. This
is where the second option comes in, this will place all of our changes
from the branch into just a single commit, this might be much more
obvious to other developers who will now see our feautre addition as a
single commit in the history. The third option merges the branch
histories together in a different way that doesn’t make merges as
obvious, this can make the history easier to read but effectively
rewrites the commit history and will change the commit hash IDs. Some
projects that you contribute to might have their own rules about what
kind of merge they will prefer. For the purposes of this exercise we’ll
stick with the default merge commit.</p>
<p>Go ahead and click on “Merge pull request”, then “Confirm merge”. The
changes will now be merged together. GitHub gives us the option to
delete the branch we were working on, since its history is preserved in
the main branch there is no reason to keep it.</p>
<div id="using-forks-instead-of-branches" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="using-forks-instead-of-branches" class="callout-inner">
<h3 class="callout-title">Using forks instead of branches</h3>
<div class="callout-content">
<p>A fork is similar to a branch, but instead of it being part of the
same repository it is a entirely new copy of the repository. Forks are
commonly used by Github users who wish to work on a project that they
are not a member of. Typically forking will copy the repository to our
own namespace (e.g. <code>github.com/username/reponame</code> instead of
<code>github.com/projectname/reponame</code>).</p>
<p>To create a fork on github use the “Fork” button to the right of the
repository name. After we create our fork we can make some changes and
these could even be on the main branch inside our forked repository.
GitHub will track that a fork has been made displays a “Contribute”
button to create a pull request back to the original repository. Using
this we can request that the changes on our fork are incorporated by the
upstream project.</p>
</div>
</div>
</div>
<div id="practice-with-issues-and-prs-pull-requests" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="practice-with-issues-and-prs-pull-requests" class="callout-inner">
<h3 class="callout-title">Practice with Issues and PRs (Pull
Requests)</h3>
<div class="callout-content">
<p>We have a bug in our code! If we look at the results in
<code>results/duration_by_astronaut.csv</code>, the crew column has
groups of crew and we wanted to calculate this per astronaut.</p>
<ol style="list-style-type: decimal">
<li>Create an issue in GitHub to report this bug. A good issue
description for a bug should include:</li>
</ol>
<ul>
<li>What the problem is, including any error messages that are
displayed.</li>
<li>What version of the software it occurred with.</li>
<li>Any relevant information about the system running it, for example
the operating system being used.</li>
<li>Versions of any dependent libraries.</li>
<li>How to reproduce it.</li>
<li>Optionally, description of the expected behaviour, e.g. if there is
not an error message but the user thinks the result or behaviour is not
correct.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Create a pull request fix the code. You can try to create the code
yourself or copy the test code below.
<ul>
<li>Hint: Don’t forget to make a new branch from the <code>main</code>
branch, not your <code>02-sum-by-astro-feat</code> branch.</li>
</ul>
</li>
<li>(optional) Have a partner review your pull request.</li>
<li>Merge your pull request</li>
<li>Switch your local computer back to the <code>main</code> branch and
pull the latest changes from the remote/origin <code>main</code>
branch.</li>
<li>(Bonus/Optional) Delete your merged branches from your local
computer and in GitHub.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSpoiler6" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler6" aria-expanded="false" aria-controls="collapseSpoiler6">
  <h3 class="accordion-header" id="headingSpoiler6">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Updated function to copy-paste
  </h3>
</button>
<div id="collapseSpoiler6" class="accordion-collapse collapse" aria-labelledby="headingSpoiler6" data-bs-parent="#accordionSpoiler6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="kw">def</span> sum_duration_by_astronaut(df, output_csv):</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="co">    Summarize the duration data by each astronaut and saves resulting table to a CSV file</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="co">    Args: </span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="co">        df (pd.DataFrame): The input dataframe to be summarized</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="co">        output_csv (str): Path to save the output csv of the table generated</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a><span class="co">        sum_by_astro (pd.DataFrame): Data frame with a row for each astronaut and a summarized column </span></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a>    subset <span class="op">=</span> df.loc[:,[<span class="st">'crew'</span>, <span class="st">'duration'</span>]] <span class="co"># subset to work with only relevant columns</span></span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a>    subset.crew <span class="op">=</span> subset.crew.<span class="bu">str</span>.split(<span class="st">';'</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: [i <span class="cf">for</span> i <span class="kw">in</span> x <span class="cf">if</span> i.strip()]) <span class="co"># splitting the crew into individuals and removing blank string splits from ending ;</span></span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>    subset <span class="op">=</span> subset.explode(<span class="st">'crew'</span>) <span class="co"># separating lists of crew into individual rows</span></span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a>    subset <span class="op">=</span> add_duration_hours_variable(subset) <span class="co"># need duration_hours for easier calcs</span></span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a>    subset <span class="op">=</span> subset.drop(<span class="st">'duration'</span>, axis<span class="op">=</span><span class="dv">1</span>) <span class="co"># dropping extra duration file as those don't calculate correctly</span></span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a>    subset <span class="op">=</span> subset.groupby(<span class="st">'crew'</span>).<span class="bu">sum</span>() </span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'Saving to CSV file </span><span class="sc">{</span>output_csv<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb22-20"><a href="#cb22-20" tabindex="-1"></a>    subset.to_csv(output_csv) <span class="co"># writing new table to specified location</span></span>
<span id="cb22-21"><a href="#cb22-21" tabindex="-1"></a>    <span class="cf">return</span> subset</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<hr class="half-width">
<p>This episode emphasises the importance of collaboration in creating
sustainable research software. It covers practices like using open
version control repositories (e.g., GitHub), inviting contributions
through issue templates, PR and code review processes, and establishing
clear governance, licensing, and codes of conduct. The episode also
highlights the ethos of open collaboration so that anyone can contribute
and benefit from the project, reinforcing transparency, inclusivity, and
community-driven development.</p>
<div id="accordionSpoiler7" class="accordion spoiler-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button spoiler-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSpoiler7" aria-expanded="false" aria-controls="collapseSpoiler7">
  <h3 class="accordion-header" id="headingSpoiler7">
  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="eye"></i></div>
  Code state
  </h3>
</button>
<div id="collapseSpoiler7" class="accordion-collapse collapse" aria-labelledby="headingSpoiler7" data-bs-parent="#accordionSpoiler7">
<div class="accordion-body">
<p>At this point, the code in your local software project’s directory
should be as in: <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/final" class="external-link uri">https://github.com/carpentries-incubator/bbrs-software-project/tree/final</a></p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
the topic of this episode:</p>
<ul>
<li>Licencing and citation episodes from the <a href="https://swcarpentry.github.io/git-novice" class="external-link">Software Carpentry’s Git
Novice lesson</a>
</li>
<li>Carpentries GitHub Skill ups for <a href="https://carpentries-incubator.github.io/github-skill-up-instructors/" class="external-link">instructors</a>
and <a href="https://carpentries.github.io/github-skill-up-maintainers/" class="external-link">maintainers</a>
</li>
<li>
<a href="https://southampton-rsg.github.io/swc-git-novice/index.html" class="external-link">RSG
Southampton Git lesson</a> - <a href="https://southampton-rsg.github.io/swc-git-novice/06-collab/index.html" class="external-link">collaboration
section</a>
</li>
<li>
<a href="https://opensource.org/osd/" class="external-link">Open source definition</a>, by
the <a href="https://opensource.org" class="external-link">Open Source Initiative</a>
</li>
<li><a href="https://www.gnu.org/philosophy/free-sw.en.html" class="external-link">What is
free software?</a></li>
</ul>
<p>Also check the <a href="reference.html#litref">full reference set</a>
for the course.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Zenodo can be used to archive a GitHub repository and obtain a DOI
for it.</li>
<li>We include a CITATION file with our code to tell people how to cite
it.</li>
<li>GitHub can help us track bugs or issues with software.</li>
<li>Git branches can be used to allow multiple developers to work on the
same part of code in parallel.</li>
<li>The <code>git branch</code> command shows the list of branches and
can create new branches.</li>
<li>The <code>git switch</code> command changes which branch we are
working on.</li>
<li>The <code>git merge</code> command merges another branch into the
current one.</li>
<li>Pull requests allow developers to work on their own branch/fork and
then request other developers review their changes before they are
merged.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-09-wrap-up"><p>Content from <a href="09-wrap-up.html">Wrap-up</a></p>
<hr>
<p>Last updated on 2025-07-31 |

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/episodes/09-wrap-up.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 45 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What are the FAIR principles?</li>
<li>How can FAIR principles help us develop better research
software?</li>
<li>What are the wider research software development principles in the
context of you team, peers and the world?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<p>After completing this episode, participants should be able to:</p>
<ul>
<li>Explain the FAIR research principles in the context of research
software</li>
<li>Explain why these principles are of value in the research
community</li>
<li>Reflect on the wider research software development principles and
their relevance to research</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>The good development practices taught in this lesson will help you
build better research software. The <a href="https://github.com/carpentries-incubator/bbrs-software-project/tree/final" class="external-link">final
branch</a> of the software project repository contains an improved
version of the example code after good practices have been applied. Some
may require time and perseverance to implement and embed in your
routine. Others are small changes you can start practicing today.</p>
<figure><img src="../fig/plant-a-tree.jpg" alt="Chinese proverb 'The best time to plant a tree was 20 years ago. The second best time is now'" class="figure mx-auto d-block"><div class="figcaption">Image by CCNULL, used under a CC-BY 2.0
licence</div>
</figure><section><h2 class="section-heading" id="fair-research-software">FAIR Research Software<a class="anchor" aria-label="anchor" href="#fair-research-software"></a>
</h2>
<hr class="half-width">
<p>One framework that can help you evaluate the alignment of a piece of
research software with best practices in reproducibility are the
<em>FAIR Principles for Research Software</em>. The practices taught
here fall within this framework and it can be a good place to find out
what else you can start doing to improve even further.</p>
<div class="section level3">
<h3 id="what-is-fair">What is FAIR?<a class="anchor" aria-label="anchor" href="#what-is-fair"></a>
</h3>
<p>FAIR stands for Findable, Accessible, Interoperable, and Reusable and
comprises a set of principles designed to increase the visibility and
usefulness of your research to others. The <a href="https://www.nature.com/articles/sdata201618" class="external-link">FAIR data
principles</a>, first published in 2016, are widely known and applied
today. Similar <a href="https://www.nature.com/articles/s41597-022-01710-x" class="external-link">FAIR
principles for software</a> have now been defined too. In general, they
mean:</p>
<ul>
<li>
<strong>Findable</strong> - software and its associated metadata
must be easy to discover by humans and machines.</li>
<li>
<strong>Accessible</strong> - in order to reuse software, the
software and its metadata must be retrievable by standard protocols,
free and legally usable.</li>
<li>
<strong>Interoperable</strong> - when interacting with other
software it must be done by exchanging data and/or metadata through
standardised protocols and application programming interfaces
(APIs).</li>
<li>
<strong>Reusable</strong> - software should be usable (can be
executed) and reusable (can be understood, modified, built upon, or
incorporated into other software).</li>
</ul>
<p>Each of the above principles can be achieved by a number of practices
listed below. This is not an exact science, and by all means the list
below is not exhaustive, but any of the practices that you employ in
your research software workflow will bring you closer to the gold
standard of fully reproducible research.</p>
<div class="section level4">
<h4 id="findable">Findable<a class="anchor" aria-label="anchor" href="#findable"></a>
</h4>
<ul>
<li>Create a description of your software to make it discoverable by
search engines and other search tools</li>
<li>Use standards (such as <a href="https://codemeta.github.io/" class="external-link">CodeMeta</a>) to describe
interoperable metadata for your software (see <a href="https://fair-impact.github.io/RSMD-guidelines/1.General/" class="external-link">Research
Software Metadata Guidelines</a>)</li>
<li>Place your software in a public software repository (and ideally
register it in a <a href="https://github.com/NLeSC/awesome-research-software-registries" class="external-link">general-purpose
or domain-specific software registry</a>)</li>
<li>Use a unique and persistent identifier (DOI) for your software
(e.g. by depositing your code on <a href="https://zenodo.org/" class="external-link">Zenodo</a>), which is also useful for
citations - note that depositing your data/code on GitHub and similar
software repositories may not be enough as they may change their open
access model or disappear completely in the future, so archiving your
code means it stands a better chance at being preserved</li>
</ul>
</div>
<div class="section level4">
<h4 id="accessible">Accessible<a class="anchor" aria-label="anchor" href="#accessible"></a>
</h4>
<ul>
<li>Make sure people can obtain get a copy of your software using
standard communication protocols (e.g. HTTP(S), (S)FTP, etc.)</li>
<li>The code and its description (metadata) has to be available even
when the software is no longer actively developed (this includes earlier
versions of the software)</li>
</ul>
</div>
<div class="section level4">
<h4 id="interoperable">Interoperable<a class="anchor" aria-label="anchor" href="#interoperable"></a>
</h4>
<ul>
<li>Use community-agreed standard formats for inputs and outputs of your
software and its metadata</li>
<li>Communicate with other software and tools via standard protocols and
APIs</li>
</ul>
</div>
<div class="section level4">
<h4 id="reusable">Reusable<a class="anchor" aria-label="anchor" href="#reusable"></a>
</h4>
<ul>
<li>Document your software (including its functionality, how to install
and run it) so it is both usable (can be executed) and reusable (can be
understood, modified, built upon, or incorporated into other
software)</li>
<li>Give a licence to your software clearly stating how it can be
reused</li>
</ul>
<div id="fair-is-a-process-not-a-perfect-metric" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="fair-is-a-process-not-a-perfect-metric" class="callout-inner">
<h3 class="callout-title">FAIR is a process, not a perfect metric</h3>
<div class="callout-content">
<p>FAIR is not a binary metric - there is no such thing as “FAIR or”not
FAIR”.</p>
<p>FAIR is not a perfect metric, nor does it provide a full and
exhaustive software quality checklist - there are other good software
quality practices not covered by FAIR. Conversely, software may be FAIR
but still not very good in terms of its functionality.</p>
<p>FAIR is <strong>not meant</strong> to criticise or discredit
work.</p>
<p>FAIR refers to the specific <strong>values</strong> of and describes
a set of <strong>principles</strong> to aid open and reproducible
research that can be a helpful guide for researchers who want to improve
their practices (by helping them see where they are on the <strong>FAIR
spectrum</strong> and help them on a <strong>journey</strong> to make
their software more FAIR).</p>
</div>
</div>
</div>
<div id="assessing-the-fairness-of-your-research-software" class="callout checklist">
<div class="callout-square">
<i class="callout-icon" data-feather="check-square"></i>
</div>
<span class="callout-header">Checklist</span>
<div id="assessing-the-fairness-of-your-research-software" class="callout-inner">
<h3 class="callout-title">Assessing the FAIRness of your Research
Software</h3>
<div class="callout-content">
<p>Here are some questions to help you assess where on the FAIR spectrum
your software is.</p>
<ol style="list-style-type: decimal">
<li><strong>Findable</strong></li>
</ol>
<ul>
<li>If these files were emailed to you, or sent on a chat platform, or
handed to you on a memory stick, how easy would it be to find them again
in 6 months, or 3 years?</li>
<li>If you asked your collaborator to give you the files again later on,
how would you describe them? Do they have a clear name?</li>
<li>If more data was added to the data set later, could you explain
exactly which data you used in the original analysis?</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><strong>Accessible</strong></li>
</ol>
<ul>
<li>If the person who gave you the files left your institution, how
would you get access to the files again?</li>
<li>Once you have the files, can you understand the code? Does it make
sense to you?</li>
<li>Do you need to log into anything to use this? Does it require
purchase or subscription to a service, platform or tool?</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><strong>Interoperable</strong></li>
</ol>
<ul>
<li>Is it clear what kind of input data it can read and what kind of
output data is produced? Will you be able to create the input files and
read the output files with the tools your community generally uses?</li>
<li>If you wanted to use this tool as part of a larger data processing
pipeline, does it allow you to link it with other tools in standard ways
such as an API or command-line interface?</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li><strong>Reusable</strong></li>
</ol>
<ul>
<li>Can you run the code on your platform/operating system (is there
documentation that covers installation instructions)? What programs or
libraries do you need to install to make it work (and which versions)?
Are these commonly used tools in your field?</li>
<li>Do you have explicit permission to use your collaborators code in
your own research and do they expect credit of some form (paper
authorship, citation or acknowledgement)? Are you allowed to edit,
publish or share the files with others?</li>
<li>Is the language used familiar to you and people in your research
field? Can you read the variable names in the code and the column names
in the data file and understand what they mean?</li>
<li>Is the code written in a way that allows you to easily modify or
extend it? Can you easily see what parameters to change to make it
calculate a different statistic, or run on a different input file?</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="fair-software-is-better-software">FAIR Software is Better Software<a class="anchor" aria-label="anchor" href="#fair-software-is-better-software"></a>
</h3>
<p>You may or may not find the FAIR Research Software Principles a
helpful way of framing good practices. The important thing is to focus
on how <strong>adopting these individual ways of working contributes to
making your software better</strong>. Many of the practices taught here
– and advocated for in the FAIR framework – will make your improve your
life as a researcher and software developer.</p>
<p>The table below provides a summary of some good practices for
developing research software, together with different tools that can
help with such practices and how they contribute to the the FAIR and
other good software principles.</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="27%">
<col width="46%">
<col width="2%">
<col width="8%">
<col width="6%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th>Practices</th>
<th>Tools</th>
<th>FAIR</th>
<th>Readable/Understandable</th>
<th>Correct/Reliable</th>
<th>Sustainable/Maintainable</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Use version control</td>
<td>
<code>git</code>, GitHub, GitLab, BitBucket</td>
<td>F</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Write modular code with well defined interfaces</td>
<td></td>
<td>R</td>
<td>x</td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>Connect reusable software components into automated/reproducible
software pipelines</td>
<td>Command line tools, CLI, workflow tools (Galaxy, Snakemake,
WorkflowHub, CWL)</td>
<td>I, R</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Use reproducible software development environments</td>
<td>
<code>venv</code>, <code>conda</code>, IDEs (integration with
virtual envs.), Docker, etc.</td>
<td>R</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Use conventional folder structures, format your code to comply with
coding conventions</td>
<td>PEP8, IDEs (help with formatting and conforming with coding
conventions)</td>
<td>R</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Use standard exchange data formats/communication
protocols/interfaces</td>
<td>CSV, YAML, JSON, CLI, REST, HTTP(S), etc.</td>
<td>I</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>Test your software</td>
<td>Unit, functional, integration, regression, etc. tests, IDEs (testing
and debugging), CI/CD (automation)</td>
<td></td>
<td></td>
<td>x</td>
<td></td>
</tr>
<tr class="even">
<td>Document your software</td>
<td>Comments and documentation strings, README, guides, contributions
guidelines</td>
<td>R</td>
<td>x</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Share your software &amp; encourage review</td>
<td>Code sharing platforms/services (e.g. GitHub, GitLab, BitBucket) and
their code review facilities</td>
<td>F, A</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>License your software</td>
<td>Various open source licences for code (MIT, BSD, GPL, LGPL, etc.),
LICENSE</td>
<td>R</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Use persistent identifiers for your software</td>
<td>DOIs, SWHIDs, Zenodo, FigShare, Software Heritage, etc.</td>
<td>F</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="even">
<td>Provide citation &amp; metadata info for your software</td>
<td>CITATION, DOIs, Zenodo, CFF, <code>cffinit</code>, CodeMeta,
etc.</td>
<td>R</td>
<td></td>
<td></td>
<td>x</td>
</tr>
<tr class="odd">
<td>Build community &amp; encourage collaboration around your
software</td>
<td>Code of Conduct, README, CONTRIBUTING, open source project
governance processes</td>
<td></td>
<td></td>
<td></td>
<td>x</td>
</tr>
</tbody>
</table>
<p>Best practices are always evolving and there is usually more we could
be doing to make our software even better, even more reproducible, even
FAIRer. The skills and techniques introduced in this lesson are a great
place to start!</p>
<div id="tools-for-assessing-fairness" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="tools-for-assessing-fairness" class="callout-inner">
<h3 class="callout-title">Tools for assessing FAIRness</h3>
<div class="callout-content">
<p>Here are some tools that can check your software and provide an
assessment of its FAIRness:</p>
<ul>
<li><a href="https://openebench.bsc.es/observatory/Evaluation" class="external-link">FAIRsoft
evaluator</a></li>
<li><a href="https://github.com/marioa/fair-test?tab=readme-ov-file" class="external-link">FAIR
software test</a></li>
<li><a href="https://github.com/fair-software/howfairis/" class="external-link"><code>How FAIR is your software</code>
- command line tool to evaluate a software repository’s compliance with
the FAIR principles</a></li>
</ul>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="wider-research-software-development-principles">Wider research software development principles<a class="anchor" aria-label="anchor" href="#wider-research-software-development-principles"></a>
</h2>
<hr class="half-width">
<p>Software and people who develop it have significance within the
research environment and a broader impact on society and the planet.
FAIR research software principles cover some aspects and operate within
the wider <a href="https://rsecon24.society-rse.org/about/research-software-development-principles/" class="external-link"><strong>research
software development principles</strong></a> - recommended by the
Software Sustainability Institute’s Director Neil Chue Hong during his
<a href="https://rsecon24.society-rse.org/about/research-software-development-principles/#neil-chue-hong-rse23-keynote" class="external-link">keynote
at RSECon23</a>. These principles can help us explore and reflect on our
own work and guide us on a path to better research.</p>
<div class="section level3">
<h3 id="helping-your-team">Helping your team<a class="anchor" aria-label="anchor" href="#helping-your-team"></a>
</h3>
<figure><img src="../fig/help-the-team.png" alt="Three 'help your team' principles: write FAIR, secure and maintainable code" class="figure mx-auto d-block"><div class="figcaption">Helping your team, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
<div class="section level3">
<h3 id="helping-you-peers">Helping you peers<a class="anchor" aria-label="anchor" href="#helping-you-peers"></a>
</h3>
<figure><img src="../fig/help-the-peers.png" alt="Three 'help your peers' principles: make your work reproducible, inclusive and credit everyone involved in it" class="figure mx-auto d-block"><div class="figcaption">Helping your peers, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
<div class="section level3">
<h3 id="helping-the-world">Helping the world<a class="anchor" aria-label="anchor" href="#helping-the-world"></a>
</h3>
<figure><img src="../fig/help-the-world.png" alt="Three 'help the world principles': when developing research software be responsible, open and global, and humanist" class="figure mx-auto d-block"><div class="figcaption">Helping the world, image from RSECon2024, used
under CC BY 4.0</div>
</figure>
</div>
</section><section><h2 class="section-heading" id="further-reading">Further reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<hr class="half-width">
<p>We recommend the following resources for some additional reading on
FAIR Research Software:</p>
<ul>
<li><a href="https://fair-software.eu/" class="external-link">“Five recommendations for FAIR
software”</a></li>
<li><a href="https://librarycarpentry.org/Top-10-FAIR/files/poster_10things_FAIRsoftware.pdf" class="external-link">“10
easy things to make your research software FAIR”</a></li>
<li><a href="https://doi.org/10.1371/journal.pcbi.1012410" class="external-link">“Ten simple
rules for training scientists to make better software”</a></li>
<li><a href="https://zenodo.org/records/11096498" class="external-link">Automating assessment
of the FAIR Principles for Research Software (FAIR4RS)</a></li>
<li>
<a href="https://esciencecenter-digital-skills.github.io/software-support-essentials/" class="external-link">Short
online courses</a> on various aspects of research software (including <a href="https://esciencecenter-digital-skills.github.io/software-support-essentials/fairsoftware" class="external-link">FAIR
research software</a> and data), by the NeSC Research Software
Support</li>
<li>
<a href="https://coderefinery.org/" class="external-link">CodeRefinery</a> - training and
e-Infrastructure for research software development</li>
<li>A <a href="https://fairsoftwarechecklist.net/" class="external-link">self-assessment
checklist for FAIR research software</a>, by the Netherlands eScience
Center and Australian Research Data Commons</li>
<li>
<a href="https://github.com/NLeSC/awesome-research-software-registries" class="external-link">Awesome
Research Software Registries</a> - a list of research software
registries (by country, organisation, domain and programming language)
where research software can be registered to help promote its
discovery</li>
</ul>
<p>Also check out <a href="reference.html#litref">the full reference set
for this course</a>.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>FAIR software and data is Findable, Accessible, Interoperable,
Reusable and provide one framework for improving software and data
practices in research.</li>
<li>FAIR and other good research software principles, practices and
tools support research and researchers by saving time, reducing barriers
to discovery, and increasing impact of the research output.</li>
<li>When developing software for your research, think about how it will
help you and your team, your peers and domain/community and the
world.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries-incubator/better-research-software/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries-incubator/better-research-software/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries-incubator/better-research-software/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries-incubator/better-research-software/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:a.nenadic@software.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries-incubator.github.io/better-research-software/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "research software, good practices, FAIR, reproducibility, sustainability, open, research, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://carpentries-incubator.github.io/better-research-software/instructor/aio.html",
  "identifier": "https://carpentries-incubator.github.io/better-research-software/instructor/aio.html",
  "dateCreated": "2023-10-03",
  "dateModified": "2025-08-27",
  "datePublished": "2025-08-27"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

